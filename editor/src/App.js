import React, { useState, useEffect } from "react"

import Canvas from "./components/Canvas/Canvas.js"
import BottomBar from "./components/BottomBar/BottomBar.js"

const AppContext = React.createContext()

const testImage = `data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAGQCAAAAACl1GkQAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QTlFQ0YyOUVERUY5MTFFNDhGNUJFRDIzMUMxNkRFM0MiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QTlFQ0YyOUZERUY5MTFFNDhGNUJFRDIzMUMxNkRFM0MiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBOUVDRjI5Q0RFRjkxMUU0OEY1QkVEMjMxQzE2REUzQyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBOUVDRjI5RERFRjkxMUU0OEY1QkVEMjMxQzE2REUzQyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PnVwrLwAAAVnSURBVHja7d2tmptaGIDR3v+1oFAYFCYKg8HEYDAYDALD6XQ654SfDTvJnE46rNemX592r2QD6RR+JHqpflgCIAICRECACAgQAQEiIAICRECACAgQAQEiIAICRECACAgQAQEiIAICRECACAgQAQEiIAICRECACAgQAQEiIAICRECACAgQAQEiIAICRECACAgQAQEiIAICRECACAgQAQEiIAICRECACAgQAQEiIAICRECACAgQAQEiIEAERECACAgQAQEiIEAERECACAgQAQEiIEAERECACAgQAQEiIEAERECACAgQAQEiIEAERECACAgQAQEiIEAERECACAgQAQEiIEAERECACAgQAQEiIEAERECA6BuA5HXbTT8bu6bKIkequ0eyqunGt5murfMzgNTTTV30WFYPt4NTX6Z3j1SHI2nZz0aGOgOyuVDXadVYf/ZIUo3rmSYFsuqysVBvb/n8U0fyfnNkvABZdJ1ClZ84Uo6hkQbIbO9pp3DXzxqZ/7kWdSmQ/xa3n6Z7l3d/ZPMN3+yO9EAiV2pzC3pgpDwYaYBE7CTv5fePFMuR4nCkAvJ+5nO4UtOQPj2SDtP97ucE6Y9XaqqfHrlGjHRAIrb297InR7KokRJIkgxRS3V9cqSJGumBrA8HTVkU5Wr9xudGkuUVYVcVxeU6fu1R5CVBFnt793ujyZbXfZfjkS48clkc8X+fg6V13BXlmUCG0LVAE7xKiB25hl7p09DhaDg9SBrew/vASw+MzF8Ys/AnND07SBG+mltcyT0zkoRPiNNx/3rybCDlzklOv30WW+7sMYGRbOdTcP26E99XBKl3DqnX7fduvfMFVGCk2GG/7F1Onhyk3vvCqnhipNj5AxVAgAABAgQIECBAgAABAgQIECAnAYn5ThkIECBAgAABAgQIkL8VpNv9CXggQIAAAQIECBAgQIAAAQIECBAgQIAACYzkxa8aIC8Csj8CBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAiQ1wSpdn7p/N/J8/tH/gXJA/fGXBtWZwcptu9a+VYWdVfSqJFk50aXg7uShpewvX1pfm/r4ZmR+arPnmRRTWHfM4Isbsp+8+Zd3HO6fWpkLnVzK9N8/puNyelBFrcHr7e39tm6x45UYaqPz8jyyXvNCUACfWzWi9vkT0P5c9fIytUTKW62mdiRm+0nXbw0vj1yNb2sfrzuAiQZp5ja8DYXNdJGjfzZHetFQeqopSru/f337wofqAayuhv+dvMD0QMj2z/8u/yApEA2DglbK7U4G40YWT4sJ4tA/NNPxH1RkIj9fXX9/MBIdd9B58wg6dFT8NYnow+MHD4XrE+BxG0nW89OOziMbC5uf9e2eGaQ5fXy4ui8+c7dHdl+s+9+rIY8AXLzGenv2XyOljc40rzQfvXaIMG1GsPPIEoDT1Mdq8hv+2+6JgmQ5RfxW8/vbHc39s2Rbnck27oe6YsEyMYalMtNqDlcqNVIezhSLE+ZuzJJvjlIVhy3faSuuo9j9dCUUdt6djPSRo6U7cdHa2yrLEm+PchzvXHl//vIr/+2+8V/078E5DwBASIgQAQEiIAAERAgAiIgQAQEiIAAERAgAiIgQAQEiIAAERAgAiIgQAQEiIAAERAgAiIgQAQEiIAAERAgAiIgQAQEiIAAERAgAiIgQAQEiIAAERAgAiIgQAQEiIAAERAgAiIgQAQEiIAAERAgAiIgQAQEiIAAERAgAgJEQAQEiIAAERAgAgJEQAQEiIAAERAgAgJEQAQEiIAAERAgAgJEQAQEiIAAERAgAgJEQAQEiIAAERAgAgJEQAQEiIAAERAgAgJEQATkRfsHFr1D2PoP8FAAAAAASUVORK5CYII=`

function App() {
    const [context, setContext] = useState({
        event: new EventTarget(),
        image: null,
        setImage: image => setContext({...context, image})
    })

    useEffect(() => {
        context.setImage(testImage)
    }, [])

    return (
        <AppContext.Provider value={context}>
            <Canvas/>
            <BottomBar/>
        </AppContext.Provider>
    )
}

export default App

export {
    AppContext
}