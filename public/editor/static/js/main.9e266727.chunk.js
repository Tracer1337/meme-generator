(this.webpackJsonpeditor=this.webpackJsonpeditor||[]).push([[0],{102:function(e,t,n){e.exports=n.p+"static/media/WhatsApp.0e878a0f.svg"},103:function(e,t,n){e.exports=n.p+"static/media/Twitter.1f5a8ef5.png"},104:function(e,t,n){e.exports=n.p+"static/media/Facebook.9ee5d43c.png"},105:function(e,t,n){e.exports=n.p+"static/media/Gmail.598d07e7.png"},106:function(e,t,n){e.exports=n.p+"static/media/Telegram.b4b9d64f.png"},107:function(e,t,n){e.exports=n.p+"static/media/Pinterest.717253e4.png"},108:function(e,t,n){e.exports=n.p+"static/media/Reddit.3826daa7.png"},109:function(e,t,n){e.exports=n.p+"static/media/Tumblr.93e9138a.png"},110:function(e,t,n){e.exports=n.p+"static/media/Skype.5a725d78.png"},111:function(e,t,n){e.exports=n.p+"static/media/FBMessenger.f8b3ffc7.png"},122:function(e){e.exports=JSON.parse('[{"selector":"#templates-button","content":"Templates & Stickers"},{"selector":"#textbox-button","content":"Textbox"},{"selector":"#undo-button","content":"Undo"}]')},140:function(e,t,n){e.exports=n(172)},171:function(e,t,n){},172:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(13),c=n.n(o),i=n(129),l=n(232),s=n(12),u=n(7),m=n(22),p=n(6),d=n.n(p),f=n(29),g=n(9),b=n(211),h=n(209),v=n(73),E=n.n(v),w=n(72),x=n.n(w),y=n(212),O=n(213),j=n(20),k=n(233),C=n(238);var S=function(e){var t=e.name,n=e.label,a=e.options,o=e.child,c=e.className,i=Object(j.d)(),l=i.control,s=i.watch;return r.a.createElement(j.a,{as:function(e){return r.a.createElement(k.a,Object.assign({select:!0,label:n,fullWidth:!0,className:c,value:s(t)},e),Object.entries(a).map((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return r.a.createElement(C.a,{key:a,value:a},r.a.createElement(o,{label:n,value:a}))})))},control:l,name:t})},N=n(210),T=n(239),L=Object(h.a)((function(e){return{switch:{width:"100%"}}}));var R=function(e){var t=e.name,n=e.label,a=e.className,o=Object(j.d)(),c=o.register,i=o.watch,l=o.setValue,s=L();return r.a.createElement(N.a,{control:r.a.createElement(T.a,{name:t,inputRef:c(),onChange:function(e,n){return l(t,n)},checked:i(t)}),label:n,className:"".concat(s.switch," ").concat(a)})},z=n(39),I=n(75),B=n(37);var W=function(e,t){return function(n){var o=n.open,c=n.onClose,i=Object(I.a)(n,["open","onClose"]);Object(a.useEffect)((function(){o&&(window.location.hash="#"+t,window.addEventListener("popstate",l),B.a.modalview(t))}),[o]);var l=function e(t){var n=t.values;window.removeEventListener("popstate",e),window.location.hash="",c(n)};return r.a.createElement(e,Object(s.a)(Object(s.a)({},i),{},{open:o,onClose:function(e){return l({values:e})}}))}},F=Object(h.a)((function(e){return{form:{padding:e.spacing(2),paddingTop:0},text:{padding:"".concat(e.spacing(3),"px ").concat(e.spacing(2),"px"),whiteSpace:"pre"},applyButton:{marginTop:e.spacing(2)},input:{marginTop:e.spacing(1)}}}));var A=W((function(e){var t=e.onClose,n=e.open,o=e.values,c=e.text,i=Object(j.c)(),l=i.getValues,u=i.handleSubmit,m=i.control,p=i.watch,d=i.reset,f=i.register,g=i.setValue,b=F(),h=function(){t(l())};return Object(a.useEffect)((function(){d(o)}),[o,d]),r.a.createElement(y.a,{onClose:h,open:n},r.a.createElement("div",{className:b.text,style:p()},c),r.a.createElement(j.b,{control:m,watch:p,register:f,setValue:g},r.a.createElement("form",{onSubmit:u(h),className:b.form},r.a.createElement(S,{name:"color",label:"Color",options:z.colors,className:b.input,child:function(e){var t=e.label,n=e.value;return r.a.createElement("span",{style:{color:n}},t)}}),r.a.createElement(S,{name:"backgroundColor",label:"Background Color",options:Object(s.a)({Transparent:"transparent"},z.colors),className:b.input,child:function(e){var t=e.label,n=e.value;return r.a.createElement("span",{style:{color:n}},t)}}),r.a.createElement(S,{name:"textAlign",label:"Text Align",options:z.textAlign,className:b.input,child:function(e){return e.label}}),r.a.createElement(S,{name:"verticalTextAlign",label:"Vertical Text Align",options:z.verticalTextAlign,className:b.input,child:function(e){return e.label}}),r.a.createElement(S,{name:"fontFamily",label:"Font Family",options:z.fontFamilies,className:b.input,child:function(e){var t=e.label,n=e.value;return r.a.createElement("span",{style:{fontFamily:n}},t)}}),r.a.createElement(R,{name:"bold",label:"Bold",className:b.input}),r.a.createElement(R,{name:"caps",label:"Caps",className:b.input}),r.a.createElement(O.a,{fullWidth:!0,className:b.applyButton,type:"submit"},"Apply"))))}),"settings");new URLSearchParams(window.location.search).get("isAndroidApp");var D=function(e){var t=e.createSnapshot,n=e.applySnapshot,r=e.onSnapshotsEmpty,o=Object(a.useContext)(_n),c=Object(a.useRef)([]),i=function(){var e=t();c.current.push(e),c.current.length>50&&c.current.shift()},l=function(){if(0!==c.current.length){var e=c.current.pop();n(e)}else r()};return Object(a.useEffect)((function(){return o.event.addEventListener("undo",l),o.event.addEventListener("addSnapshot",i),function(){o.event.removeEventListener("undo",l),o.event.removeEventListener("addSnapshot",i)}})),function(){o.event.dispatchEvent(new CustomEvent("addSnapshot"))}},P=n(56),M=n(98),H=n.n(M),V=n(100),_=n.n(V),U=n(34),q=n.n(U),G=n(76),J=n.n(G),Y=n(99),X=n.n(Y),K=Object(h.a)((function(e){var t={backgroundColor:"rgba(255, 255, 255, .5)",border:"1px solid black",borderRadius:e.shape.borderRadius,display:function(e){return e.capture&&"none"}},n=Object(s.a)(Object(s.a)({},t),{},{zIndex:20,height:24,position:"absolute",cursor:"pointer"});return{container:{position:"absolute",top:0,display:"flex",flexDirection:"column",alignItems:"center",zIndex:10},rotationHandle:Object(s.a)(Object(s.a)({},t),{},{cursor:"pointer"}),button:Object(s.a)(Object(s.a)({},t),{},{padding:0,marginLeft:e.spacing(1),color:"black"}),action:{position:"absolute",transform:"translateY(-100%)",width:"100%",display:"flex",justifyContent:"center",height:24},resizeHandles:{position:"absolute",height:"100%",width:"100%"},vertical:Object(s.a)(Object(s.a)({},n),{},{top:"100%",left:"50%",transform:"translate(-50%, -50%)",cursor:"ns-resize"}),horizontal:Object(s.a)(Object(s.a)({},n),{},{top:"50%",left:"100%",transform:"translate(-50%, -50%) rotate(-90deg)",cursor:"ew-resize"}),diagonal:Object(s.a)(Object(s.a)({},n),{},{top:"100%",left:"100%",transform:"translate(-50%, -50%) rotate(-45deg)",cursor:"nwse-resize"})}}));var $=function(e){var t=e.controls,n=e.defaultValues,o=e.Child;return function(e){var c=e.onRemove,i=e.handle,l=e.grid,m=e.canvas,p=e.template,f=e.id,h=Object(I.a)(e,["onRemove","handle","grid","canvas","template","id"]),v=Object(a.useContext)(_n),E=Object(a.useRef)((null===p||void 0===p?void 0:p.rotation)||0),w=Object(a.useRef)(),x=Object(a.useRef)(),y=Object(a.useRef)(!1),O=Object(a.useState)({x:(null===p||void 0===p?void 0:p.x)||0,y:(null===p||void 0===p?void 0:p.y)||0}),j=Object(u.a)(O,2),k=j[0],C=j[1],S=Object(a.useState)((null===p||void 0===p?void 0:p.rotation)||0),N=Object(u.a)(S,2),T=N[0],L=N[1],R=Object(a.useState)((null===p||void 0===p?void 0:p.height)&&p.height-12||n.height),z=Object(u.a)(R,2),B=z[0],W=z[1],F=Object(a.useState)((null===p||void 0===p?void 0:p.width)&&p.width-12||n.width),A=Object(u.a)(F,2),M=A[0],V=A[1],U=Object(a.useState)(!1),G=Object(u.a)(U,2),Y=G[0],$=G[1],Q=Object(a.useState)(!1),Z=Object(u.a)(Q,2),ee=Z[0],te=Z[1],ne=Object(a.useState)(!0),ae=Object(u.a)(ne,2),re=ae[0],oe=ae[1],ce=K({capture:Y}),ie=Object(a.useMemo)((function(){if(l.enabled)return l.fixedSize?[l.spacing,l.spacing]:[m.clientWidth/l.columns,m.clientHeight/l.rows]}),[l,v.image]),le=D({createSnapshot:function(){return{width:M,height:B,position:k,rotation:T}},applySnapshot:function(e){V(e.width),W(e.height),C(e.position),L(e.rotation)},onSnapshotsEmpty:function(){p||c(f)}}),se=function(e,t){var n=x.current.getBoundingClientRect(),a=n.x+n.width/2,r=n.y+n.height/2,o=Math.atan2(r-t.y,a-t.x)-E.current;return l.enabled&&(o-=o%(Math.PI/4)),o},ue=function(e,t){E.current=se(0,t)},me=function(){i.onResize&&i.onResize()},pe=function(e){var t=-T,n=e.deltaX*Math.sin(t)+e.deltaY*Math.cos(t),a=B+n;if(W(a),i.aspectRatio){var r=a*(1/i.aspectRatio);V(r)}},de=function(e){var t=-T,n=e.deltaX*Math.cos(t)-e.deltaY*Math.sin(t),a=M+n;if(V(M+n),i.aspectRatio){var r=a*i.aspectRatio;W(r)}};return i&&(i.beforeCapturing=function(){$(!0)},i.afterCapturing=function(){$(!1)}),Object(a.useEffect)((function(){if(l.enabled){C({x:k.x-k.x%ie[0],y:k.y-k.y%ie[1]});var e=M-(M+12)%ie[0];V(e);var t=B-(B+12)%ie[1];W(t)}}),[l]),Object(a.useEffect)((function(){var e=function(e){ee&&!w.current.contains(e.target)&&te(!1)};return window.addEventListener("click",e),window.addEventListener("touchstart",e),function(){window.removeEventListener("click",e),window.removeEventListener("touchstart",e)}})),Object(a.useEffect)((function(){Object(g.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(requestAnimationFrame);case 2:i.aspectRatio&&(M?W(M*i.aspectRatio):B&&V(B*(1/i.aspectRatio)));case 3:case"end":return e.stop()}}),e)})))()}),[]),r.a.createElement(P.DraggableCore,{onDrag:function(e,t){ee&&(y.current||(le(),y.current=!0),C({x:k.x+t.deltaX,y:k.y+t.deltaY}))},onStop:function(){y.current=!1},grid:ie,handle:"#element-".concat(f),disabled:!re},r.a.createElement("div",{className:"".concat(ce.container," element"),style:{transform:"translate(".concat(k.x,"px, ").concat(k.y,"px) rotate(").concat(T,"rad)"),transformOrigin:"center center",zIndex:n.zIndex||0},ref:w,"data-id":f},r.a.createElement(o,Object.assign({id:f,handle:i,template:p,onFocus:function(){te(!0)},isFocused:ee,toggleMovement:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];oe(e)},dimensions:Object(s.a)(Object(s.a)({width:M,height:B},k),{},{rotation:T}),ref:x,capture:Y},h)),ee&&r.a.createElement(r.a.Fragment,null,t.includes("resize")&&r.a.createElement("div",{className:ce.resizeHandles},r.a.createElement(P.DraggableCore,{onDrag:function(e,t){pe(t),me()},onStart:le,grid:ie},r.a.createElement("div",{className:ce.vertical},r.a.createElement(J.a,null))),r.a.createElement(P.DraggableCore,{onDrag:function(e,t){de(t),me()},onStart:le,grid:ie},r.a.createElement("div",{className:ce.horizontal},r.a.createElement(J.a,null))),r.a.createElement(P.DraggableCore,{onDrag:function(e,t){de(t),pe(t),me()},onStart:le,grid:ie},r.a.createElement("div",{className:ce.diagonal},r.a.createElement(J.a,null)))),r.a.createElement("div",{className:ce.action},t.includes("rotate")&&r.a.createElement(P.DraggableCore,{onStart:function(){ue.apply(void 0,arguments),le()},onStop:function(e,t){E.current=se(0,t)},onDrag:function(e,t){L(se(0,t))}},r.a.createElement(H.a,{className:ce.rotationHandle})),t.includes("edit")&&r.a.createElement(b.a,{className:ce.button,onClick:i.onEditClicked},r.a.createElement(X.a,null)),t.includes("settings")&&r.a.createElement(b.a,{className:ce.button,onClick:i.onSettingsClicked},r.a.createElement(_.a,null)),t.includes("remove")&&r.a.createElement(b.a,{className:ce.button,onClick:function(){c(f)}},r.a.createElement(q.a,null))))))}},Q=n(101),Z=n.n(Q);var ee=function(e){var t=e.width,n=e.height,a=e.text,r=e.styles;if(t=Math.floor(t),n=Math.floor(n),t<=0||n<=0)return 0;var o=document.createElement("div");o.style.position="absolute",o.style.width=t+"px",o.style.height=n+"px",o.style.whiteSpace="pre-wrap",o.style.fontWeight=r.bold?"bold":null,o.style.textTransform=r.caps?"uppercase":null,Object.assign(o.style,r),o.textContent=a,document.body.appendChild(o);var c=function(e){Z()(e,{multiLine:!0,minFontSize:1,maxFontSize:window.innerHeight});var t=e.querySelector("span"),n=getComputedStyle(t).fontSize;return parseInt(n)}(o);return document.body.removeChild(o),c},te={color:"black",textAlign:"center",fontFamily:"'Impact', fantasy",backgroundColor:"transparent",verticalTextAlign:"center",bold:!1,caps:!0},ne=Object(h.a)((function(e){return{input:{background:"none",border:"none",outline:function(e){return!e.capture&&e.isFocused?"1px dashed gray":"none"},fontSize:24,color:"white",fontFamily:e.typography.fontFamily,textTransform:function(e){return e.settings.caps&&"uppercase"},resize:"none",whiteSpace:"pre-wrap",zIndex:10,padding:6,display:"flex",flexDirection:"column",fontWeight:function(e){return e.settings.bold&&"bold"},userSelect:function(e){return!e.isEditing&&"none"},cursor:function(e){return!e.isEditing&&"move"},justifyContent:function(e){return"top"===e.settings.verticalTextAlign?"flex-start":"bottom"===e.settings.verticalTextAlign?"flex-end":"center"===e.settings.verticalTextAlign?"center":null}}}}));var ae=$({controls:["resize","rotate","edit","settings","remove"],defaultValues:{width:160,height:24,zIndex:2},Child:r.a.forwardRef((function(e,t){var n=e.id,o=e.handle,c=e.template,i=e.onFocus,l=e.isFocused,m=e.toggleMovement,p=e.dimensions,f=Object(s.a)({},te);if(null===c||void 0===c?void 0:c.settings)for(var b in f)c.settings[b]&&(f[b]=c.settings[b]);var h=Object(a.useRef)(),v=Object(a.useRef)(!1),E=Object(a.useState)("Enter Text..."),w=Object(u.a)(E,2),x=w[0],y=w[1],O=Object(a.useState)(!1),j=Object(u.a)(O,2),k=j[0],C=j[1],S=Object(a.useState)(f),N=Object(u.a)(S,2),T=N[0],L=N[1],R=Object(a.useState)(!1),z=Object(u.a)(R,2),I=z[0],B=z[1],W=ne({settings:T,isFocused:l,isEditing:I}),F=D({createSnapshot:function(){return{value:x,settings:T}},applySnapshot:function(e){y(e.value),h.current.textContent=e.value,L(e.settings)},onSnapshotsEmpty:function(){y("Enter Text..."),L(f)}}),P=function(){var e=Object(g.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function e(){m(!0),B(!1),h.current.removeEventListener("focusout",e)},v.current=!0,m(!1),B(!0),h.current.addEventListener("focusout",t),e.next=7,new Promise(requestAnimationFrame);case 7:h.current.focus(),x.toLowerCase()==="Enter Text...".toLowerCase()&&(h.current.textContent="");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();o&&(o.toObject=function(e){var t=e.image,n=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e/(n?t.clientWidth:t.clientHeight)*100+"%"},a={};for(var r in T)T[r]!==f[r]&&(a[r]=T[r]);return{value:x,width:n(p.width+12,!0),height:n(p.height+12),x:n(p.x,!0),y:n(p.y),rotation:p.rotation,settings:a}},o.onEditClicked=P,o.onSettingsClicked=function(){C(!0)});var M=Object(a.useMemo)((function(){return Object(s.a)(Object(s.a)({},T),{},{width:p.width+"px",height:p.height+"px",fontSize:ee(Object(s.a)({styles:T,text:x},p))})}),[x,T,p.width,p.height]);return Object(a.useEffect)((function(){h.current.textContent=x}),[]),Object(a.useEffect)((function(){I||x||(y("Enter Text..."),h.current.textContent="Enter Text...")}),[I]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{contentEditable:I,id:"element-".concat(n),className:"textbox ".concat(W.input),style:M,ref:function(e){h.current=e,t.current=e},onMouseDown:i,onTouchStart:i,onInput:function(e){v.current&&(v.current=!1,F());var t=e.target.textContent;y(t)}}),r.a.createElement(A,{open:k,onClose:function(e){e&&(F(),L(e)),C(!1)},values:T,text:x}))}))}),re=Object(h.a)((function(e){return{form:{padding:e.spacing(2),paddingTop:0},applyButton:{marginTop:e.spacing(2)},input:{marginTop:e.spacing(1)},image:{width:100},imageWrapper:{width:"100%",textAlign:"center",padding:e.spacing(1),boxSizing:"border-box"}}}));var oe=W((function(e){var t=e.onClose,n=e.open,o=e.values,c=e.src,i=Object(j.c)(),l=i.getValues,s=i.handleSubmit,u=i.control,m=i.watch,p=i.reset,d=i.register,f=i.setValue,g=re(),b=function(){t(l())};return Object(a.useEffect)((function(){p(o)}),[o,p]),r.a.createElement(y.a,{onClose:b,open:n},r.a.createElement("div",{className:g.imageWrapper},r.a.createElement("img",{src:c,alt:"",className:g.image,style:{transform:"scaleX(".concat(m("flip")?"-1":"1",")")}})),r.a.createElement(j.b,{control:u,watch:m,register:d,setValue:f},r.a.createElement("form",{onSubmit:s(b),className:g.form},r.a.createElement(R,{name:"keepAspectRatio",label:"Keep Aspect Ratio",className:g.input}),r.a.createElement(R,{name:"flip",label:"Flip",className:g.input}),r.a.createElement(O.a,{fullWidth:!0,className:g.applyButton,type:"submit"},"Apply"))))}),"settings"),ce={keepAspectRatio:!0,flip:!1},ie=Object(h.a)((function(e){return{image:{zIndex:1,cursor:"move"}}}));var le=$({controls:["resize","rotate","remove","settings"],defaultValues:{width:100,zIndex:1},Child:r.a.forwardRef((function(e,t){var n=e.src,o=e.id,c=e.onFocus,i=e.dimensions,l=e.handle,s=ie(),m=Object(a.useRef)(),p=Object(a.useState)(ce),d=Object(u.a)(p,2),f=d[0],g=d[1],b=Object(a.useState)(!1),h=Object(u.a)(b,2),v=h[0],E=h[1],w={width:i.width+"px",height:i.height+"px",transform:"scaleX(".concat(f.flip?"-1":"1",")")};return l&&(l.onSettingsClicked=function(){return E(!0)},f.keepAspectRatio?Object.defineProperty(l,"aspectRatio",{get:function(){var e,t;return(null===(e=m.current)||void 0===e?void 0:e.naturalHeight)/(null===(t=m.current)||void 0===t?void 0:t.naturalWidth)},configurable:!0}):delete l.aspectRatio),r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:n,alt:"",id:"element-".concat(o),ref:function(e){t.current=e,m.current=e},onMouseDown:c,onTouchStart:c,style:w,className:s.image,draggable:"false"}),r.a.createElement(oe,{open:v,onClose:function(e){e&&g(e),E(!1)},values:f,src:n}))}))});function se(e,t,n,a,r){e.beginPath(),e.moveTo(t,n),e.lineTo(a,r),e.stroke()}var ue=Object(h.a)((function(e){return{canvas:{position:"absolute",pointerEvents:"none",touchAction:"none"}}}));var me=function(e){var t,n=e.config,o=e.canvas,c=e.border,i=ue(),l=Object(a.useContext)(_n),s=Object(a.useRef)(),u=function(){var e=Object(g.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(requestAnimationFrame);case 2:t=o.getBoundingClientRect(),s.current.width=t.width,s.current.height=t.height;case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(e,n){for(var a=0;a<s.current.width;a+=e)se(t,a,0,a,s.current.height);for(var r=0;r<s.current.height;r+=n)se(t,0,r,s.current.width,r)},p=function(){(t=s.current.getContext("2d")).strokeStyle=n.color,n.fixedSpacing?n.spacing&&m(n.spacing,n.spacing):function(){if(n.columns&&n.rows&&o){var e=o.clientWidth/n.columns,t=o.clientHeight/n.rows;m(e,t)}}()};return Object(a.useEffect)((function(){o&&u().then(p)}),[o,n,l.image,c]),r.a.createElement("canvas",{ref:s,style:{display:!n.enabled&&"none"},className:i.canvas})},pe=n(214),de=n(215),fe=Object(h.a)((function(e){return{form:{padding:e.spacing(2),paddingTop:0},applyButton:{marginTop:e.spacing(2)},input:{marginTop:e.spacing(1)}}}));var ge=W((function(e){var t=e.onClose,n=e.open,o=e.values,c=Object(j.c)(),i=c.register,l=c.getValues,s=c.handleSubmit,u=c.control,m=c.watch,p=c.reset,d=c.setValue,f=fe(),g=function(){var e=l();t(e)};return Object(a.useEffect)((function(){p(o)}),[o,p]),r.a.createElement(y.a,{onClose:g,open:n},r.a.createElement(pe.a,null,"Set Border"),r.a.createElement(j.b,{control:u,watch:m,register:i,setValue:d},r.a.createElement("form",{onSubmit:s(g),className:f.form},r.a.createElement(de.a,null,r.a.createElement(k.a,{inputRef:i(),className:f.input,fullWidth:!0,type:"number",name:"size",label:"Size (px)"}),r.a.createElement(S,{name:"color",label:"Color",options:z.colors,className:f.input,child:function(e){var t=e.label,n=e.value;return r.a.createElement("span",{style:{color:n}},t)}}),r.a.createElement(R,{name:"top",label:"Top",className:f.input}),r.a.createElement(R,{name:"bottom",label:"Bottom",className:f.input}),r.a.createElement(R,{name:"left",label:"Left",className:f.input}),r.a.createElement(R,{name:"right",label:"Right",className:f.input}),r.a.createElement(O.a,{fullWidth:!0,className:f.applyButton,type:"submit"},"Apply")))))}),"border"),be=n(220),he=n(132),ve=n(46),Ee=n(240),we=n(114),xe=n.n(we),ye=n(113),Oe=n.n(ye),je=n(112),ke=n.n(je),Ce=n(115),Se=n.n(Ce),Ne=n(235),Te=n(102),Le=n.n(Te),Re=n(103),ze=n.n(Re),Ie=n(104),Be=n.n(Ie),We=n(105),Fe=n.n(We),Ae=n(106),De=n.n(Ae),Pe=n(107),Me=n.n(Pe),He=n(108),Ve=n.n(He),_e=n(109),Ue=n.n(_e),qe=n(110),Ge=n.n(qe),Je=n(111),Ye=n.n(Je),Xe=Object(h.a)((function(e){return{innerDrawer:{borderRadius:"16px 16px 0 0"},title:{paddingBottom:e.spacing(1)},iconsContainer:{display:"flex",padding:"0 ".concat(e.spacing(1),"px ").concat(e.spacing(2),"px ").concat(e.spacing(1),"px"),overflowX:"scroll"},icon:{width:40}}}));var Ke=function(e){var t=e.open,n=e.link,o=e.onClose,c=e.onOpen;n=encodeURIComponent(n);var i=Object(a.useContext)(_n),l=Xe(),s=function(e,t){return function(){i.event.dispatchEvent(new CustomEvent("share",{detail:{label:t}})),window.open(e.replace(/{}/g,n))}};return r.a.createElement(Ne.a,{disableDiscovery:!0,disableSwipeToOpen:!0,open:t,onClose:o,onOpen:c,anchor:"bottom",PaperProps:{className:l.innerDrawer}},r.a.createElement(pe.a,{className:l.title},"Share Link"),r.a.createElement("div",{className:l.iconsContainer},r.a.createElement(b.a,{onClick:s("whatsapp://send?text={}","WhatsApp")},r.a.createElement("img",{src:Le.a,alt:"WhatsApp",className:l.icon})),r.a.createElement(b.a,{onClick:s("https://www.facebook.com/sharer/sharer.php?u={}","Facebook")},r.a.createElement("img",{src:Be.a,alt:"Facebook",className:l.icon})),r.a.createElement(b.a,{onClick:s("http://twitter.com/intent/tweet?text={}","Twitter")},r.a.createElement("img",{src:ze.a,alt:"Twitter",className:l.icon})),r.a.createElement(b.a,{onClick:s("https://telegram.me/share?url={}","Telegram")},r.a.createElement("img",{src:De.a,alt:"Telegram",className:l.icon})),r.a.createElement(b.a,{onClick:s("https://web.skype.com/share?url={}","Skype")},r.a.createElement("img",{src:Ge.a,alt:"Skype",className:l.icon})),r.a.createElement(b.a,{onClick:s("fb-messenger://share?link={}","FB-Messenger")},r.a.createElement("img",{src:Ye.a,alt:"Messenger",className:l.icon})),r.a.createElement(b.a,{onClick:s("https://www.pinterest.com/pin/create/button?url={}","Pinterest")},r.a.createElement("img",{src:Me.a,alt:"Pinterest",className:l.icon})),r.a.createElement(b.a,{onClick:s("https://www.reddit.com/submit?url={}","Reddit")},r.a.createElement("img",{src:Ve.a,alt:"Reddit",className:l.icon})),r.a.createElement(b.a,{onClick:s("https://www.tumblr.com/widgets/share/tool?posttype=link&canonicalUrl={}","Tumblr")},r.a.createElement("img",{src:Ue.a,alt:"Tumblr",className:l.icon})),r.a.createElement(b.a,{onClick:s("mailto:?body={}","Mail")},r.a.createElement("img",{src:Fe.a,alt:"Email",className:l.icon}))))},$e=n(217),Qe=n(218),Ze=n(219),et=Object(h.a)((function(e){return{innerDialog:{"& p":{color:e.palette.text.primary}},link:{color:e.palette.text.secondary}}}));var tt=function(e){var t=e.open,n=e.onAccept,o=e.onReject,c=Object(a.useRef)(),i=et(),l=Object(a.useState)(!1),s=Object(u.a)(l,2),m=s[0],p=s[1];Object(a.useEffect)((function(){t&&Object(g.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(requestAnimationFrame);case 2:if(c.current){e.next=4;break}return e.abrupt("return");case 4:t=c.current.querySelector("."+i.innerDialog),n=function e(){t.getBoundingClientRect().height+t.scrollTop>=t.scrollHeight&&(console.log("Scrolling"),p(!0),t.removeEventListener("scroll",e))},t.addEventListener("scroll",n),n();case 8:case"end":return e.stop()}}),e)})))()}),[t]);var f=function(){p(!1),o()};return r.a.createElement(y.a,{open:t,onClose:f,ref:function(e){return c.current=e}},r.a.createElement(pe.a,null,"Terms and conditions"),r.a.createElement($e.a,{className:i.innerDialog},r.a.createElement(Qe.a,null,"By creating a link for your image, it will be uploaded to our servers and therefor be listed in our ",r.a.createElement("a",{href:"/archive",target:"_blank",className:i.link},"archive"),". We will store you IP address and are allowed to hand it to third-parties if you violate against these terms and conditions."),r.a.createElement(Qe.a,null,"Your image must meet the following terms and conditions:"),r.a.createElement(Qe.a,null,"Only upload images that are relevant and appropriate to the product and that meet intellectual property, privacy, and other applicable laws."),r.a.createElement(Qe.a,null,"You must hold the copyright of the images that you are uploading. Images that are considered to infringe the copyright or trademarks of other individuals, organizations or companies will not be permitted and will be removed. You must acknowledge that you have sufficient written permission (if necessary) of any recognizable locations or people appearing in the image to be able to grant us permission to use it on our website. If you think that your copyright to an image on our website has been infringed, please contact us."),r.a.createElement(Qe.a,null,"You must not upload photographs that contain objectionable content, including but not limited to nudity, violence, and other offensive, illegal or inappropriate images. Also, images cannot contain advertisement or links."),r.a.createElement(Qe.a,null,"By uploading an image to easymeme69.com, you permit us, the unrestricted, perpetual, worldwide, non-transferable, royalty-free right and license to display, exhibit, transmit, reproduce, record, digitize, modify, alter, adapt, create derivative works, exploit and otherwise use and permit others to use in connection with the image uploaded, in all languages and all media, whether now known or hereinafter devised, including without limitation on the Internet, on mobile platforms and/or devices, in printed materials, and in the advertising, publicity and promotion thereof."),r.a.createElement(Qe.a,null,"You should bear in mind that by uploading an image to our website, you agree to indemnify us from any liability resulting from breaches of copyright of the image existing online on our website in digital form."),r.a.createElement(Qe.a,null,"You also understand and agree that nothing in this agreement obligates easymeme69.com to display your images. Images must be relevant and appropriate."),r.a.createElement(Qe.a,null,"easymeme69.com reserves the right in its sole and absolute discretion to alter these terms at any time for any reason without prior notice, or to terminate the image upload service for any reason at any time without prior notice."),r.a.createElement(Qe.a,null,"easymeme69.com also reserves the right to reject and remove any uploaded image from display on its website, for any reason, at any time, without prior notice.")),r.a.createElement(Ze.a,null,r.a.createElement(O.a,{color:"primary",onClick:f,disabled:!m},"decline"),r.a.createElement(O.a,{color:"primary",onClick:n,disabled:!m},"agree")))};var nt=function(e,t){for(var n=e.split(","),a=n[0].match(/:(.*?);/)[1],r=atob(n[1]),o=r.length,c=new Uint8Array(o);o--;)c[o]=r.charCodeAt(o);return new File([c],t,{type:a})},at="caches"in window;function rt(e){return ot.apply(this,arguments)}function ot(){return(ot=Object(g.a)(d.a.mark((function e(t){var n,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(at){e.next=4;break}return e.next=3,fetch(t);case 3:return e.abrupt("return",e.sent);case 4:return e.next=6,caches.open("v1");case 6:return n=e.sent,e.next=9,n.match(t);case 9:if(a=e.sent,navigator.onLine){e.next=12;break}return e.abrupt("return",a);case 12:return e.next=14,fetch(t);case 14:return r=e.sent,n.put(t,r.clone()),e.abrupt("return",r);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ct(e){return it.apply(this,arguments)}function it(){return(it=Object(g.a)(d.a.mark((function e(t){var n,a,r,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(at){e.next=2;break}return e.abrupt("return",t);case 2:return e.next=4,caches.open("v1");case 4:return n=e.sent,e.next=7,n.match(t);case 7:if(a=e.sent){e.next=10;break}return e.abrupt("return",t);case 10:return e.next=12,a.blob();case 12:return r=e.sent,o=URL.createObjectURL(r),e.abrupt("return",o);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lt(e){return st.apply(this,arguments)}function st(){return(st=Object(g.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(at){e.next=2;break}return e.abrupt("return");case 2:if(0!==t.indexOf("blob")){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,caches.open("v1");case 6:return n=e.sent,e.next=9,n.match(t);case 9:if(e.sent){e.next=15;break}return e.next=13,fetch(t);case 13:a=e.sent,n.put(t,a);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ut(e){return"".concat(window.location.protocol,"//").concat(window.location.hostname).concat("","/api").concat(e)}var mt=function(e){return fetch(ut("/templates"),{method:"POST",body:e})},pt=function(e){return fetch(ut("/auth/authorize"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e})}).then((function(e){return e.json()}))},dt=function(e){return fetch(ut("/stickers"),{method:"POST",body:e})},ft=function(e){return fetch(ut("/stickers/register-use"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})})},gt=function(e){return fetch("/upload",{method:"POST",body:e})};function bt(){return(bt=Object(g.a)(d.a.mark((function e(t){var n,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("file",t),e.prev=2,e.next=5,gt(n);case 5:return a=e.sent,e.next=8,a.json();case 8:return r=e.sent,e.abrupt("return","https://"+window.location.host+r.path);case 12:return e.prev=12,e.t0=e.catch(2),console.error(e.t0),e.abrupt("return");case 16:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}var ht=function(e){return bt.apply(this,arguments)},vt=Object(h.a)((function(e){var t={margin:e.spacing(2),marginTop:0};return{spacing:t,title:{textAlign:"center"},innerDialog:{margin:e.spacing(1),width:function(e){return!e.imageData&&"100%"},height:function(e){return!e.imageData&&"50%"},display:function(e){return!e.imageData&&"flex"},justifyContent:function(e){return!e.imageData&&"center"},alignItems:function(e){return!e.imageData&&"center"}},image:{width:"90%",margin:"".concat(e.spacing(2),"px auto")},uploadButtonWrapper:Object(s.a)(Object(s.a)({},t),{},{position:"relative"}),buttonLoader:{position:"absolute",top:"50%",left:"50%",margin:"-12px 0 0 -12px"},linkWrapper:{margin:e.spacing(2),marginTop:0,padding:"0 ".concat(e.spacing(1),"px"),display:"flex",justifyContent:"space-between",alignItems:"center"},link:{overflowX:"overlay",padding:"".concat(e.spacing(1),"px 0")},shareButton:{padding:e.spacing(1)},snackbarClose:{color:e.palette.primary.variant}}}));var Et=W((function(e){var t=e.open,n=e.onClose,o=e.imageData,c=e.elements,i=Object(a.useContext)(_n),l=vt({imageData:o}),s=Object(j.c)(),m=s.register,p=s.getValues,h=Object(a.useRef)(!1),v=Object(a.useRef)(),E=Object(a.useRef)(),w=Object(a.useState)(),x=Object(u.a)(w,2),C=x[0],S=x[1],N=Object(a.useState)(!1),T=Object(u.a)(N,2),L=T[0],R=T[1],z=Object(a.useState)(!1),I=Object(u.a)(z,2),B=I[0],W=I[1],F=Object(a.useState)(!1),A=Object(u.a)(F,2),D=A[0],P=A[1],M=Object(a.useState)(!1),H=Object(u.a)(M,2),V=H[0],_=H[1],U=Object(a.useState)(!1),G=Object(u.a)(U,2),J=G[0],Y=G[1],X=function(e,t){return i.event.dispatchEvent(new CustomEvent(e,{detail:t}))},K=function(){var e=Object(g.a)(d.a.mark((function e(){var t,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.currentTemplate){e.next=4;break}if(h.current){e.next=4;break}return e.next=4,r=i.currentTemplate.id,fetch(ut("/templates/register-use"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r})});case 4:t=Object(f.a)(c),e.prev=5,t.s();case 7:if((n=t.n()).done){e.next=14;break}if("sticker"!==(a=n.value).type||void 0===a.data.id){e.next=12;break}return e.next=12,ft(a.data.id);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),t.e(e.t0);case 19:return e.prev=19,t.f(),e.finish(19);case 22:h.current=!0;case 23:case"end":return e.stop()}var r}),e,null,[[5,16,19,22]])})));return function(){return e.apply(this,arguments)}}(),$=function(){W(!0),X("openShareModal")},Q=function(){var e=Object(g.a)(d.a.mark((function e(){var t,n,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p("label")){e.next=2;break}return e.abrupt("return");case 2:t=p("label"),n=nt(i.image,"image.png"),a={textboxes:window.getTextboxes(),border:window.getBorder()},(r=new FormData).append("password",i.password),r.append("image",n),r.append("label",t),r.append("meta_data",JSON.stringify(a)),mt(r).then((function(e){e.ok&&(Y(!0),_(!0))}));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){t||S(null)}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{open:t,onClose:function(){h.current=!1,Y(!1),n()},PaperProps:{className:l.innerDialog}},o?r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{alt:"",src:o,className:l.image}),r.a.createElement(he.a,{variant:"outlined",className:l.linkWrapper,style:{display:!C&&"none"}},r.a.createElement(ve.a,{variant:"body1",className:l.link},C),r.a.createElement(b.a,{className:l.shareButton,onClick:$},r.a.createElement(ke.a,null))),!C&&r.a.createElement("div",{className:l.uploadButtonWrapper},r.a.createElement(O.a,{startIcon:r.a.createElement(Oe.a,null),color:"primary",variant:"outlined",onClick:function(){P(!0),new Promise((function(e,t){v.current=e,E.current=t})).then(Object(g.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!1),R(!0),t=nt(o,"image.png"),e.next=5,ht(t);case 5:n=e.sent,R(!1),S(n),K(),X("uploadImage",{link:n});case 10:case"end":return e.stop()}}),e)})))).catch((function(){P(!1)}))},disabled:L,style:{width:"100%"}},"Create Link"),L&&r.a.createElement(be.a,{size:24,className:l.buttonLoader})),r.a.createElement(O.a,{startIcon:r.a.createElement(xe.a,null),color:"primary",variant:"outlined",className:l.spacing,onClick:function(){!function(e){var t=document.createElement("a");t.href=e,t.download="download.png",document.body.appendChild(t),t.click(),document.body.removeChild(t)}(o),K(),X("downloadImage")}},"Download"),i.password&&!i.currentTemplate&&!J&&r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{inputRef:m(),name:"label",label:"Label",className:l.spacing,variant:"outlined",defaultValue:i.label}),r.a.createElement(O.a,{startIcon:r.a.createElement(Se.a,null),color:"primary",variant:"outlined",className:l.spacing,onClick:Q},"Publish Template")),r.a.createElement(Ke,{open:B,link:C,onOpen:$,onClose:function(){return W(!1)}})):r.a.createElement(be.a,null)),r.a.createElement(tt,{open:D,onAccept:v.current,onReject:E.current}),r.a.createElement(Ee.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:V,autoHideDuration:3e3,onClose:function(){return _(!1)},message:"Uploaded",action:r.a.createElement(b.a,{onClick:function(){return _(!1)},className:l.snackbarClose},r.a.createElement(q.a,null))}))}),"image"),wt=Object(h.a)((function(e){return{form:{padding:e.spacing(2),paddingTop:0},applyButton:{marginTop:e.spacing(2)},input:{marginTop:e.spacing(1)}}}));var xt=W((function(e){var t=e.onClose,n=e.open,o=e.values,c=Object(j.c)(),i=c.register,l=c.getValues,s=c.handleSubmit,m=c.control,p=c.watch,d=c.reset,f=c.setValue,g=wt(),b=Object(a.useState)(!1),h=Object(u.a)(b,2),v=h[0],E=h[1],w=function(){var e=l();!e.fixedSpacing||e.spacing?(E(!1),e.spacing=parseInt(e.spacing),t(e)):E(!0)};return Object(a.useEffect)((function(){d(o)}),[o,d]),r.a.createElement(y.a,{onClose:w,open:n},r.a.createElement(pe.a,null,"Set Grid"),r.a.createElement(j.b,{control:m,watch:p,register:i,setValue:f},r.a.createElement("form",{onSubmit:s(w),className:g.form},r.a.createElement(de.a,null,r.a.createElement(R,{name:"enabled",label:"Enabled",className:g.input}),r.a.createElement(R,{name:"fixedSpacing",label:"Fixed Spacing",className:g.input}),r.a.createElement(S,{name:"color",label:"Color",options:z.colors,className:g.input,child:function(e){var t=e.label,n=e.value;return r.a.createElement("span",{style:{color:n}},t)}}),r.a.createElement(k.a,{inputRef:i(),className:g.input,fullWidth:!0,type:"number",name:"columns",label:"Columns"}),r.a.createElement(k.a,{inputRef:i(),className:g.input,fullWidth:!0,type:"number",name:"rows",label:"Rows"}),r.a.createElement(k.a,{inputRef:i(),className:g.input,fullWidth:!0,type:"number",name:"spacing",label:"Spacing (px)",error:v}),r.a.createElement(O.a,{fullWidth:!0,className:g.applyButton,type:"submit"},"Apply")))))}),"grid"),yt=function(e){return new Promise((function(t){var n=new FileReader;n.onload=function(){return t(n.result)},n.readAsDataURL(e)}))},Ot=function(e){return new Promise((function(t){var n=document.createElement("input");n.type="file",n.accept=e,document.body.appendChild(n),n.onchange=function(e){var n=e.target.files[0];t(n)},n.click(),n.remove()}))},jt=n(116),kt=n.n(jt);function Ct(e){var t=e.querySelectorAll(".textbox");t.forEach((function(e){var t=Math.min(e.offsetHeight/18,6);e.style.padding="".concat(6-t,"px ").concat(6,"px ").concat(6+t,"px")}));var n=Array.from(e.querySelectorAll(".element"));if(n.length>0){var a=n[0].parentNode;n.map((function(e){return a.removeChild(e)})).reverse().map((function(e){return a.appendChild(e)}))}var r=e.querySelector(".meme-image");r.style.minWidth=r.clientWidth+1+"px",r.style.minHeight=r.clientHeight+1+"px"}function St(){return(St=Object(g.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kt()(t,{useCORS:!0,onclone:Ct});case 2:return n=e.sent,e.abrupt("return",n.toDataURL());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Nt=function(e){return St.apply(this,arguments)};function Tt(e){var t=getComputedStyle(e);return{width:e.clientWidth-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight),height:e.clientHeight-parseFloat(t.paddingTop)-parseFloat(t.paddingBottom)}}function Lt(){return Rt.apply(this,arguments)}function Rt(){return(Rt=Object(g.a)(d.a.mark((function e(){var t,n,a=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.length>0&&void 0!==a[0]?a[0]:1,n=0;case 2:if(!(n<t)){e.next=8;break}return e.next=5,new Promise(requestAnimationFrame);case 5:n++,e.next=2;break;case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var zt={size:0,top:!0,bottom:!0,left:!1,right:!1,color:"white"},It={enabled:!1,fixedSpacing:!1,color:"black",spacing:void 0,columns:16,rows:16},Bt=Object(h.a)((function(e){return{canvasWrapper:{position:"absolute",top:0,bottom:0,left:0,right:0,backgroundColor:e.palette.background.default,padding:e.spacing(1),paddingBottom:e.mixins.toolbar.minHeight+e.spacing(1),display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden"},canvas:{position:"relative",display:"flex"}}}));var Wt=function(){var e=Object(a.useContext)(_n),t=Bt(),n=Object(a.useRef)(0),o=Object(a.useRef)(),c=Object(a.useRef)(),i=Object(a.useRef)(),l=Object(a.useRef)({}),s=Object(a.useState)([]),p=Object(u.a)(s,2),h=p[0],v=p[1],w=Object(a.useState)(zt),y=Object(u.a)(w,2),O=y[0],j=y[1],k=Object(a.useState)(It),C=Object(u.a)(k,2),S=C[0],N=C[1],T=Object(a.useState)(!1),L=Object(u.a)(T,2),R=L[0],z=L[1],I=Object(a.useState)(!1),B=Object(u.a)(I,2),W=B[0],F=B[1],A=Object(a.useState)(!1),D=Object(u.a)(A,2),P=D[0],M=D[1],H=Object(a.useState)(null),V=Object(u.a)(H,2),_=V[0],U=V[1];l.current={};var q,G=Object(f.a)(h);try{for(G.s();!(q=G.n()).done;){var J=q.value;l.current[J.key]={}}}catch(de){G.e(de)}finally{G.f()}var Y=function(){var e=Object(g.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F(!1),e.next=3,Lt(3);case 3:U(null);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(e){var t=h.filter((function(t){return t.key!==e}));v(t),delete l.current[e]},K=function(){v([]),l.current={}},$=function(e,t){return{type:e,data:t,key:n.current++}},Q=function(e){var t=e.template,n=$("textbox",{template:t});return v([].concat(Object(m.a)(h),[n])),n},Z=function(e,t){var n=$("sticker",{src:e,id:t});v([].concat(Object(m.a)(h),[n]))},ee=function(){var e=Object(g.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ot("image/*");case 2:return t=e.sent,e.next=5,yt(t);case 5:n=e.sent,Z(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=Object(g.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object.values(l.current).forEach((function(e){return e.beforeCapturing()})),e.next=3,Lt(3);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var t=Object(g.a)(d.a.mark((function t(){var n,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ot("image/*");case 2:return n=t.sent,t.next=5,yt(n);case 5:a=t.sent,K(),e.set({currentTemplate:null,image:a});case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),re=function(){var e=Object(g.a)(d.a.mark((function e(){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F(!0),e.next=3,Lt(1);case 3:return n=document.querySelector(".".concat(t.canvas)),e.next=6,te(n);case 6:return e.next=8,Nt(n);case 8:a=e.sent,U(a),Object.values(l.current).forEach((function(e){return e.afterCapturing()}));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(){z(!0)},ce=function(){M(!0)},ie=function(){var t=Object(g.a)(d.a.mark((function t(n){var a,r,c,i,l,s,u,m;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.detail.template,e.set({currentTemplate:a,image:a.image_url}),t.next=4,Lt(2);case 4:if(r=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(/\d+%/.test(e[t])){var a=parseFloat(e[t]);e[t]=(n?o.current.clientWidth:o.current.clientHeight)*(a/100)}},K(),h=[],a.meta_data){t.next=9;break}return t.abrupt("return");case 9:if(c=a.meta_data.border,i=a.meta_data.textboxes,"string"===typeof(null===c||void 0===c?void 0:c.size)&&r(c,"size"),j(c||zt),i){l=Object(f.a)(i);try{for(l.s();!(s=l.n()).done;)u=s.value,r(u,"width",!0),r(u,"height"),r(u,"x",!0),r(u,"y"),m=Q({template:u}),h.push(m)}catch(de){l.e(de)}finally{l.f()}}v(h);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),se=function(e){var t=e.detail.sticker;Z(t.image_url,t.id)},ue=function(){return h.filter((function(e){return"textbox"===e.type})).map((function(e){return e.key})).map((function(e){return l.current[e].toObject({image:o.current})}))},pe=function(){return O};return Object(a.useEffect)((function(){return e.event.addEventListener("importImage",ne),e.event.addEventListener("addTextbox",Q),e.event.addEventListener("importSticker",ee),e.event.addEventListener("generateImage",re),e.event.addEventListener("setBorder",oe),e.event.addEventListener("setGrid",ce),e.event.addEventListener("loadTemplate",ie),e.event.addEventListener("loadSticker",se),window.getTextboxes=ue,window.getBorder=pe,function(){e.event.removeEventListener("importImage",ne),e.event.removeEventListener("addTextbox",Q),e.event.removeEventListener("importSticker",ee),e.event.removeEventListener("generateImage",re),e.event.removeEventListener("setBorder",oe),e.event.removeEventListener("setGrid",ce),e.event.removeEventListener("loadTemplate",ie),e.event.removeEventListener("loadSticker",se)}})),Object(a.useEffect)((function(){Object(g.a)(d.a.mark((function e(){var t,n,a,r,l,s,u,m,p,f;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lt(1);case 2:if(o.current&&i.current&&c.current){e.next=4;break}return e.abrupt("return");case 4:t=o.current.naturalWidth,n=o.current.naturalHeight,a=n/t,r=Tt(i.current),l=r.width,s=r.height,l*a>s?(32,p=(O.top||0+O.bottom||0)*O.size,u=(m=s-32-p)*(1/a)):(f=(O.left||0+O.right||0)*O.size,m=(u=l-f)*a),u=Math.floor(u),m=Math.floor(m),o.current.style.width=u+"px",o.current.style.height=m+"px",c.current.style.width=u+"px",c.current.style.height=m+"px";case 15:case"end":return e.stop()}}),e)})))()}),[e.image,o,i,c,O]),r.a.createElement("div",{className:t.canvasWrapper,ref:i},r.a.createElement("div",{className:t.canvas,style:{paddingTop:O.top&&O.size+"px",paddingBottom:O.bottom&&O.size+"px",paddingLeft:O.left&&O.size+"px",paddingRight:O.right&&O.size+"px",backgroundColor:e.image&&O.color,width:!e.image&&"unset"},ref:c},e.image?r.a.createElement("img",{alt:"",src:e.image,className:"meme-image",ref:o,draggable:"false"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{onClick:function(){return e.event.dispatchEvent(new CustomEvent("openTemplatesDialog"))}},r.a.createElement(x.a,{fontSize:"large"})),r.a.createElement(b.a,{onClick:ne},r.a.createElement(E.a,{fontSize:"large"}))),h.map((function(e){var t=e.type,n=e.key,a=e.data;if("textbox"===t)return r.a.createElement(ae,{key:n,id:n,onRemove:X,handle:l.current[n],grid:S,template:a.template,canvas:c.current});if("sticker"===t)return r.a.createElement(le,{key:n,id:n,onRemove:X,handle:l.current[n],grid:S,canvas:c.current,src:a.src});throw new Error("Type "+t+" is not defined")}))),r.a.createElement(me,{config:S,canvas:c.current,border:O}),r.a.createElement(ge,{open:R,onClose:function(e){e&&j(e),z(!1)},values:O}),r.a.createElement(xt,{open:P,onClose:function(e){e&&N(e),M(!1)},values:S}),r.a.createElement(Et,{open:W,onClose:Y,imageData:_,elements:h}))},Ft=n(229),At=n(230),Dt=n(228),Pt=n(125),Mt=n.n(Pt),Ht=n(126),Vt=n.n(Ht),_t=n(128),Ut=n.n(_t),qt=n(124),Gt=n.n(qt),Jt=n(127),Yt=n.n(Jt),Xt=n(130),Kt=n(222),$t=n(223),Qt=n(117),Zt=n.n(Qt),en=n(118),tn=n.n(en),nn=n(119),an=n.n(nn),rn=Object(h.a)((function(e){return{icon:{minWidth:e.spacing(4)}}}));var on=function(e){var t=e.open,n=e.anchorEl,o=e.onClose,c=Object(a.useContext)(_n),i=rn(),l=function(e){return function(){c.event.dispatchEvent(new CustomEvent(e)),o()}};return r.a.createElement(Xt.a,{open:t,anchorEl:n,onClose:o,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},r.a.createElement(C.a,{onClick:l("setBorder")},r.a.createElement(Kt.a,{className:i.icon},r.a.createElement(Zt.a,{fontSize:"small"})),r.a.createElement($t.a,{primary:"Border"})),r.a.createElement(C.a,{onClick:l("setGrid")},r.a.createElement(Kt.a,{className:i.icon},r.a.createElement(tn.a,{fontSize:"small"})),r.a.createElement($t.a,{primary:"Grid"})),r.a.createElement(C.a,{onClick:l("importSticker")},r.a.createElement(Kt.a,{className:i.icon},r.a.createElement(an.a,{fontSize:"small"})),r.a.createElement($t.a,{primary:"Import Sticker"})),r.a.createElement(C.a,{onClick:l("importImage")},r.a.createElement(Kt.a,{className:i.icon},r.a.createElement(E.a,{fontSize:"small"})),r.a.createElement($t.a,{primary:c.image?"Replace Meme":"Import Meme"})))},cn=n(216),ln=n(234),sn=n(231),un=n(120),mn=n.n(un),pn=n(237),dn=n(224),fn=n(225),gn=n(226),bn=n(74),hn=n.n(bn);var vn=function(e){var t=e.onClose,n=e.open,a=e.content;return r.a.createElement(y.a,{disableBackdropClick:!0,disableEscapeKeyDown:!0,open:n},r.a.createElement(pe.a,null,"Confirm"),r.a.createElement($e.a,{dividers:!0},r.a.createElement(ve.a,null,a)),r.a.createElement(Ze.a,null,r.a.createElement(O.a,{onClick:function(){return t(!1)}},"Cancel"),r.a.createElement(O.a,{onClick:function(){return t(!0)}},"Ok")))},En=Object(h.a)((function(e){return{spacer:{height:e.spacing(2)},searchWrapper:{margin:"".concat(e.spacing(2),"px ").concat(e.spacing(1),"px"),marginTop:0,padding:"2px 4px",display:"flex"},search:{marginLeft:e.spacing(1),flex:1},searchClear:{padding:e.spacing(1)},listWrapper:{display:"flex",justifyContent:"center",overflow:"hidden"},list:{maxWidth:400,width:"100%"},tile:{cursor:"pointer"},tilebar:{height:56},deleteButton:{zIndex:10,position:"absolute",top:0,left:0}}}));var wn=function(e){var t=e.onLoad,n=Object(a.useContext)(_n),o=En(),c=Object(a.useRef)({}),i=Object(a.useState)(),l=Object(u.a)(i,2),s=l[0],m=l[1],p=Object(a.useState)(!1),h=Object(u.a)(p,2),v=h[0],E=h[1],w=Object(a.useState)(""),x=Object(u.a)(w,2),y=x[0],O=x[1],j=function(){rt(ut("/templates")).then((function(e){return e.json()})).then(function(){var e=Object(g.a)(d.a.mark((function e(t){var n,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(f.a)(t),e.prev=1,n.s();case 3:if((a=n.n()).done){e.next=11;break}return r=a.value,e.next=7,ct(r.image_url);case 7:r.image_url=e.sent,r.meta_data&&(r.meta_data=JSON.parse(r.meta_data));case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:return e.abrupt("return",t);case 20:case"end":return e.stop()}}),e,null,[[1,13,16,19]])})));return function(t){return e.apply(this,arguments)}}()).then((function(e){return m(e)}))};if(Object(a.useEffect)((function(){j()}),[]),!s)return r.a.createElement(be.a,null);var k=s.filter((function(e){return e.label.toLowerCase().includes(y.toLowerCase())}));return k.sort((function(e,t){return t.amount_uses-e.amount_uses})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:o.spacer}),r.a.createElement(he.a,{variant:"outlined",className:o.searchWrapper},r.a.createElement(pn.a,{value:y,onChange:function(e){O(e.target.value)},placeholder:"Search",className:o.search}),r.a.createElement(b.a,{onClick:function(){return O("")},className:o.searchClear},r.a.createElement(q.a,null))),r.a.createElement("div",{className:o.listWrapper},r.a.createElement(dn.a,{cellHeight:150,className:o.list},k.map((function(e,a){return r.a.createElement(fn.a,{key:a,className:o.tile,onClick:function(n){return function(e,n){"DIV"!==e.target.tagName&&"IMG"!==e.target.tagName||t(n)}(n,e)}},r.a.createElement("img",{src:e.image_url,alt:e.label,loading:"lazy",onLoad:function(){return function(e){lt(e.image_url)}(e)}}),r.a.createElement(gn.a,{title:e.label,subtitle:(i=e.amount_uses,1===i?"1 Meme Created":i+" Memes Created"),className:o.tilebar}),n.password&&r.a.createElement(b.a,{onClick:function(){return function(e){c.current=e,E(!0)}(e)},className:o.deleteButton},r.a.createElement(hn.a,{fontSize:"small"})));var i}))),r.a.createElement(vn,{open:v,onClose:function(e){var t,a;E(!1),e&&(t=n.password,a=c.current.id,fetch(ut("/templates/delete/"+a),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:t})})).then(j)},content:'The template "'.concat(c.current.label,'" will be deleted')})))},xn=n(227),yn=n(121),On=n.n(yn),jn=Object(h.a)((function(e){return{listWrapper:{display:"flex",justifyContent:"center",overflow:"hidden"},list:{maxWidth:400,paddingTop:e.spacing(1),width:"100%"},tile:{cursor:"pointer","& div":{display:"flex",justifyContent:"center",alignItems:"center"}},deleteButton:{zIndex:10,position:"absolute",top:0,left:0},addButton:{position:"fixed",right:e.spacing(2),bottom:e.spacing(2)}}}));function kn(e){var t=e.sticker,n=e.onDelete,o=Object(a.useContext)(_n),c=jn(),i=Object(a.useRef)();return Object(a.useEffect)((function(){i.current&&(i.current.onload=function(){i.current&&(i.current.naturalWidth>=i.current.naturalHeight?i.current.style.width="100%":i.current.naturalHeight>i.current.naturalWidth&&(i.current.style.height="100%"))})}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:t.image_url,alt:"Sticker",loading:"lazy",ref:i,onLoad:function(){lt(t.image_url)}}),o.password&&r.a.createElement(b.a,{onClick:function(){return n(t)},className:c.deleteButton},r.a.createElement(hn.a,{fontSize:"small"})))}var Cn=function(e){var t=e.onLoad,n=e.active,o=Object(a.useContext)(_n),i=jn(),l=Object(a.useRef)({}),s=Object(a.useState)(),m=Object(u.a)(s,2),p=m[0],b=m[1],h=Object(a.useState)(!1),v=Object(u.a)(h,2),E=v[0],w=v[1],x=function(){rt(ut("/stickers")).then((function(e){return e.json()})).then(function(){var e=Object(g.a)(d.a.mark((function e(t){var n,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(f.a)(t),e.prev=1,n.s();case 3:if((a=n.n()).done){e.next=10;break}return r=a.value,e.next=7,ct(r.image_url);case 7:r.image_url=e.sent;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:return e.abrupt("return",t);case 19:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()).then((function(e){return b(e)}))},y=function(e){l.current=e,w(!0)},O=function(){var e=Object(g.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ot("image/*");case 2:return t=e.sent,(n=new FormData).append("image",t),n.append("password",o.password),e.next=8,dt(n);case 8:x();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){x()}),[]),p?(p.sort((function(e,t){return t.amount_uses-e.amount_uses})),r.a.createElement("div",{className:i.listWrapper},r.a.createElement(dn.a,{className:i.list,cols:3},p.map((function(e,n){return r.a.createElement(fn.a,{className:i.tile,onClick:function(n){return function(e,n){"DIV"!==e.target.tagName&&"IMG"!==e.target.tagName||t(n)}(n,e)},key:n},r.a.createElement(kn,{sticker:e,onDelete:y}))}))),r.a.createElement(vn,{open:E,onClose:function(e){var t,n;w(!1),e&&(t=o.password,n=l.current.id,fetch(ut("/stickers/delete/"+n),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:t})})).then(x)},content:"Sticker ".concat(l.current.id," will be deleted")}),o.password&&c.a.createPortal(r.a.createElement(xn.a,{in:n,unmountOnExit:!0},r.a.createElement(Dt.a,{color:"secondary",className:i.addButton,onClick:O},r.a.createElement(On.a,null))),document.getElementById("templates-dialog-inner-container")))):r.a.createElement(be.a,null)},Sn=Object(h.a)((function(e){return{toolbar:{minHeight:46},body:{marginTop:46}}})),Nn=r.a.forwardRef((function(e,t){return r.a.createElement(cn.a,Object.assign({direction:"up",ref:t},e))}));var Tn=W((function(e){var t=e.onClose,n=e.open,o=Object(a.useContext)(_n),c=Sn({width:o.width}),i=Object(a.useState)(0),l=Object(u.a)(i,2),s=l[0],m=l[1],p=function(){t()},d=function(){document.getElementById("templates-dialog-inner-container").scrollTo(0,0)};return r.a.createElement(y.a,{fullScreen:!0,onClose:p,open:n,TransitionComponent:Nn},r.a.createElement(Ft.a,null,r.a.createElement(At.a,{className:c.toolbar},r.a.createElement(b.a,{edge:"start",color:"inherit",onClick:p},r.a.createElement(q.a,{fontSize:"small"})),r.a.createElement(ln.a,{value:s,onChange:function(e,t){m(t),d()}},r.a.createElement(sn.a,{label:"Templates"}),r.a.createElement(sn.a,{label:"Stickers"})))),r.a.createElement(mn.a,{index:s,onChangeIndex:function(e){m(e),d()},axis:"x",id:"templates-dialog-inner-container",disableLazyLoading:!0},r.a.createElement("div",{className:c.body},r.a.createElement(wn,{onLoad:function(e){o.event.dispatchEvent(new CustomEvent("loadTemplate",{detail:{template:e}})),p()},active:0===s})),r.a.createElement("div",{className:c.body},r.a.createElement(Cn,{onLoad:function(e){o.event.dispatchEvent(new CustomEvent("loadSticker",{detail:{sticker:e}})),p()},active:1===s}))))}),"templates"),Ln=n(236),Rn=n(221),zn=n(122),In=Object(h.a)((function(e){return{innerDialog:{background:"none",overflow:"hidden"}}}));function Bn(e){var t=e.data,n=t.selector,a=t.content,o=e.open,c=document.querySelector(n).getBoundingClientRect();return r.a.createElement(Ln.a,{open:o,placement:"top",arrow:!0,title:a},r.a.createElement("div",{style:{position:"absolute",top:c.top+20,left:c.left,width:c.width+"px",height:c.height+"px"}}))}var Wn=W((function(e){var t=e.open,n=e.onClose,a=In();return r.a.createElement(y.a,{open:t,onClose:n,fullScreen:!0,PaperProps:{className:a.innerDialog}},r.a.createElement(Rn.a,{onClickAway:n},r.a.createElement("div",null,zn.map((function(e,n){return r.a.createElement(Bn,{data:e,key:n,open:t})})))))}),"help"),Fn=Object(h.a)((function(e){return{form:{padding:e.spacing(2),paddingTop:0},applyButton:{marginTop:e.spacing(2)},input:{marginTop:e.spacing(1)},snackbarClose:{color:e.palette.primary.variant}}}));var An=W((function(e){var t=e.onClose,n=e.open,o=Object(a.useContext)(_n),c=Object(j.c)(),i=c.register,l=c.getValues,s=c.handleSubmit,m=c.control,p=c.watch,f=c.setValue,h=Fn(),v=Object(a.useState)(!1),E=Object(u.a)(v,2),w=E[0],x=E[1],C=Object(a.useState)(!1),S=Object(u.a)(C,2),N=S[0],T=S[1],L=function(){var e=Object(g.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l("password"),e.next=3,pt(n);case 3:e.sent?(T(!1),x(!0),o.setPassword(n),t()):T(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{onClose:t,open:n},r.a.createElement(pe.a,null,"Login"),r.a.createElement(j.b,{control:m,watch:p,register:i,setValue:f},r.a.createElement("form",{onSubmit:s(L),className:h.form},r.a.createElement(de.a,null,r.a.createElement(k.a,{error:N,inputRef:i(),className:h.input,fullWidth:!0,type:"password",name:"password",label:"Password",helperText:N&&"Wrong Password"}),r.a.createElement(O.a,{fullWidth:!0,className:h.applyButton,type:"submit"},"Login"))))),r.a.createElement(Ee.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:w,autoHideDuration:3e3,onClose:function(){return x(!1)},message:"Logged In",action:r.a.createElement(b.a,{onClick:function(){return x(!1)},className:h.snackbarClose},r.a.createElement(q.a,null))}))}),"auth"),Dn=Object(h.a)((function(e){return{appBar:{position:"absolute",top:"unset",bottom:0,left:0,right:"unset",backgroundColor:e.palette.background.paper},fabButton:{position:"absolute",top:-30,left:0,right:0,margin:"0 auto"},spacer:{flexGrow:1}}}));var Pn=function(){var e=Object(a.useContext)(_n),t=Dn(),n=Object(a.useRef)(),o=Object(a.useRef)(),c=Object(a.useState)(!1),i=Object(u.a)(c,2),l=i[0],s=i[1],m=Object(a.useState)(!1),p=Object(u.a)(m,2),d=p[0],f=p[1],g=Object(a.useState)(!1),h=Object(u.a)(g,2),v=h[0],E=h[1],w=Object(a.useState)(!1),y=Object(u.a)(w,2),O=y[0],j=y[1],k=function(){f(!0)},C=function(){e.password||(o.current=setTimeout((function(){j(!0)}),1e3))},S=function(){clearTimeout(o.current)},N=function(t){return function(){e.event.dispatchEvent(new CustomEvent(t))}};return Object(a.useEffect)((function(){return e.event.addEventListener("openTemplatesDialog",k),function(){e.event.removeEventListener("openTemplatesDialog",k)}})),r.a.createElement(Ft.a,{position:"fixed",className:t.appBar},r.a.createElement(At.a,null,r.a.createElement(b.a,{onClick:function(){E(!0)},onTouchStart:C,onTouchEnd:S,onMouseDown:C,onMouseUp:S},r.a.createElement(Gt.a,null)),r.a.createElement(b.a,{onClick:k,id:"templates-button"},r.a.createElement(x.a,null)),r.a.createElement("div",{className:t.spacer}),r.a.createElement(Dt.a,{color:"primary",className:t.fabButton,onClick:N("generateImage"),disabled:!e.image},r.a.createElement(Mt.a,null)),r.a.createElement(b.a,{onClick:N("addTextbox"),id:"textbox-button"},r.a.createElement(Vt.a,null)),r.a.createElement(b.a,{onClick:N("undo"),id:"undo-button"},r.a.createElement(Yt.a,null)),r.a.createElement(b.a,{onClick:function(){s(!l)},ref:n},r.a.createElement(Ut.a,null)),r.a.createElement(on,{open:l,anchorEl:n.current,onClose:function(){s(!1)}}),r.a.createElement(Tn,{open:d,onClose:function(){return f(!1)}}),r.a.createElement(Wn,{open:v,onClose:function(){return E(!1)}}),r.a.createElement(An,{open:O,onClose:function(){return j(!1)}})))};var Mn=function(){var e=Object(a.useContext)(_n),t=Object(a.useState)(!1),n=Object(u.a)(t,2),r=n[0],o=n[1];return Object(a.useEffect)((function(){e.password||(B.a.initialize("UA-162994094-2"),B.a.pageview(window.location.pathname),o(!0))}),[]),Object(a.useEffect)((function(){if(r){var t=B.a.event.bind(null,Object(s.a)({category:"Editor",action:"Generate Image"},e.currentTemplate?{label:e.currentTemplate.label,value:e.currentTemplate.id}:{})),n=function(e){var t=e.detail.template;return B.a.event({category:"Editor",action:"Load Template",label:t.label,value:t.id})},a=function(){return B.a.modalview("share")},o=function(e){var t=e.detail.link;return B.a.event({category:"Editor",action:"Upload Image",label:t})},c=function(){return B.a.event({category:"Editor",action:"Download Image"})},i=function(e){var t=e.detail.label;return B.a.event({category:"Editor",action:"Share",label:t})};return e.event.addEventListener("generateImage",t),e.event.addEventListener("loadTemplate",n),e.event.addEventListener("openShareModal",a),e.event.addEventListener("uploadImage",o),e.event.addEventListener("downloadImage",c),e.event.addEventListener("share",i),function(){e.event.removeEventListener("generateImage",t),e.event.removeEventListener("loadTemplate",n),e.event.removeEventListener("openShareModal",a),e.event.removeEventListener("uploadImage",o),e.event.removeEventListener("downloadImage",c),e.event.removeEventListener("share",i)}}}),[e,r]),null},Hn=Object(h.a)((function(e){return{snackbarClose:{color:e.palette.primary.variant}}}));var Vn=function(){var e=Hn(),t=Object(a.useState)(!1),n=Object(u.a)(t,2),o=n[0],c=n[1],i=Object(a.useState)(""),l=Object(u.a)(i,2),s=l[0],m=l[1];return Object(a.useEffect)((function(){var e=new BroadcastChannel("sw-0");return e.addEventListener("message",(function(e){var t=e.data;"content-cached"===t?(c(!0),m("The app is cached for offline use")):"content-available"===t&&(c(!0),m("A new version is available. Restart the app to see it"))})),function(){return e.close()}}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Ee.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:o,autoHideDuration:6e3,message:s,onClose:function(){return c(!1)},action:r.a.createElement(b.a,{onClick:function(){return c(!1)},className:e.snackbarClose},r.a.createElement(q.a,null))}))},_n=r.a.createContext();var Un=function(){var e=Object(a.useState)({event:new EventTarget,image:null,label:null,currentTemplate:null,password:localStorage.getItem("password")}),t=Object(u.a)(e,2),n=t[0],o=t[1],c={set:function(e){return o(Object(s.a)(Object(s.a)({},n),e))},setPassword:function(e){localStorage.setItem("password",e),o(Object(s.a)(Object(s.a)({},n),{},{password:e}))}};return Object(a.useEffect)((function(){var e=function(e){e.data.image&&o(Object(s.a)(Object(s.a)({},n),{},{image:e.data.image,label:e.data.label}))},t=function(e){e.ctrlKey&&90===e.keyCode&&n.event.dispatchEvent(new CustomEvent("undo"))};return window.addEventListener("message",e),window.addEventListener("keydown",t),function(){window.removeEventListener("message",e),window.removeEventListener("keydown",t)}})),r.a.createElement(_n.Provider,{value:Object(s.a)(Object(s.a)({},n),c)},r.a.createElement(Mn,null),r.a.createElement(Vn,null),r.a.createElement(Wt,null),r.a.createElement(Pn,null))},qn=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)),Gn=new BroadcastChannel("sw-0");function Jn(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(Gn.postMessage("content-available"),console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(Gn.postMessage("content-cached"),console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}n(171);var Yn=Object(i.a)({palette:{type:"dark",primary:{main:"#BB86FC",variant:"#3700B3"}}});c.a.render(r.a.createElement(l.a,{theme:Yn},r.a.createElement(Un,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/editor",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/editor","/service-worker.js");qn?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Jn(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Jn(t,e)}))}}()},39:function(e){e.exports=JSON.parse('{"colors":{"White":"white","Black":"black","Green":"#2ecc71","Red":"#e74c3c","Blue":"#3498db","Yellow":"#f1c40f","Purple":"#9b59b6"},"textAlign":{"Left":"left","Right":"right","Center":"center"},"verticalTextAlign":{"Top":"top","Bottom":"bottom","Center":"center"},"fontFamilies":{"Impact":"\'Impact\', fantasy","Arial":"Arial","Comic Sans":"\'Comic Sans\', cursive","Courier":"\'Courier\', monospace","Times New Roman":"\'Times New Roman\', \'Times\', serif"}}')}},[[140,1,2]]]);
//# sourceMappingURL=main.9e266727.chunk.js.map