(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{106:function(e,t,n){e.exports=n.p+"static/media/WhatsApp.0e878a0f.svg"},107:function(e,t,n){e.exports=n.p+"static/media/Twitter.1f5a8ef5.png"},108:function(e,t,n){e.exports=n.p+"static/media/Facebook.9ee5d43c.png"},109:function(e,t,n){e.exports=n.p+"static/media/Gmail.598d07e7.png"},110:function(e,t,n){e.exports=n.p+"static/media/Telegram.b4b9d64f.png"},111:function(e,t,n){e.exports=n.p+"static/media/Pinterest.717253e4.png"},112:function(e,t,n){e.exports=n.p+"static/media/Reddit.3826daa7.png"},113:function(e,t,n){e.exports=n.p+"static/media/Tumblr.93e9138a.png"},114:function(e,t,n){e.exports=n.p+"static/media/Skype.5a725d78.png"},115:function(e,t,n){e.exports=n.p+"static/media/FBMessenger.f8b3ffc7.png"},126:function(e){e.exports=JSON.parse('[{"selector":"#templates-button","content":"Templates & Stickers"},{"selector":"#textbox-button","content":"Textbox"},{"selector":"#undo-button","content":"Undo"}]')},145:function(e,t,n){e.exports=n(194)},193:function(e,t,n){},194:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"setPasswordHeader",(function(){return yt})),n.d(a,"authorize",(function(){return Ct})),n.d(a,"getTemplates",(function(){return St})),n.d(a,"uploadTemplate",(function(){return Nt})),n.d(a,"editTemplate",(function(){return Tt})),n.d(a,"deleteTemplate",(function(){return Lt})),n.d(a,"registerTemplateUse",(function(){return Rt})),n.d(a,"getStickers",(function(){return zt})),n.d(a,"uploadSticker",(function(){return It})),n.d(a,"deleteSticker",(function(){return Wt})),n.d(a,"registerStickerUse",(function(){return Bt})),n.d(a,"uploadFile",(function(){return At}));var r=n(0),o=n.n(r),c=n(14),i=n.n(c),l=n(133),s=n(254),u=n(12),m=n(5),p=n(15),d=n(7),f=n.n(d),g=n(38),b=n(10),h=n(233),v=n(231),E=n(70),w=n.n(E),x=n(69),O=n.n(x),j=n(234),y=n(255),k=n(235),C=n(21),S=n(260);var N=function(e){var t=e.name,n=e.label,a=e.options,r=e.child,c=e.className,i=Object(C.d)(),l=i.control,s=i.watch;return o.a.createElement(C.a,{as:function(e){return o.a.createElement(y.a,Object.assign({select:!0,label:n,fullWidth:!0,className:c,value:s(t)},e),Object.entries(a).map((function(e){var t=Object(m.a)(e,2),n=t[0],a=t[1];return o.a.createElement(S.a,{key:a,value:a},o.a.createElement(r,{label:n,value:a}))})))},control:l,name:t})},T=n(232),L=n(261),R=Object(v.a)((function(e){return{switch:{width:"100%"}}}));var z=function(e){var t=e.name,n=e.label,a=e.className,r=Object(C.d)(),c=r.register,i=r.watch,l=r.setValue,s=R();return o.a.createElement(T.a,{control:o.a.createElement(L.a,{name:t,inputRef:c(),onChange:function(e,n){return l(t,n)},checked:i(t)}),label:n,className:"".concat(s.switch," ").concat(a)})},I=n(35),W=n(2),B=n(36);var A=function(e,t){return function(n){var a=n.open,c=n.onClose,i=Object(W.a)(n,["open","onClose"]),l=function e(t){var n=t.values;window.removeEventListener("popstate",e),window.location.hash="",c(n)};return Object(r.useEffect)((function(){a&&(window.location.hash="#"+t,window.addEventListener("popstate",l),B.a.modalview(t))}),[a]),o.a.createElement(e,Object(u.a)(Object(u.a)({},i),{},{open:a,onClose:function(e){return l({values:e})}}))}},F=window.location.origin+"/api";new URLSearchParams(window.location.search).get("isAndroidApp");function D(e,t){for(var n=e.split(","),a=n[0].match(/:(.*?);/)[1],r=atob(n[1]),o=r.length,c=new Uint8Array(o);o--;)c[o]=r.charCodeAt(o);return new File([c],t,{type:a})}function M(e){return new Promise((function(t){var n=document.createElement("input");n.type="file",n.accept=e,document.body.appendChild(n),n.onchange=function(e){var n=e.target.files[0];t(n)},n.click(),n.remove()}))}function P(e){return new Promise((function(t){var n=new FileReader;n.onload=function(){return t(n.result)},n.readAsDataURL(e)}))}function H(e,t){if(0===e)return"";for(var n=[],a=-e;a<=e;a++)for(var r=-e;r<=e;r++)n.push("".concat(a,"px ").concat(r,"px 0 ").concat(t));return n.join(",")}var V=function(e){e.theme;var t=e.props;return{border:"none",fontSize:24,resize:"none",whiteSpace:"pre-wrap",zIndex:10,padding:6,display:"flex",flexDirection:"column",outline:!t.capture&&t.isFocused?"1px dashed gray":"none",userSelect:!t.isEditing&&"none",cursor:!t.isEditing&&"move",backgroundColor:t.settings.backgroundColor,color:t.settings.color,fontFamily:t.settings.fontFamily,textTransform:t.settings.caps&&"uppercase",fontWeight:t.settings.bold&&"bold",textShadow:H(parseInt(t.settings.textOutlineWidth),t.settings.textOutlineColor),textAlign:t.settings.textAlign,justifyContent:"top"===t.settings.verticalTextAlign?"flex-start":"bottom"===t.settings.verticalTextAlign?"flex-end":"center"===t.settings.verticalTextAlign?"center":null}},_=Object(v.a)((function(e){return{form:{padding:e.spacing(2),paddingTop:0},text:function(t){return Object(u.a)(Object(u.a)({},V({theme:e,props:t})),{},{padding:e.spacing(2),minHeight:40})},applyButton:{marginTop:e.spacing(2)},input:{marginTop:e.spacing(1)}}}));var U=A((function(e){var t=e.onClose,n=e.open,a=e.values,c=e.text,i=Object(C.c)(),l=i.getValues,s=i.handleSubmit,m=i.control,p=i.watch,d=i.reset,f=i.register,g=i.setValue,b=_({settings:p()}),h=function(){t(l())};return Object(r.useEffect)((function(){d(a)}),[a,d]),o.a.createElement(j.a,{onClose:h,open:n},o.a.createElement("div",{className:b.text},c),o.a.createElement(C.b,{control:m,watch:p,register:f,setValue:g},o.a.createElement("form",{onSubmit:s(h),className:b.form},o.a.createElement(N,{name:"color",label:"Color",options:I.colors,className:b.input,child:function(e){var t=e.label,n=e.value;return o.a.createElement("span",{style:{color:n}},t)}}),o.a.createElement(N,{name:"backgroundColor",label:"Background Color",options:Object(u.a)({None:"transparent"},I.colors),className:b.input,child:function(e){var t=e.label,n=e.value;return o.a.createElement("span",{style:{color:"transparent"!==n&&n}},t)}}),o.a.createElement(y.a,{inputRef:f(),name:"textOutlineWidth",label:"Outline Width",className:b.input,type:"number",fullWidth:!0}),o.a.createElement(N,{name:"textOutlineColor",label:"Outline Color",options:I.colors,className:b.input,child:function(e){var t=e.label,n=e.value;return o.a.createElement("span",{style:{color:n}},t)}}),o.a.createElement(N,{name:"textAlign",label:"Horizontal Align",options:I.textAlign,className:b.input,child:function(e){return e.label}}),o.a.createElement(N,{name:"verticalTextAlign",label:"Vertical Align",options:I.verticalTextAlign,className:b.input,child:function(e){return e.label}}),o.a.createElement(N,{name:"fontFamily",label:"Font Family",options:I.fontFamilies,className:b.input,child:function(e){var t=e.label,n=e.value;return o.a.createElement("span",{style:{fontFamily:n}},t)}}),o.a.createElement(z,{name:"bold",label:"Bold",className:b.input}),o.a.createElement(z,{name:"caps",label:"Caps",className:b.input}),o.a.createElement(k.a,{fullWidth:!0,className:b.applyButton,type:"submit"},"Apply"))))}),"settings");var q=function(e){var t=e.createSnapshot,n=e.applySnapshot,a=e.onSnapshotsEmpty,o=Object(r.useContext)(ua),c=Object(r.useRef)([]),i=function(){var e=t();c.current.push(e),c.current.length>50&&c.current.shift()},l=function(){if(0!==c.current.length){var e=c.current.pop();n(e)}else a()};return Object(r.useEffect)((function(){return o.event.addEventListener("undo",l),o.event.addEventListener("addSnapshot",i),function(){o.event.removeEventListener("undo",l),o.event.removeEventListener("addSnapshot",i)}})),function(){o.event.dispatchEvent(new CustomEvent("addSnapshot"))}},G=n(55),Y=n(102),X=n.n(Y),J=n(104),K=n.n(J),$=n(32),Q=n.n($),Z=n(72),ee=n.n(Z),te=n(103),ne=n.n(te),ae=Object(v.a)((function(e){var t={backgroundColor:"rgba(255, 255, 255, .5)",border:"1px solid black",borderRadius:e.shape.borderRadius,display:function(e){return e.capture&&"none"}},n=Object(u.a)(Object(u.a)({},t),{},{zIndex:20,height:24,position:"absolute",cursor:"pointer"});return{container:{position:"absolute",top:0,display:"flex",flexDirection:"column",alignItems:"center",zIndex:10},rotationHandle:Object(u.a)(Object(u.a)({},t),{},{cursor:"pointer"}),button:Object(u.a)(Object(u.a)({},t),{},{padding:0,marginLeft:e.spacing(1),color:"black"}),action:{position:"absolute",transform:"translateY(-100%)",width:"100%",display:"flex",justifyContent:"center",height:24},resizeHandles:{position:"absolute",height:"100%",width:"100%"},vertical:Object(u.a)(Object(u.a)({},n),{},{top:"100%",left:"50%",transform:"translate(-50%, -50%)",cursor:"ns-resize"}),horizontal:Object(u.a)(Object(u.a)({},n),{},{top:"50%",left:"100%",transform:"translate(-50%, -50%) rotate(-90deg)",cursor:"ew-resize"}),diagonal:Object(u.a)(Object(u.a)({},n),{},{top:"100%",left:"100%",transform:"translate(-50%, -50%) rotate(-45deg)",cursor:"nwse-resize"})}}));var re=function(e){var t=e.controls,n=e.defaultValues,a=e.Child;return function(e){var c=e.onRemove,i=e.handle,l=e.grid,s=e.canvas,p=e.template,d=e.id,g=Object(W.a)(e,["onRemove","handle","grid","canvas","template","id"]),v=Object(r.useRef)((null===p||void 0===p?void 0:p.rotation)||0),E=Object(r.useRef)(),w=Object(r.useRef)(),x=Object(r.useRef)(!1),O=Object(r.useState)({x:(null===p||void 0===p?void 0:p.x)||0,y:(null===p||void 0===p?void 0:p.y)||0}),j=Object(m.a)(O,2),y=j[0],k=j[1],C=Object(r.useState)((null===p||void 0===p?void 0:p.rotation)||0),S=Object(m.a)(C,2),N=S[0],T=S[1],L=Object(r.useState)((null===p||void 0===p?void 0:p.height)&&p.height-12||n.height),R=Object(m.a)(L,2),z=R[0],I=R[1],B=Object(r.useState)((null===p||void 0===p?void 0:p.width)&&p.width-12||n.width),A=Object(m.a)(B,2),F=A[0],D=A[1],M=Object(r.useState)(!1),P=Object(m.a)(M,2),H=P[0],V=P[1],_=Object(r.useState)(!1),U=Object(m.a)(_,2),Y=U[0],J=U[1],$=Object(r.useState)(!0),Z=Object(m.a)($,2),te=Z[0],re=Z[1],oe=ae({capture:H}),ce=Object(r.useMemo)((function(){if(l.enabled)return l.fixedSize?[l.spacing,l.spacing]:[s.clientWidth/l.columns,s.clientHeight/l.rows]}),[l,s.clientWidth,s.clientHeight]),ie=q({createSnapshot:function(){return{width:F,height:z,position:y,rotation:N}},applySnapshot:function(e){D(e.width),I(e.height),k(e.position),T(e.rotation)},onSnapshotsEmpty:function(){p||c(d)}}),le=function(e,t){var n=w.current.getBoundingClientRect(),a=n.x+n.width/2,r=n.y+n.height/2,o=Math.atan2(r-t.y,a-t.x)-v.current;return l.enabled&&(o-=o%(Math.PI/4)),o},se=function(e,t){v.current=le(0,t)},ue=function(){i.onResize&&i.onResize()},me=function(e){var t=-N,n=e.deltaX*Math.sin(t)+e.deltaY*Math.cos(t),a=z+n;if(I(a),i.aspectRatio){var r=a*(1/i.aspectRatio);D(r)}},pe=function(e){var t=-N,n=e.deltaX*Math.cos(t)-e.deltaY*Math.sin(t),a=F+n;if(D(F+n),i.aspectRatio){var r=a*i.aspectRatio;I(r)}};return i&&(i.beforeCapturing=function(){V(!0)},i.afterCapturing=function(){V(!1)}),Object(r.useEffect)((function(){if(l.enabled){k({x:y.x-y.x%ce[0],y:y.y-y.y%ce[1]});var e=F-(F+12)%ce[0];D(e);var t=z-(z+12)%ce[1];I(t)}}),[l]),Object(r.useEffect)((function(){var e=function(e){Y&&!E.current.contains(e.target)&&J(!1)};return window.addEventListener("click",e),window.addEventListener("touchstart",e),function(){window.removeEventListener("click",e),window.removeEventListener("touchstart",e)}})),Object(r.useEffect)((function(){Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(requestAnimationFrame);case 2:i.aspectRatio&&(F?I(F*i.aspectRatio):z&&D(z*(1/i.aspectRatio)));case 3:case"end":return e.stop()}}),e)})))()}),[]),o.a.createElement(G.DraggableCore,{onDrag:function(e,t){Y&&(x.current||(ie(),x.current=!0),k({x:y.x+t.deltaX,y:y.y+t.deltaY}))},onStop:function(){x.current=!1},grid:ce,handle:"#element-".concat(d),disabled:!te},o.a.createElement("div",{className:"".concat(oe.container," element"),style:{transform:"translate(".concat(y.x,"px, ").concat(y.y,"px) rotate(").concat(N,"rad)"),transformOrigin:"center center",zIndex:n.zIndex||0},ref:E,"data-id":d},o.a.createElement(a,Object.assign({id:d,handle:i,template:p,onFocus:function(){J(!0)},isFocused:Y,toggleMovement:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];re(e)},dimensions:Object(u.a)(Object(u.a)({width:F,height:z},y),{},{rotation:N}),ref:w,capture:H},g)),Y&&o.a.createElement(o.a.Fragment,null,t.includes("resize")&&o.a.createElement("div",{className:oe.resizeHandles},o.a.createElement(G.DraggableCore,{onDrag:function(e,t){me(t),ue()},onStart:ie,grid:ce},o.a.createElement("div",{className:oe.vertical},o.a.createElement(ee.a,null))),o.a.createElement(G.DraggableCore,{onDrag:function(e,t){pe(t),ue()},onStart:ie,grid:ce},o.a.createElement("div",{className:oe.horizontal},o.a.createElement(ee.a,null))),o.a.createElement(G.DraggableCore,{onDrag:function(e,t){pe(t),me(t),ue()},onStart:ie,grid:ce},o.a.createElement("div",{className:oe.diagonal},o.a.createElement(ee.a,null)))),o.a.createElement("div",{className:oe.action},t.includes("rotate")&&o.a.createElement(G.DraggableCore,{onStart:function(){se.apply(void 0,arguments),ie()},onStop:function(e,t){v.current=le(0,t)},onDrag:function(e,t){T(le(0,t))}},o.a.createElement(X.a,{className:oe.rotationHandle})),t.includes("edit")&&o.a.createElement(h.a,{className:oe.button,onClick:i.onEditClicked},o.a.createElement(ne.a,null)),t.includes("settings")&&o.a.createElement(h.a,{className:oe.button,onClick:i.onSettingsClicked},o.a.createElement(K.a,null)),t.includes("remove")&&o.a.createElement(h.a,{className:oe.button,onClick:function(){c(d)}},o.a.createElement(Q.a,null))))))}},oe=n(105),ce=n.n(oe);var ie=function(e){var t=e.width,n=e.height,a=e.text,r=e.styles;if(t=Math.floor(t),n=Math.floor(n),t<=0||n<=0)return 0;var o=document.createElement("div");o.style.position="absolute",o.style.width=t+"px",o.style.height=n+"px",o.style.whiteSpace="pre-wrap",o.style.fontWeight=r.bold?"bold":null,o.style.textTransform=r.caps?"uppercase":null,Object.assign(o.style,r),o.textContent=a,document.body.appendChild(o);var c=function(e){ce()(e,{multiLine:!0,minFontSize:1,maxFontSize:window.innerHeight});var t=e.querySelector("span"),n=getComputedStyle(t).fontSize;return parseInt(n)}(o);return document.body.removeChild(o),c},le={color:"white",textOutlineWidth:2,textOutlineColor:"black",textAlign:"center",fontFamily:"'Impact', fantasy",backgroundColor:"transparent",verticalTextAlign:"center",bold:!1,caps:!0},se=Object(v.a)((function(e){return{input:function(t){return V({theme:e,props:t})}}}));var ue=re({controls:["resize","rotate","edit","settings","remove"],defaultValues:{width:160,height:24,zIndex:2},Child:o.a.forwardRef((function(e,t){var n=e.id,a=e.handle,c=e.template,i=e.onFocus,l=e.isFocused,s=e.toggleMovement,p=e.dimensions,d=Object(u.a)({},le);if(null===c||void 0===c?void 0:c.settings)for(var g in d)c.settings[g]&&(d[g]=c.settings[g]);var h=Object(r.useRef)(),v=Object(r.useRef)(!1),E=Object(r.useState)("Enter Text..."),w=Object(m.a)(E,2),x=w[0],O=w[1],j=Object(r.useState)(!1),y=Object(m.a)(j,2),k=y[0],C=y[1],S=Object(r.useState)(d),N=Object(m.a)(S,2),T=N[0],L=N[1],R=Object(r.useState)(!1),z=Object(m.a)(R,2),I=z[0],W=z[1],B=se({settings:T,isFocused:l,isEditing:I}),A=q({createSnapshot:function(){return{value:x,settings:T}},applySnapshot:function(e){O(e.value),h.current.textContent=e.value,L(e.settings)},onSnapshotsEmpty:function(){O("Enter Text..."),L(d)}}),F=function(){var e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function e(){s(!0),W(!1),h.current.removeEventListener("focusout",e)},v.current=!0,s(!1),W(!0),h.current.addEventListener("focusout",t),e.next=7,new Promise(requestAnimationFrame);case 7:h.current.focus(),x.toLowerCase()==="Enter Text...".toLowerCase()&&(h.current.textContent="");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();a&&(a.toObject=function(e){var t=e.image,n=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e/(n?t.clientWidth:t.clientHeight)*100+"%"},a=(null===c||void 0===c?void 0:c.settings)||{};for(var r in T)T[r]!==d[r]&&(a[r]=T[r]);return{value:x,width:n(p.width+12,!0),height:n(p.height+12),x:n(p.x,!0),y:n(p.y),rotation:p.rotation,settings:a}},a.onEditClicked=F,a.onSettingsClicked=function(){C(!0)});var D=Object(r.useMemo)((function(){return{width:p.width+"px",height:p.height+"px",fontSize:ie(Object(u.a)({styles:T,text:x},p))}}),[x,T,p]);return Object(r.useEffect)((function(){h.current.textContent=x}),[]),Object(r.useEffect)((function(){I||x||(O("Enter Text..."),h.current.textContent="Enter Text...")}),[I]),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{contentEditable:I,id:"element-".concat(n),className:"textbox ".concat(B.input),style:D,ref:function(e){h.current=e,t.current=e},onMouseDown:i,onTouchStart:i,onInput:function(e){v.current&&(v.current=!1,A());var t=e.target.textContent;O(t)}}),o.a.createElement(U,{open:k,onClose:function(e){e&&(A(),L(e)),C(!1)},values:T,text:x}))}))}),me=Object(v.a)((function(e){return{form:{padding:e.spacing(2),paddingTop:0},applyButton:{marginTop:e.spacing(2)},input:{marginTop:e.spacing(1)},image:{width:100},imageWrapper:{width:"100%",textAlign:"center",padding:e.spacing(1),boxSizing:"border-box"}}}));var pe=A((function(e){var t=e.onClose,n=e.open,a=e.values,c=e.src,i=Object(C.c)(),l=i.getValues,s=i.handleSubmit,u=i.control,m=i.watch,p=i.reset,d=i.register,f=i.setValue,g=me(),b=function(){t(l())};return Object(r.useEffect)((function(){p(a)}),[a,p]),o.a.createElement(j.a,{onClose:b,open:n},o.a.createElement("div",{className:g.imageWrapper},o.a.createElement("img",{src:c,alt:"",className:g.image,style:{transform:"scaleX(".concat(m("flip")?"-1":"1",")")}})),o.a.createElement(C.b,{control:u,watch:m,register:d,setValue:f},o.a.createElement("form",{onSubmit:s(b),className:g.form},o.a.createElement(z,{name:"keepAspectRatio",label:"Keep Aspect Ratio",className:g.input}),o.a.createElement(z,{name:"flip",label:"Flip",className:g.input}),o.a.createElement(k.a,{fullWidth:!0,className:g.applyButton,type:"submit"},"Apply"))))}),"settings"),de={keepAspectRatio:!0,flip:!1},fe=Object(v.a)((function(e){return{image:{zIndex:1,cursor:"move"}}}));var ge=re({controls:["resize","rotate","remove","settings"],defaultValues:{width:100,zIndex:1},Child:o.a.forwardRef((function(e,t){var n=e.src,a=e.id,c=e.onFocus,i=e.dimensions,l=e.handle,s=fe(),u=Object(r.useRef)(),p=Object(r.useState)(de),d=Object(m.a)(p,2),f=d[0],g=d[1],b=Object(r.useState)(!1),h=Object(m.a)(b,2),v=h[0],E=h[1],w={width:i.width+"px",height:i.height+"px",transform:"scaleX(".concat(f.flip?"-1":"1",")")};return l&&(l.onSettingsClicked=function(){return E(!0)},f.keepAspectRatio?Object.defineProperty(l,"aspectRatio",{get:function(){var e,t;return(null===(e=u.current)||void 0===e?void 0:e.naturalHeight)/(null===(t=u.current)||void 0===t?void 0:t.naturalWidth)},configurable:!0}):delete l.aspectRatio),o.a.createElement(o.a.Fragment,null,o.a.createElement("img",{src:n,alt:"",id:"element-".concat(a),ref:function(e){t.current=e,u.current=e},onMouseDown:c,onTouchStart:c,style:w,className:s.image,draggable:"false"}),o.a.createElement(pe,{open:v,onClose:function(e){e&&g(e),E(!1)},values:f,src:n}))}))});function be(e,t,n,a,r){e.beginPath(),e.moveTo(t,n),e.lineTo(a,r),e.stroke()}var he=Object(v.a)((function(e){return{canvas:{position:"absolute",pointerEvents:"none",touchAction:"none"}}}));var ve=function(e){var t,n=e.config,a=e.canvas,c=e.border,i=he(),l=Object(r.useContext)(ua),s=Object(r.useRef)(),u=function(){var e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(requestAnimationFrame);case 2:t=a.getBoundingClientRect(),s.current.width=t.width,s.current.height=t.height;case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(e,n){for(var a=0;a<s.current.width;a+=e)be(t,a,0,a,s.current.height);for(var r=0;r<s.current.height;r+=n)be(t,0,r,s.current.width,r)},p=function(){(t=s.current.getContext("2d")).strokeStyle=n.color,n.fixedSpacing?n.spacing&&m(n.spacing,n.spacing):function(){if(n.columns&&n.rows&&a){var e=a.clientWidth/n.columns,t=a.clientHeight/n.rows;m(e,t)}}()};return Object(r.useEffect)((function(){a&&u().then(p)}),[a,n,l.image,c]),o.a.createElement("canvas",{ref:s,style:{display:!n.enabled&&"none"},className:i.canvas})},Ee=n(236),we=n(237),xe=Object(v.a)((function(e){return{form:{padding:e.spacing(2),paddingTop:0},applyButton:{marginTop:e.spacing(2)},input:{marginTop:e.spacing(1)}}}));var Oe=A((function(e){var t=e.onClose,n=e.open,a=e.values,c=Object(C.c)(),i=c.register,l=c.getValues,s=c.handleSubmit,u=c.control,m=c.watch,p=c.reset,d=c.setValue,f=xe(),g=function(){var e=l();t(e)};return Object(r.useEffect)((function(){p(a)}),[a,p]),o.a.createElement(j.a,{onClose:g,open:n},o.a.createElement(Ee.a,null,"Set Border"),o.a.createElement(C.b,{control:u,watch:m,register:i,setValue:d},o.a.createElement("form",{onSubmit:s(g),className:f.form},o.a.createElement(we.a,null,o.a.createElement(y.a,{inputRef:i(),className:f.input,fullWidth:!0,type:"number",name:"size",label:"Size (px)"}),o.a.createElement(N,{name:"color",label:"Color",options:I.colors,className:f.input,child:function(e){var t=e.label,n=e.value;return o.a.createElement("span",{style:{color:n}},t)}}),o.a.createElement(z,{name:"top",label:"Top",className:f.input}),o.a.createElement(z,{name:"bottom",label:"Bottom",className:f.input}),o.a.createElement(z,{name:"left",label:"Left",className:f.input}),o.a.createElement(z,{name:"right",label:"Right",className:f.input}),o.a.createElement(k.a,{fullWidth:!0,className:f.applyButton,type:"submit"},"Apply")))))}),"border"),je=n(242),ye=n(137),ke=n(45),Ce=n(262),Se=n(118),Ne=n.n(Se),Te=n(117),Le=n.n(Te),Re=n(116),ze=n.n(Re),Ie=n(119),We=n.n(Ie),Be=n(257),Ae=n(106),Fe=n.n(Ae),De=n(107),Me=n.n(De),Pe=n(108),He=n.n(Pe),Ve=n(109),_e=n.n(Ve),Ue=n(110),qe=n.n(Ue),Ge=n(111),Ye=n.n(Ge),Xe=n(112),Je=n.n(Xe),Ke=n(113),$e=n.n(Ke),Qe=n(114),Ze=n.n(Qe),et=n(115),tt=n.n(et),nt=Object(v.a)((function(e){return{innerDrawer:{borderRadius:"16px 16px 0 0"},title:{paddingBottom:e.spacing(1)},iconsContainer:{display:"flex",padding:"0 ".concat(e.spacing(1),"px ").concat(e.spacing(2),"px ").concat(e.spacing(1),"px"),overflowX:"scroll"},icon:{width:40}}}));var at=function(e){var t=e.open,n=e.link,a=e.onClose,c=e.onOpen;n=encodeURIComponent(n);var i=Object(r.useContext)(ua),l=nt(),s=function(e,t){return function(){i.event.dispatchEvent(new CustomEvent("share",{detail:{label:t}})),window.open(e.replace(/{}/g,n))}};return o.a.createElement(Be.a,{disableDiscovery:!0,disableSwipeToOpen:!0,open:t,onClose:a,onOpen:c,anchor:"bottom",PaperProps:{className:l.innerDrawer}},o.a.createElement(Ee.a,{className:l.title},"Share Link"),o.a.createElement("div",{className:l.iconsContainer},o.a.createElement(h.a,{onClick:s("whatsapp://send?text={}","WhatsApp")},o.a.createElement("img",{src:Fe.a,alt:"WhatsApp",className:l.icon})),o.a.createElement(h.a,{onClick:s("https://www.facebook.com/sharer/sharer.php?u={}","Facebook")},o.a.createElement("img",{src:He.a,alt:"Facebook",className:l.icon})),o.a.createElement(h.a,{onClick:s("http://twitter.com/intent/tweet?text={}","Twitter")},o.a.createElement("img",{src:Me.a,alt:"Twitter",className:l.icon})),o.a.createElement(h.a,{onClick:s("https://telegram.me/share?url={}","Telegram")},o.a.createElement("img",{src:qe.a,alt:"Telegram",className:l.icon})),o.a.createElement(h.a,{onClick:s("https://web.skype.com/share?url={}","Skype")},o.a.createElement("img",{src:Ze.a,alt:"Skype",className:l.icon})),o.a.createElement(h.a,{onClick:s("fb-messenger://share?link={}","FB-Messenger")},o.a.createElement("img",{src:tt.a,alt:"Messenger",className:l.icon})),o.a.createElement(h.a,{onClick:s("https://www.pinterest.com/pin/create/button?url={}","Pinterest")},o.a.createElement("img",{src:Ye.a,alt:"Pinterest",className:l.icon})),o.a.createElement(h.a,{onClick:s("https://www.reddit.com/submit?url={}","Reddit")},o.a.createElement("img",{src:Je.a,alt:"Reddit",className:l.icon})),o.a.createElement(h.a,{onClick:s("https://www.tumblr.com/widgets/share/tool?posttype=link&canonicalUrl={}","Tumblr")},o.a.createElement("img",{src:$e.a,alt:"Tumblr",className:l.icon})),o.a.createElement(h.a,{onClick:s("mailto:?body={}","Mail")},o.a.createElement("img",{src:_e.a,alt:"Email",className:l.icon}))))},rt=n(239),ot=n(240),ct=n(241),it=Object(v.a)((function(e){return{innerDialog:{"& p":{color:e.palette.text.primary}},link:{color:e.palette.text.secondary}}}));var lt=function(e){var t=e.open,n=e.onAccept,a=e.onReject,c=Object(r.useRef)(),i=it(),l=Object(r.useState)(!1),s=Object(m.a)(l,2),u=s[0],p=s[1];Object(r.useEffect)((function(){t&&Object(b.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(requestAnimationFrame);case 2:if(c.current){e.next=4;break}return e.abrupt("return");case 4:t=c.current.querySelector("."+i.innerDialog),n=function e(){t.getBoundingClientRect().height+t.scrollTop>=t.scrollHeight&&(p(!0),t.removeEventListener("scroll",e))},t.addEventListener("scroll",n),n();case 8:case"end":return e.stop()}}),e)})))()}),[t]);var d=function(){p(!1),a()};return o.a.createElement(j.a,{open:t,onClose:d,ref:function(e){return c.current=e}},o.a.createElement(Ee.a,null,"Terms and conditions"),o.a.createElement(rt.a,{className:i.innerDialog},o.a.createElement(ot.a,null,"By creating a link for your image, it will be uploaded to our servers and therefor be listed in our ",o.a.createElement("a",{href:"/archive",target:"_blank",className:i.link},"archive"),". We will store your IP address and are allowed to hand it to third-parties if you violate against these terms and conditions."),o.a.createElement(ot.a,null,"Your image must meet the following terms and conditions:"),o.a.createElement(ot.a,null,"Only upload images that are relevant and appropriate to the product and that meet intellectual property, privacy, and other applicable laws."),o.a.createElement(ot.a,null,"You must hold the copyright of the images that you are uploading. Images that are considered to infringe the copyright or trademarks of other individuals, organizations or companies will not be permitted and will be removed. You must acknowledge that you have sufficient written permission (if necessary) of any recognizable locations or people appearing in the image to be able to grant us permission to use it on our website. If you think that your copyright to an image on our website has been infringed, please contact us."),o.a.createElement(ot.a,null,"You must not upload photographs that contain objectionable content, including but not limited to nudity, violence, and other offensive, illegal or inappropriate images. Also, images cannot contain advertisement or links."),o.a.createElement(ot.a,null,"By uploading an image to easymeme69.com, you permit us, the unrestricted, perpetual, worldwide, non-transferable, royalty-free right and license to display, exhibit, transmit, reproduce, record, digitize, modify, alter, adapt, create derivative works, exploit and otherwise use and permit others to use in connection with the image uploaded, in all languages and all media, whether now known or hereinafter devised, including without limitation on the Internet, on mobile platforms and/or devices, in printed materials, and in the advertising, publicity and promotion thereof."),o.a.createElement(ot.a,null,"You should bear in mind that by uploading an image to our website, you agree to indemnify us from any liability resulting from breaches of copyright of the image existing online on our website in digital form."),o.a.createElement(ot.a,null,"You also understand and agree that nothing in this agreement obligates easymeme69.com to display your images. Images must be relevant and appropriate."),o.a.createElement(ot.a,null,"easymeme69.com reserves the right in its sole and absolute discretion to alter these terms at any time for any reason without prior notice, or to terminate the image upload service for any reason at any time without prior notice."),o.a.createElement(ot.a,null,"easymeme69.com also reserves the right to reject and remove any uploaded images from its servers, for any reason, at any time, without prior notice.")),o.a.createElement(ct.a,null,o.a.createElement(k.a,{color:"primary",onClick:d,disabled:!u},"decline"),o.a.createElement(k.a,{color:"primary",onClick:n,disabled:!u},"agree")))},st=n(27),ut=n.n(st),mt="caches"in window;function pt(e){return dt.apply(this,arguments)}function dt(){return(dt=Object(b.a)(f.a.mark((function e(t){var n,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(mt){e.next=4;break}return e.next=3,ut.a.get(t);case 3:return e.abrupt("return",e.sent);case 4:return e.next=6,caches.open("v1");case 6:if(n=e.sent,navigator.onLine){e.next=15;break}return e.next=10,n.match(t);case 10:return a=e.sent,e.next=13,a.json();case 13:return e.t0=e.sent,e.abrupt("return",{data:e.t0});case 15:return e.next=17,ut.a.get(t);case 17:return r=e.sent,n.put(t,new Response(r.request.response,{status:r.status,headers:r.headers})),e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ft(e){return gt.apply(this,arguments)}function gt(){return(gt=Object(b.a)(f.a.mark((function e(t){var n,a,r,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(mt){e.next=2;break}return e.abrupt("return",t);case 2:return e.next=4,caches.open("v1");case 4:return n=e.sent,e.next=7,n.match(t);case 7:if(a=e.sent){e.next=10;break}return e.abrupt("return",t);case 10:return e.next=12,a.blob();case 12:return r=e.sent,o=URL.createObjectURL(r),e.abrupt("return",o);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bt(e){return ht.apply(this,arguments)}function ht(){return(ht=Object(b.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(mt){e.next=2;break}return e.abrupt("return");case 2:if(0!==t.indexOf("blob")){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,caches.open("v1");case 6:return n=e.sent,e.next=9,n.match(t);case 9:if(e.sent){e.next=15;break}return e.next=13,fetch(t);case 13:a=e.sent,n.put(t,a);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vt(e){return Et.apply(this,arguments)}function Et(){return(Et=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft(t.image_url);case 2:t.image_url=e.sent,t.meta_data&&(t.meta_data=JSON.parse(t.meta_data));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wt(e){return xt.apply(this,arguments)}function xt(){return(xt=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft(t.image_url);case 2:t.image_url=e.sent;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ot(e,t){return Promise.all(e.map(function(){var e=Object(b.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}function jt(e){var t;return"TEMPLATES"===e?t=function(e){return Ot(e.data,vt)}:"STICKERS"===e&&(t=function(e){return Ot(e.data,wt)}),function(e){return new Promise(function(){var n=Object(b.a)(f.a.mark((function n(a){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t(e);case 2:a(e);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}}function yt(e){ut.a.defaults.headers.common={Authorization:e}}function kt(e){return F+e}var Ct=function(e){return ut.a.post(kt("/auth/authorize"),{password:e})},St=function(){return pt(kt("/templates")).then(jt("TEMPLATES"))},Nt=function(e){return ut.a.post(kt("/templates"),e)},Tt=function(e){return ut.a.put(kt("/templates"),e)},Lt=function(e){return ut.a.post(kt("/templates/delete/"+e))},Rt=function(e){return ut.a.post(kt("/templates/register-use"),{id:e})},zt=function(){return pt(kt("/stickers")).then(jt("STICKERS"))},It=function(e){return ut.a.post(kt("/stickers"),e)},Wt=function(e){return ut.a.post(kt("/stickers/delete/"+e))},Bt=function(e){return ut.a.post(kt("/stickers/register-use"),{id:e})},At=function(e){return ut.a.post("/upload",e)};function Ft(){return(Ft=Object(b.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("file",t),e.prev=2,e.next=5,At(n);case 5:return a=e.sent,e.abrupt("return","https://"+window.location.host+a.data.path);case 9:return e.prev=9,e.t0=e.catch(2),console.error(e.t0),e.abrupt("return");case 13:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var Dt=function(e){return Ft.apply(this,arguments)},Mt=Object(v.a)((function(e){var t={margin:e.spacing(2),marginTop:0};return{spacing:t,title:{textAlign:"center"},innerDialog:{margin:e.spacing(1),width:function(e){return!e.imageData&&"100%"},height:function(e){return!e.imageData&&"50%"},display:function(e){return!e.imageData&&"flex"},justifyContent:function(e){return!e.imageData&&"center"},alignItems:function(e){return!e.imageData&&"center"}},image:{width:"90%",margin:"".concat(e.spacing(2),"px auto")},uploadButtonWrapper:Object(u.a)(Object(u.a)({},t),{},{position:"relative"}),buttonLoader:{position:"absolute",top:"50%",left:"50%",margin:"-12px 0 0 -12px"},linkWrapper:{margin:e.spacing(2),marginTop:0,padding:"0 ".concat(e.spacing(1),"px"),display:"flex",justifyContent:"space-between",alignItems:"center"},link:{overflowX:"overlay",padding:"".concat(e.spacing(1),"px 0")},shareButton:{padding:e.spacing(1)},snackbarClose:{color:e.palette.primary.variant}}}));var Pt=A((function(e){var t=e.open,n=e.onClose,a=e.imageData,c=e.elements,i=Object(r.useContext)(ua),l=Mt({imageData:a}),s=Object(C.c)(),u=s.register,p=s.getValues,d=Object(r.useRef)(!1),v=Object(r.useRef)(),E=Object(r.useRef)(),w=Object(r.useState)(),x=Object(m.a)(w,2),O=x[0],S=x[1],N=Object(r.useState)(!1),T=Object(m.a)(N,2),L=T[0],R=T[1],z=Object(r.useState)(!1),I=Object(m.a)(z,2),W=I[0],B=I[1],A=Object(r.useState)(!1),F=Object(m.a)(A,2),M=F[0],P=F[1],H=Object(r.useState)(!1),V=Object(m.a)(H,2),_=V[0],U=V[1],q=Object(r.useState)(!1),G=Object(m.a)(q,2),Y=G[0],X=G[1],J=Object(r.useState)(!1),K=Object(m.a)(J,2),$=K[0],Z=K[1],ee=!!i.currentTemplate,te=function(e,t){return i.event.dispatchEvent(new CustomEvent(e,{detail:t}))},ne=function(){var e=Object(b.a)(f.a.mark((function e(){var t,n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.currentTemplate){e.next=4;break}if(d.current){e.next=4;break}return e.next=4,Rt(i.currentTemplate.id);case 4:t=Object(g.a)(c),e.prev=5,t.s();case 7:if((n=t.n()).done){e.next=14;break}if("sticker"!==(a=n.value).type||void 0===a.data.id){e.next=12;break}return e.next=12,Bt(a.data.id);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),t.e(e.t0);case 19:return e.prev=19,t.f(),e.finish(19);case 22:d.current=!0;case 23:case"end":return e.stop()}}),e,null,[[5,16,19,22]])})));return function(){return e.apply(this,arguments)}}(),ae=function(){P(!0),te("openShareModal")},re=function(){var e=Object(b.a)(f.a.mark((function e(){var t,n,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p("label")){e.next=2;break}return e.abrupt("return");case 2:B(!0),t=p("label"),n=D(i.image,"image.png"),a={textboxes:window.getTextboxes(),border:window.getBorder()},(r=new FormData).append("password",i.password),r.append("image",n),r.append("label",t),r.append("meta_data",JSON.stringify(a)),Nt(r).then((function(e){200===e.status&&(Z(!0),X(!0))})).finally((function(){B(!1)}));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=Object(b.a)(f.a.mark((function e(){var t,n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p("label")){e.next=2;break}return e.abrupt("return");case 2:B(!0),t=p("label"),n={textboxes:window.getTextboxes(),border:window.getBorder()},a={id:i.currentTemplate.id,label:t,meta_data:n},Tt(a).then((function(e){200===e.status&&(Z(!0),X(!0))})).finally((function(){B(!1)}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){t||S(null)}),[t]),o.a.createElement(o.a.Fragment,null,o.a.createElement(j.a,{open:t,onClose:function(){d.current=!1,Z(!1),n()},PaperProps:{className:l.innerDialog}},a?o.a.createElement(o.a.Fragment,null,o.a.createElement("img",{alt:"",src:a,className:l.image}),o.a.createElement(ye.a,{variant:"outlined",className:l.linkWrapper,style:{display:!O&&"none"}},o.a.createElement(ke.a,{variant:"body1",className:l.link},O),o.a.createElement(h.a,{className:l.shareButton,onClick:ae},o.a.createElement(ze.a,null))),!O&&o.a.createElement("div",{className:l.uploadButtonWrapper},o.a.createElement(k.a,{startIcon:o.a.createElement(Le.a,null),color:"primary",variant:"outlined",onClick:function(){U(!0),new Promise((function(e,t){v.current=e,E.current=t})).then(Object(b.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U(!1),R(!0),t=D(a,"image.png"),e.next=5,Dt(t);case 5:n=e.sent,R(!1),S(n),ne(),te("uploadImage",{link:n});case 10:case"end":return e.stop()}}),e)})))).catch((function(){U(!1)}))},disabled:L,fullWidth:!0},"Create Link"),L&&o.a.createElement(je.a,{size:24,className:l.buttonLoader})),o.a.createElement(k.a,{startIcon:o.a.createElement(Ne.a,null),color:"primary",variant:"outlined",className:l.spacing,onClick:function(){!function(e){var t=document.createElement("a");t.href=e,t.download="download.png",document.body.appendChild(t),t.click(),document.body.removeChild(t)}(a),ne(),te("downloadImage")}},"Download"),i.password&&!$&&o.a.createElement(o.a.Fragment,null,o.a.createElement(y.a,{inputRef:u(),name:"label",label:"Label",className:l.spacing,variant:"outlined",defaultValue:i.label}),o.a.createElement("div",{className:l.uploadButtonWrapper},o.a.createElement(k.a,{startIcon:o.a.createElement(We.a,null),color:"primary",variant:"outlined",onClick:ee?oe:re,disabled:W,fullWidth:!0},ee?"Update":"Publish"," Template"),W&&o.a.createElement(je.a,{size:24,className:l.buttonLoader}))),o.a.createElement(at,{open:M,link:O,onOpen:ae,onClose:function(){return P(!1)}})):o.a.createElement(je.a,null)),o.a.createElement(lt,{open:_,onAccept:v.current,onReject:E.current}),o.a.createElement(Ce.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:Y,autoHideDuration:3e3,onClose:function(){return X(!1)},message:"Uploaded",action:o.a.createElement(h.a,{onClick:function(){return X(!1)},className:l.snackbarClose},o.a.createElement(Q.a,null))}))}),"image"),Ht=Object(v.a)((function(e){return{form:{padding:e.spacing(2),paddingTop:0},applyButton:{marginTop:e.spacing(2)},input:{marginTop:e.spacing(1)}}}));var Vt=A((function(e){var t=e.onClose,n=e.open,a=e.values,c=Object(C.c)(),i=c.register,l=c.getValues,s=c.handleSubmit,u=c.control,p=c.watch,d=c.reset,f=c.setValue,g=Ht(),b=Object(r.useState)(!1),h=Object(m.a)(b,2),v=h[0],E=h[1],w=function(){var e=l();!e.fixedSpacing||e.spacing?(E(!1),e.spacing=parseInt(e.spacing),t(e)):E(!0)};return Object(r.useEffect)((function(){d(a)}),[a,d]),o.a.createElement(j.a,{onClose:w,open:n},o.a.createElement(Ee.a,null,"Set Grid"),o.a.createElement(C.b,{control:u,watch:p,register:i,setValue:f},o.a.createElement("form",{onSubmit:s(w),className:g.form},o.a.createElement(we.a,null,o.a.createElement(z,{name:"enabled",label:"Enabled",className:g.input}),o.a.createElement(z,{name:"fixedSpacing",label:"Fixed Spacing",className:g.input}),o.a.createElement(N,{name:"color",label:"Color",options:I.colors,className:g.input,child:function(e){var t=e.label,n=e.value;return o.a.createElement("span",{style:{color:n}},t)}}),o.a.createElement(y.a,{inputRef:i(),className:g.input,fullWidth:!0,type:"number",name:"columns",label:"Columns"}),o.a.createElement(y.a,{inputRef:i(),className:g.input,fullWidth:!0,type:"number",name:"rows",label:"Rows"}),o.a.createElement(y.a,{inputRef:i(),className:g.input,fullWidth:!0,type:"number",name:"spacing",label:"Spacing (px)",error:v}),o.a.createElement(k.a,{fullWidth:!0,className:g.applyButton,type:"submit"},"Apply")))))}),"grid"),_t=n(120),Ut=n.n(_t);function qt(e){var t=e.querySelectorAll(".textbox");t.forEach((function(e){var t=Math.min(e.offsetHeight/18,6);e.style.padding="".concat(6-t,"px ").concat(6,"px ").concat(6+t,"px")})),t.forEach((function(e){e.style.fontFeatureSettings='"liga" 0'}));var n=Array.from(e.querySelectorAll(".element"));if(n.length>0){var a=n[0].parentNode;n.map((function(e){return a.removeChild(e)})).reverse().map((function(e){return a.appendChild(e)}))}var r=e.querySelector(".meme-image");r.style.minWidth=r.clientWidth+1+"px",r.style.minHeight=r.clientHeight+1+"px"}function Gt(){return(Gt=Object(b.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ut()(t,{useCORS:!0,onclone:qt});case 2:return n=e.sent,e.abrupt("return",n.toDataURL());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Yt=function(e){return Gt.apply(this,arguments)};function Xt(e){var t=getComputedStyle(e);return{width:e.clientWidth-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight),height:e.clientHeight-parseFloat(t.paddingTop)-parseFloat(t.paddingBottom)}}function Jt(){return Kt.apply(this,arguments)}function Kt(){return(Kt=Object(b.a)(f.a.mark((function e(){var t,n,a=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.length>0&&void 0!==a[0]?a[0]:1,n=0;case 2:if(!(n<t)){e.next=8;break}return e.next=5,new Promise(requestAnimationFrame);case 5:n++,e.next=2;break;case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $t={size:0,top:!0,bottom:!0,left:!1,right:!1,color:"white"},Qt={enabled:!1,fixedSpacing:!1,color:"black",spacing:void 0,columns:16,rows:16},Zt=Object(v.a)((function(e){return{canvasWrapper:{position:"absolute",top:0,bottom:0,left:0,right:0,backgroundColor:e.palette.background.default,padding:e.spacing(1),paddingBottom:e.mixins.toolbar.minHeight+e.spacing(1),display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden"},canvas:{position:"relative",display:"flex"}}}));var en=function(){var e=Object(r.useContext)(ua),t=Zt(),n=Object(r.useRef)(0),a=Object(r.useRef)(),c=Object(r.useRef)(),i=Object(r.useRef)(),l=Object(r.useRef)({}),s=Object(r.useState)([]),u=Object(m.a)(s,2),d=u[0],v=u[1],E=Object(r.useState)($t),x=Object(m.a)(E,2),j=x[0],y=x[1],k=Object(r.useState)(Qt),C=Object(m.a)(k,2),S=C[0],N=C[1],T=Object(r.useState)(!1),L=Object(m.a)(T,2),R=L[0],z=L[1],I=Object(r.useState)(!1),W=Object(m.a)(I,2),B=W[0],A=W[1],F=Object(r.useState)(!1),D=Object(m.a)(F,2),H=D[0],V=D[1],_=Object(r.useState)(null),U=Object(m.a)(_,2),q=U[0],G=U[1];l.current={};var Y,X=Object(g.a)(d);try{for(X.s();!(Y=X.n()).done;){var J=Y.value;l.current[J.key]={}}}catch(de){X.e(de)}finally{X.f()}var K=function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(!1),e.next=3,Jt(3);case 3:G(null);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(e){var t=d.filter((function(t){return t.key!==e}));v(t),delete l.current[e]},Q=function(){v([]),l.current={}},Z=function(e,t){return{type:e,data:t,key:n.current++}},ee=function(e){var t=e.template,n=Z("textbox",{template:t});return v([].concat(Object(p.a)(d),[n])),n},te=function(e,t){var n=Z("sticker",{src:e,id:t});v([].concat(Object(p.a)(d),[n]))},ne=function(){var e=Object(b.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M("image/*");case 2:return t=e.sent,e.next=5,P(t);case 5:n=e.sent,te(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object.values(l.current).forEach((function(e){return e.beforeCapturing()})),e.next=3,Jt(3);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){var t=Object(b.a)(f.a.mark((function t(){var n,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M("image/*");case 2:return n=t.sent,t.next=5,P(n);case 5:a=t.sent,Q(),e.set({currentTemplate:null,image:a});case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),oe=function(){var e=Object(b.a)(f.a.mark((function e(){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(!0),e.next=3,Jt(1);case 3:return n=document.querySelector(".".concat(t.canvas)),e.next=6,ae(n);case 6:return e.next=8,Yt(n);case 8:a=e.sent,G(a),Object.values(l.current).forEach((function(e){return e.afterCapturing()}));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(){z(!0)},ie=function(){V(!0)},le=function(){var t=Object(b.a)(f.a.mark((function t(n){var r,o,c,i,l,s,u,m;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.detail.template,e.set({currentTemplate:r,image:r.image_url,label:r.label}),t.next=4,Jt(2);case 4:if(o=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(/\d+%/.test(e[t])){var r=parseFloat(e[t]);e[t]=(n?a.current.clientWidth:a.current.clientHeight)*(r/100)}},Q(),d=[],r.meta_data){t.next=9;break}return t.abrupt("return");case 9:if(c=r.meta_data.border,i=r.meta_data.textboxes,"string"===typeof(null===c||void 0===c?void 0:c.size)&&o(c,"size"),y(c||$t),i){l=Object(g.a)(i);try{for(l.s();!(s=l.n()).done;)u=s.value,o(u,"width",!0),o(u,"height"),o(u,"x",!0),o(u,"y"),m=ee({template:u}),d.push(m)}catch(de){l.e(de)}finally{l.f()}}v(d);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),se=function(e){var t=e.detail.sticker;te(t.image_url,t.id)},me=function(){return d.filter((function(e){return"textbox"===e.type})).map((function(e){return e.key})).map((function(e){return l.current[e].toObject({image:a.current})}))},pe=function(){return j};return Object(r.useEffect)((function(){return e.event.addEventListener("importImage",re),e.event.addEventListener("addTextbox",ee),e.event.addEventListener("importSticker",ne),e.event.addEventListener("generateImage",oe),e.event.addEventListener("setBorder",ce),e.event.addEventListener("setGrid",ie),e.event.addEventListener("loadTemplate",le),e.event.addEventListener("loadSticker",se),window.getTextboxes=me,window.getBorder=pe,function(){e.event.removeEventListener("importImage",re),e.event.removeEventListener("addTextbox",ee),e.event.removeEventListener("importSticker",ne),e.event.removeEventListener("generateImage",oe),e.event.removeEventListener("setBorder",ce),e.event.removeEventListener("setGrid",ie),e.event.removeEventListener("loadTemplate",le),e.event.removeEventListener("loadSticker",se)}})),Object(r.useEffect)((function(){Object(b.a)(f.a.mark((function e(){var t,n,r,o,l,s,u,m,p,d;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jt(1);case 2:if(a.current&&i.current&&c.current){e.next=4;break}return e.abrupt("return");case 4:t=a.current.naturalWidth,n=a.current.naturalHeight,r=n/t,o=Xt(i.current),l=o.width,s=o.height,l*r>s?(32,p=(j.top||0+j.bottom||0)*j.size,u=(m=s-32-p)*(1/r)):(d=(j.left||0+j.right||0)*j.size,m=(u=l-d)*r),u=Math.floor(u),m=Math.floor(m),a.current.style.width=u+"px",a.current.style.height=m+"px",c.current.style.width=u+"px",c.current.style.height=m+"px";case 15:case"end":return e.stop()}}),e)})))()}),[e.image,a,i,c,j]),o.a.createElement("div",{className:t.canvasWrapper,ref:i},o.a.createElement("div",{className:t.canvas,style:{paddingTop:j.top&&j.size+"px",paddingBottom:j.bottom&&j.size+"px",paddingLeft:j.left&&j.size+"px",paddingRight:j.right&&j.size+"px",backgroundColor:e.image&&j.color,width:!e.image&&"unset"},ref:c},e.image?o.a.createElement("img",{alt:"",src:e.image,className:"meme-image",ref:a,draggable:"false"}):o.a.createElement(o.a.Fragment,null,o.a.createElement(h.a,{onClick:function(){return e.event.dispatchEvent(new CustomEvent("openTemplatesDialog"))}},o.a.createElement(O.a,{fontSize:"large"})),o.a.createElement(h.a,{onClick:re},o.a.createElement(w.a,{fontSize:"large"}))),d.map((function(e){var t=e.type,n=e.key,a=e.data;if("textbox"===t)return o.a.createElement(ue,{key:n,id:n,onRemove:$,handle:l.current[n],grid:S,template:a.template,canvas:c.current});if("sticker"===t)return o.a.createElement(ge,{key:n,id:n,onRemove:$,handle:l.current[n],grid:S,canvas:c.current,src:a.src});throw new Error("Type "+t+" is not defined")}))),o.a.createElement(ve,{config:S,canvas:c.current,border:j}),o.a.createElement(Oe,{open:R,onClose:function(e){e&&y(e),z(!1)},values:j}),o.a.createElement(Vt,{open:H,onClose:function(e){e&&N(e),V(!1)},values:S}),o.a.createElement(Pt,{open:B,onClose:K,imageData:q,elements:d}))},tn=n(251),nn=n(252),an=n(250),rn=n(129),on=n.n(rn),cn=n(130),ln=n.n(cn),sn=n(132),un=n.n(sn),mn=n(128),pn=n.n(mn),dn=n(131),fn=n.n(dn),gn=n(134),bn=n(244),hn=n(245),vn=n(121),En=n.n(vn),wn=n(122),xn=n.n(wn),On=n(123),jn=n.n(On),yn=Object(v.a)((function(e){return{icon:{minWidth:e.spacing(4)}}}));var kn=function(e){var t=e.open,n=e.anchorEl,a=e.onClose,c=Object(r.useContext)(ua),i=yn(),l=function(e){return function(){c.event.dispatchEvent(new CustomEvent(e)),a()}};return o.a.createElement(gn.a,{open:t,anchorEl:n,onClose:a,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},o.a.createElement(S.a,{onClick:l("setBorder")},o.a.createElement(bn.a,{className:i.icon},o.a.createElement(En.a,{fontSize:"small"})),o.a.createElement(hn.a,{primary:"Border"})),o.a.createElement(S.a,{onClick:l("setGrid")},o.a.createElement(bn.a,{className:i.icon},o.a.createElement(xn.a,{fontSize:"small"})),o.a.createElement(hn.a,{primary:"Grid"})),o.a.createElement(S.a,{onClick:l("importSticker")},o.a.createElement(bn.a,{className:i.icon},o.a.createElement(jn.a,{fontSize:"small"})),o.a.createElement(hn.a,{primary:"Import Sticker"})),o.a.createElement(S.a,{onClick:l("importImage")},o.a.createElement(bn.a,{className:i.icon},o.a.createElement(w.a,{fontSize:"small"})),o.a.createElement(hn.a,{primary:c.image?"Replace Meme":"Import Meme"})))},Cn=n(238),Sn=n(256),Nn=n(253),Tn=n(124),Ln=n.n(Tn),Rn=n(259),zn=n(246),In=n(247),Wn=n(248),Bn=n(71),An=n.n(Bn);var Fn=function(e){var t=e.onClose,n=e.open,a=e.content;return o.a.createElement(j.a,{disableBackdropClick:!0,disableEscapeKeyDown:!0,open:n},o.a.createElement(Ee.a,null,"Confirm"),o.a.createElement(rt.a,{dividers:!0},o.a.createElement(ke.a,null,a)),o.a.createElement(ct.a,null,o.a.createElement(k.a,{onClick:function(){return t(!1)}},"Cancel"),o.a.createElement(k.a,{onClick:function(){return t(!0)}},"Ok")))},Dn=new Map;var Mn=function(e){if(!(e=Object(u.a)({method:"string"===typeof e?e:e.method,useCache:!0},"object"===typeof e?e:{})).method)throw new Error("API Method not found");var t=a[e.method].bind(null,e.data),n=Object(r.useState)(!(e.defaultValue||Dn.get(e.method))),o=Object(m.a)(n,2),c=o[0],i=o[1],l=Object(r.useState)(),s=Object(m.a)(l,2),p=s[0],d=s[1],f=Object(r.useReducer)((function(t,n){return Dn.set(e.method,n),n}),e.defaultValue||e.useCache&&Dn.get(e.method)),g=Object(m.a)(f,2),b=g[0],h=g[1],v=Object(r.useReducer)((function(e){return e+1}),0),E=Object(m.a)(v,2),w=E[0],x=E[1];return Object(r.useEffect)((function(){b&&0===w||(i(!0),t().then((function(t){h(t.data),d(null),i(!1),e.onLoad&&e.onLoad(t.data)})).catch((function(e){h(null),d(e),i(!1)})))}),[w]),{isLoading:c,data:b,error:p,reload:x}},Pn=Object(v.a)((function(e){return{spacer:{height:e.spacing(2)},searchWrapper:{margin:"".concat(e.spacing(2),"px ").concat(e.spacing(1),"px"),marginTop:0,padding:"2px 4px",display:"flex"},search:{marginLeft:e.spacing(1),flex:1},searchClear:{padding:e.spacing(1)},listWrapper:{display:"flex",justifyContent:"center",overflow:"hidden"},list:{maxWidth:400,width:"100%"},tile:{cursor:"pointer"},tilebar:{height:56},deleteButton:{zIndex:10,position:"absolute",top:0,left:0}}}));var Hn=function(e){var t=e.onLoad,n=Object(r.useContext)(ua),a=Pn(),c=Object(r.useRef)({}),i=Object(r.useState)(!1),l=Object(m.a)(i,2),s=l[0],u=l[1],p=Object(r.useState)(""),d=Object(m.a)(p,2),f=d[0],g=d[1],b=Mn("getTemplates"),v=b.data,E=b.isLoading,w=b.reload;if(E)return o.a.createElement(je.a,null);var x=v.filter((function(e){return e.label.toLowerCase().includes(f.toLowerCase())}));return x.sort((function(e,t){return t.amount_uses-e.amount_uses})),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:a.spacer}),o.a.createElement(ye.a,{variant:"outlined",className:a.searchWrapper},o.a.createElement(Rn.a,{value:f,onChange:function(e){g(e.target.value)},placeholder:"Search",className:a.search}),o.a.createElement(h.a,{onClick:function(){return g("")},className:a.searchClear},o.a.createElement(Q.a,null))),o.a.createElement("div",{className:a.listWrapper},o.a.createElement(zn.a,{cellHeight:150,className:a.list},x.map((function(e,r){return o.a.createElement(In.a,{key:r,className:a.tile,onClick:function(n){return function(e,n){"DIV"!==e.target.tagName&&"IMG"!==e.target.tagName||t(n)}(n,e)}},o.a.createElement("img",{src:e.image_url,alt:e.label,loading:"lazy",onLoad:function(){return function(e){bt(e.image_url)}(e)}}),o.a.createElement(Wn.a,{title:e.label,subtitle:(i=e.amount_uses,1===i?"1 Meme Created":i+" Memes Created"),className:a.tilebar}),n.password&&o.a.createElement(h.a,{onClick:function(){return function(e){c.current=e,u(!0)}(e)},className:a.deleteButton},o.a.createElement(An.a,{fontSize:"small"})));var i}))),o.a.createElement(Fn,{open:s,onClose:function(e){u(!1),e&&Lt(c.current.id).then(w)},content:'The template "'.concat(c.current.label,'" will be deleted')})))},Vn=n(249),_n=n(125),Un=n.n(_n),qn=Object(v.a)((function(e){return{listWrapper:{display:"flex",justifyContent:"center",overflow:"hidden"},list:{maxWidth:400,paddingTop:e.spacing(1),width:"100%"},tile:{cursor:"pointer","& div":{display:"flex",justifyContent:"center",alignItems:"center"}},deleteButton:{zIndex:10,position:"absolute",top:0,left:0},addButton:{position:"fixed",right:e.spacing(2),bottom:e.spacing(2)}}}));function Gn(e){var t=e.sticker,n=e.onDelete,a=Object(r.useContext)(ua),c=qn(),i=Object(r.useRef)();return Object(r.useEffect)((function(){i.current&&(i.current.onload=function(){i.current&&(i.current.naturalWidth>=i.current.naturalHeight?i.current.style.width="100%":i.current.naturalHeight>i.current.naturalWidth&&(i.current.style.height="100%"))})}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement("img",{src:t.image_url,alt:"Sticker",loading:"lazy",ref:i,onLoad:function(){bt(t.image_url)}}),a.password&&o.a.createElement(h.a,{onClick:function(){return n(t)},className:c.deleteButton},o.a.createElement(An.a,{fontSize:"small"})))}var Yn=function(e){var t=e.onLoad,n=e.active,a=Object(r.useContext)(ua),c=qn(),l=Object(r.useRef)({}),s=Object(r.useState)(!1),u=Object(m.a)(s,2),p=u[0],d=u[1],g=Mn("getStickers"),h=g.data,v=g.isLoading,E=g.reload,w=function(e){l.current=e,d(!0)},x=function(){var e=Object(b.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M("image/*");case 2:return t=e.sent,(n=new FormData).append("image",t),e.next=7,It(n);case 7:E();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(v)return o.a.createElement(je.a,null);h.sort((function(e,t){return t.amount_uses-e.amount_uses}));var O=document.getElementById("templates-dialog-inner-container");return o.a.createElement("div",{className:c.listWrapper},o.a.createElement(zn.a,{className:c.list,cols:3},h.map((function(e,n){return o.a.createElement(In.a,{className:c.tile,onClick:function(n){return function(e,n){"DIV"!==e.target.tagName&&"IMG"!==e.target.tagName||t(n)}(n,e)},key:n},o.a.createElement(Gn,{sticker:e,onDelete:w}))}))),o.a.createElement(Fn,{open:p,onClose:function(e){d(!1),e&&Wt(l.current.id).then(E)},content:"Sticker ".concat(l.current.id," will be deleted")}),a.password&&O&&i.a.createPortal(o.a.createElement(Vn.a,{in:n,unmountOnExit:!0},o.a.createElement(an.a,{color:"secondary",className:c.addButton,onClick:x},o.a.createElement(Un.a,null))),O))},Xn=Object(v.a)((function(e){return{toolbar:{minHeight:46},body:{marginTop:46}}})),Jn=o.a.forwardRef((function(e,t){return o.a.createElement(Cn.a,Object.assign({direction:"up",ref:t},e))}));var Kn=A((function(e){var t=e.onClose,n=e.open,a=Object(r.useContext)(ua),c=Xn({width:a.width}),i=Object(r.useState)(0),l=Object(m.a)(i,2),s=l[0],u=l[1],p=function(){t()},d=function(){document.getElementById("templates-dialog-inner-container").scrollTo(0,0)};return o.a.createElement(j.a,{fullScreen:!0,onClose:p,open:n,TransitionComponent:Jn},o.a.createElement(tn.a,null,o.a.createElement(nn.a,{className:c.toolbar},o.a.createElement(h.a,{edge:"start",color:"inherit",onClick:p},o.a.createElement(Q.a,{fontSize:"small"})),o.a.createElement(Sn.a,{value:s,onChange:function(e,t){u(t),d()}},o.a.createElement(Nn.a,{label:"Templates"}),o.a.createElement(Nn.a,{label:"Stickers"})))),o.a.createElement(Ln.a,{index:s,onChangeIndex:function(e){u(e),d()},axis:"x",id:"templates-dialog-inner-container",disableLazyLoading:!0},o.a.createElement("div",{className:c.body},o.a.createElement(Hn,{onLoad:function(e){a.event.dispatchEvent(new CustomEvent("loadTemplate",{detail:{template:e}})),p()},active:0===s})),o.a.createElement("div",{className:c.body},o.a.createElement(Yn,{onLoad:function(e){a.event.dispatchEvent(new CustomEvent("loadSticker",{detail:{sticker:e}})),p()},active:1===s}))))}),"templates"),$n=n(258),Qn=n(243),Zn=n(126),ea=Object(v.a)((function(e){return{innerDialog:{background:"none",overflow:"hidden"}}}));function ta(e){var t=e.data,n=t.selector,a=t.content,r=e.open,c=document.querySelector(n).getBoundingClientRect();return o.a.createElement($n.a,{open:r,placement:"top",arrow:!0,title:a},o.a.createElement("div",{style:{position:"absolute",top:c.top+20,left:c.left,width:c.width+"px",height:c.height+"px"}}))}var na=A((function(e){var t=e.open,n=e.onClose,a=ea();return o.a.createElement(j.a,{open:t,onClose:n,fullScreen:!0,PaperProps:{className:a.innerDialog}},o.a.createElement(Qn.a,{onClickAway:n},o.a.createElement("div",null,Zn.map((function(e,n){return o.a.createElement(ta,{data:e,key:n,open:t})})))))}),"help"),aa=Object(v.a)((function(e){return{form:{padding:e.spacing(2),paddingTop:0},applyButton:{marginTop:e.spacing(2)},input:{marginTop:e.spacing(1)},snackbarClose:{color:e.palette.primary.variant}}}));var ra=A((function(e){var t=e.onClose,n=e.open,a=Object(r.useContext)(ua),c=Object(C.c)(),i=c.register,l=c.getValues,s=c.handleSubmit,u=c.control,p=c.watch,d=c.setValue,g=aa(),v=Object(r.useState)(!1),E=Object(m.a)(v,2),w=E[0],x=E[1],O=Object(r.useState)(!1),S=Object(m.a)(O,2),N=S[0],T=S[1],L=function(){var e=Object(b.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l("password"),e.next=3,Ct(n);case 3:e.sent.data?(T(!1),x(!0),a.setPassword(n),t()):T(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement(o.a.Fragment,null,o.a.createElement(j.a,{onClose:t,open:n},o.a.createElement(Ee.a,null,"Login"),o.a.createElement(C.b,{control:u,watch:p,register:i,setValue:d},o.a.createElement("form",{onSubmit:s(L),className:g.form},o.a.createElement(we.a,null,o.a.createElement(y.a,{error:N,inputRef:i(),className:g.input,fullWidth:!0,type:"password",name:"password",label:"Password",helperText:N&&"Wrong Password"}),o.a.createElement(k.a,{fullWidth:!0,className:g.applyButton,type:"submit"},"Login"))))),o.a.createElement(Ce.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:w,autoHideDuration:3e3,onClose:function(){return x(!1)},message:"Logged In",action:o.a.createElement(h.a,{onClick:function(){return x(!1)},className:g.snackbarClose},o.a.createElement(Q.a,null))}))}),"auth"),oa=Object(v.a)((function(e){return{appBar:{position:"absolute",top:"unset",bottom:0,left:0,right:"unset",backgroundColor:e.palette.background.paper},fabButton:{position:"absolute",top:-30,left:0,right:0,margin:"0 auto"},spacer:{flexGrow:1}}}));var ca=function(){var e=Object(r.useContext)(ua),t=oa(),n=Object(r.useRef)(),a=Object(r.useRef)(),c=Object(r.useState)(!1),i=Object(m.a)(c,2),l=i[0],s=i[1],u=Object(r.useState)(!1),p=Object(m.a)(u,2),d=p[0],f=p[1],g=Object(r.useState)(!1),b=Object(m.a)(g,2),v=b[0],E=b[1],w=Object(r.useState)(!1),x=Object(m.a)(w,2),j=x[0],y=x[1],k=function(){f(!0)},C=function(){e.password||(a.current=setTimeout((function(){y(!0)}),1e3))},S=function(){clearTimeout(a.current)},N=function(t){return function(){e.event.dispatchEvent(new CustomEvent(t))}};return Object(r.useEffect)((function(){return e.event.addEventListener("openTemplatesDialog",k),function(){e.event.removeEventListener("openTemplatesDialog",k)}})),o.a.createElement(tn.a,{position:"fixed",className:t.appBar},o.a.createElement(nn.a,null,o.a.createElement(h.a,{onClick:function(){E(!0)},onTouchStart:C,onTouchEnd:S,onMouseDown:C,onMouseUp:S},o.a.createElement(pn.a,null)),o.a.createElement(h.a,{onClick:k,id:"templates-button"},o.a.createElement(O.a,null)),o.a.createElement("div",{className:t.spacer}),o.a.createElement(an.a,{color:"primary",className:t.fabButton,onClick:N("generateImage"),disabled:!e.image},o.a.createElement(on.a,null)),o.a.createElement(h.a,{onClick:N("addTextbox"),id:"textbox-button"},o.a.createElement(ln.a,null)),o.a.createElement(h.a,{onClick:N("undo"),id:"undo-button"},o.a.createElement(fn.a,null)),o.a.createElement(h.a,{onClick:function(){s(!l)},ref:n},o.a.createElement(un.a,null)),o.a.createElement(kn,{open:l,anchorEl:n.current,onClose:function(){s(!1)}}),o.a.createElement(Kn,{open:d,onClose:function(){return f(!1)}}),o.a.createElement(na,{open:v,onClose:function(){return E(!1)}}),o.a.createElement(ra,{open:j,onClose:function(){return y(!1)}})))};var ia=function(){var e=Object(r.useContext)(ua),t=Object(r.useState)(!1),n=Object(m.a)(t,2),a=n[0],o=n[1];return Object(r.useEffect)((function(){e.password||(B.a.initialize("UA-162994094-2"),B.a.pageview(window.location.pathname),o(!0))}),[]),Object(r.useEffect)((function(){if(a){var t=B.a.event.bind(null,Object(u.a)({category:"Editor",action:"Generate Image"},e.currentTemplate?{label:e.currentTemplate.label,value:e.currentTemplate.id}:{})),n=function(e){var t=e.detail.template;return B.a.event({category:"Editor",action:"Load Template",label:t.label,value:t.id})},r=function(){return B.a.modalview("share")},o=function(e){var t=e.detail.link;return B.a.event({category:"Editor",action:"Upload Image",label:t})},c=function(){return B.a.event({category:"Editor",action:"Download Image"})},i=function(e){var t=e.detail.label;return B.a.event({category:"Editor",action:"Share",label:t})};return e.event.addEventListener("generateImage",t),e.event.addEventListener("loadTemplate",n),e.event.addEventListener("openShareModal",r),e.event.addEventListener("uploadImage",o),e.event.addEventListener("downloadImage",c),e.event.addEventListener("share",i),function(){e.event.removeEventListener("generateImage",t),e.event.removeEventListener("loadTemplate",n),e.event.removeEventListener("openShareModal",r),e.event.removeEventListener("uploadImage",o),e.event.removeEventListener("downloadImage",c),e.event.removeEventListener("share",i)}}}),[e,a]),null},la=Object(v.a)((function(e){return{snackbarClose:{color:e.palette.primary.variant}}}));var sa=function(){var e=la(),t=Object(r.useState)(!1),n=Object(m.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)(""),l=Object(m.a)(i,2),s=l[0],u=l[1];return Object(r.useEffect)((function(){var e=new BroadcastChannel("sw-0");return e.addEventListener("message",(function(e){var t=e.data;"content-cached"===t?(c(!0),u("The app is cached for offline use")):"content-available"===t&&(c(!0),u("A new version is available. Restart the app to see it"))})),function(){return e.close()}}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement(Ce.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:a,autoHideDuration:6e3,message:s,onClose:function(){return c(!1)},action:o.a.createElement(h.a,{onClick:function(){return c(!1)},className:e.snackbarClose},o.a.createElement(Q.a,null))}))},ua=o.a.createContext();localStorage.getItem("password")&&yt(localStorage.getItem("password"));var ma=function(){var e=Object(r.useState)({event:new EventTarget,image:null,label:null,currentTemplate:null,password:localStorage.getItem("password")}),t=Object(m.a)(e,2),n=t[0],a=t[1],c={set:function(e){return a(Object(u.a)(Object(u.a)({},n),e))},setPassword:function(e){localStorage.setItem("password",e),yt(e),a(Object(u.a)(Object(u.a)({},n),{},{password:e}))}};return Object(r.useEffect)((function(){var e=function(e){e.data.image&&a(Object(u.a)(Object(u.a)({},n),{},{image:e.data.image,label:e.data.label}))},t=function(e){e.ctrlKey&&90===e.keyCode&&n.event.dispatchEvent(new CustomEvent("undo"))};return window.addEventListener("message",e),window.addEventListener("keydown",t),function(){window.removeEventListener("message",e),window.removeEventListener("keydown",t)}})),window.context=n,o.a.createElement(ua.Provider,{value:Object(u.a)(Object(u.a)({},n),c)},o.a.createElement(ia,null),o.a.createElement(sa,null),o.a.createElement(en,null),o.a.createElement(ca,null))},pa=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)),da=new BroadcastChannel("sw-0");function fa(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(da.postMessage("content-available"),console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(da.postMessage("content-cached"),console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}n(193);var ga=Object(l.a)({palette:{type:"dark",primary:{main:"#BB86FC",variant:"#3700B3"}}});i.a.render(o.a.createElement(s.a,{theme:ga},o.a.createElement(ma,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/editor",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/editor","/service-worker.js");pa?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):fa(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):fa(t,e)}))}}()},35:function(e){e.exports=JSON.parse('{"colors":{"White":"white","Black":"black","Green":"#2ecc71","Red":"#e74c3c","Blue":"#3498db","Yellow":"#f1c40f","Purple":"#9b59b6"},"textAlign":{"Left":"left","Right":"right","Center":"center"},"verticalTextAlign":{"Top":"top","Bottom":"bottom","Center":"center"},"fontFamilies":{"Impact":"\'Impact\', fantasy","Arial":"Arial","Comic Sans":"\'Comic Sans\', cursive","Courier":"\'Courier\', monospace","Times New Roman":"\'Times New Roman\', \'Times\', serif"}}')}},[[145,1,2]]]);
//# sourceMappingURL=main.b4a73042.chunk.js.map