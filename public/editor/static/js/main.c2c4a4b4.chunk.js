(this.webpackJsonpeditor=this.webpackJsonpeditor||[]).push([[0],{102:function(e,t,n){e.exports=n.p+"static/media/WhatsApp.0e878a0f.svg"},103:function(e,t,n){e.exports=n.p+"static/media/Twitter.1f5a8ef5.png"},104:function(e,t,n){e.exports=n.p+"static/media/Facebook.9ee5d43c.png"},105:function(e,t,n){e.exports=n.p+"static/media/Gmail.598d07e7.png"},106:function(e,t,n){e.exports=n.p+"static/media/Telegram.b4b9d64f.png"},107:function(e,t,n){e.exports=n.p+"static/media/Pinterest.717253e4.png"},108:function(e,t,n){e.exports=n.p+"static/media/Reddit.3826daa7.png"},109:function(e,t,n){e.exports=n.p+"static/media/Tumblr.93e9138a.png"},110:function(e,t,n){e.exports=n.p+"static/media/Skype.5a725d78.png"},111:function(e,t,n){e.exports=n.p+"static/media/FBMessenger.f8b3ffc7.png"},122:function(e){e.exports=JSON.parse('[{"selector":"#templates-button","content":"Templates & Stickers"},{"selector":"#textbox-button","content":"Textbox"},{"selector":"#undo-button","content":"Undo"}]')},140:function(e,t,n){e.exports=n(172)},171:function(e,t,n){},172:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(13),c=n.n(o),i=n(129),l=n(232),s=n(12),u=n(7),m=n(22),p=n(6),d=n.n(p),f=n(29),g=n(9),b=n(211),h=n(209),v=n(73),E=n.n(v),w=n(72),x=n.n(w),O=n(212),y=n(233),j=n(213),k=n(20),C=n(238);var S=function(e){var t=e.name,n=e.label,a=e.options,o=e.child,c=e.className,i=Object(k.d)(),l=i.control,s=i.watch;return r.a.createElement(k.a,{as:function(e){return r.a.createElement(y.a,Object.assign({select:!0,label:n,fullWidth:!0,className:c,value:s(t)},e),Object.entries(a).map((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return r.a.createElement(C.a,{key:a,value:a},r.a.createElement(o,{label:n,value:a}))})))},control:l,name:t})},N=n(210),T=n(239),L=Object(h.a)((function(e){return{switch:{width:"100%"}}}));var R=function(e){var t=e.name,n=e.label,a=e.className,o=Object(k.d)(),c=o.register,i=o.watch,l=o.setValue,s=L();return r.a.createElement(N.a,{control:r.a.createElement(T.a,{name:t,inputRef:c(),onChange:function(e,n){return l(t,n)},checked:i(t)}),label:n,className:"".concat(s.switch," ").concat(a)})},z=n(37),W=n(75),I=n(38);var B=function(e,t){return function(n){var o=n.open,c=n.onClose,i=Object(W.a)(n,["open","onClose"]),l=function e(t){var n=t.values;window.removeEventListener("popstate",e),window.location.hash="",c(n)};return Object(a.useEffect)((function(){o&&(window.location.hash="#"+t,window.addEventListener("popstate",l),I.a.modalview(t))}),[o]),r.a.createElement(e,Object(s.a)(Object(s.a)({},i),{},{open:o,onClose:function(e){return l({values:e})}}))}};new URLSearchParams(window.location.search).get("isAndroidApp");var A=function(e,t){if(0===e)return"";for(var n=[],a=-e;a<=e;a++)for(var r=-e;r<=e;r++)n.push("".concat(a,"px ").concat(r,"px 0 ").concat(t));return n.join(",")};var F=function(e){e.theme;var t=e.props;return{border:"none",fontSize:24,resize:"none",whiteSpace:"pre-wrap",zIndex:10,padding:6,display:"flex",flexDirection:"column",outline:!t.capture&&t.isFocused?"1px dashed gray":"none",userSelect:!t.isEditing&&"none",cursor:!t.isEditing&&"move",backgroundColor:t.settings.backgroundColor,color:t.settings.color,fontFamily:t.settings.fontFamily,textTransform:t.settings.caps&&"uppercase",fontWeight:t.settings.bold&&"bold",textShadow:A(parseInt(t.settings.textOutlineWidth),t.settings.textOutlineColor),textAlign:t.settings.textAlign,justifyContent:"top"===t.settings.verticalTextAlign?"flex-start":"bottom"===t.settings.verticalTextAlign?"flex-end":"center"===t.settings.verticalTextAlign?"center":null}},D=Object(h.a)((function(e){return{form:{padding:e.spacing(2),paddingTop:0},text:function(t){return Object(s.a)(Object(s.a)({},F({theme:e,props:t})),{},{padding:e.spacing(2),minHeight:40})},applyButton:{marginTop:e.spacing(2)},input:{marginTop:e.spacing(1)}}}));var P=B((function(e){var t=e.onClose,n=e.open,o=e.values,c=e.text,i=Object(k.c)(),l=i.getValues,u=i.handleSubmit,m=i.control,p=i.watch,d=i.reset,f=i.register,g=i.setValue,b=D({settings:p()}),h=function(){t(l())};return Object(a.useEffect)((function(){d(o)}),[o,d]),r.a.createElement(O.a,{onClose:h,open:n},r.a.createElement("div",{className:b.text},c),r.a.createElement(k.b,{control:m,watch:p,register:f,setValue:g},r.a.createElement("form",{onSubmit:u(h),className:b.form},r.a.createElement(S,{name:"color",label:"Color",options:z.colors,className:b.input,child:function(e){var t=e.label,n=e.value;return r.a.createElement("span",{style:{color:n}},t)}}),r.a.createElement(S,{name:"backgroundColor",label:"Background Color",options:Object(s.a)({None:"transparent"},z.colors),className:b.input,child:function(e){var t=e.label,n=e.value;return r.a.createElement("span",{style:{color:"transparent"!==n&&n}},t)}}),r.a.createElement(y.a,{inputRef:f(),name:"textOutlineWidth",label:"Outline Width",className:b.input,type:"number",fullWidth:!0}),r.a.createElement(S,{name:"textOutlineColor",label:"Outline Color",options:z.colors,className:b.input,child:function(e){var t=e.label,n=e.value;return r.a.createElement("span",{style:{color:n}},t)}}),r.a.createElement(S,{name:"textAlign",label:"Horizontal Align",options:z.textAlign,className:b.input,child:function(e){return e.label}}),r.a.createElement(S,{name:"verticalTextAlign",label:"Vertical Align",options:z.verticalTextAlign,className:b.input,child:function(e){return e.label}}),r.a.createElement(S,{name:"fontFamily",label:"Font Family",options:z.fontFamilies,className:b.input,child:function(e){var t=e.label,n=e.value;return r.a.createElement("span",{style:{fontFamily:n}},t)}}),r.a.createElement(R,{name:"bold",label:"Bold",className:b.input}),r.a.createElement(R,{name:"caps",label:"Caps",className:b.input}),r.a.createElement(j.a,{fullWidth:!0,className:b.applyButton,type:"submit"},"Apply"))))}),"settings");var M=function(e){var t=e.createSnapshot,n=e.applySnapshot,r=e.onSnapshotsEmpty,o=Object(a.useContext)(Jn),c=Object(a.useRef)([]),i=function(){var e=t();c.current.push(e),c.current.length>50&&c.current.shift()},l=function(){if(0!==c.current.length){var e=c.current.pop();n(e)}else r()};return Object(a.useEffect)((function(){return o.event.addEventListener("undo",l),o.event.addEventListener("addSnapshot",i),function(){o.event.removeEventListener("undo",l),o.event.removeEventListener("addSnapshot",i)}})),function(){o.event.dispatchEvent(new CustomEvent("addSnapshot"))}},H=n(56),V=n(98),_=n.n(V),U=n(100),q=n.n(U),J=n(34),G=n.n(J),Y=n(76),X=n.n(Y),K=n(99),$=n.n(K),Q=Object(h.a)((function(e){var t={backgroundColor:"rgba(255, 255, 255, .5)",border:"1px solid black",borderRadius:e.shape.borderRadius,display:function(e){return e.capture&&"none"}},n=Object(s.a)(Object(s.a)({},t),{},{zIndex:20,height:24,position:"absolute",cursor:"pointer"});return{container:{position:"absolute",top:0,display:"flex",flexDirection:"column",alignItems:"center",zIndex:10},rotationHandle:Object(s.a)(Object(s.a)({},t),{},{cursor:"pointer"}),button:Object(s.a)(Object(s.a)({},t),{},{padding:0,marginLeft:e.spacing(1),color:"black"}),action:{position:"absolute",transform:"translateY(-100%)",width:"100%",display:"flex",justifyContent:"center",height:24},resizeHandles:{position:"absolute",height:"100%",width:"100%"},vertical:Object(s.a)(Object(s.a)({},n),{},{top:"100%",left:"50%",transform:"translate(-50%, -50%)",cursor:"ns-resize"}),horizontal:Object(s.a)(Object(s.a)({},n),{},{top:"50%",left:"100%",transform:"translate(-50%, -50%) rotate(-90deg)",cursor:"ew-resize"}),diagonal:Object(s.a)(Object(s.a)({},n),{},{top:"100%",left:"100%",transform:"translate(-50%, -50%) rotate(-45deg)",cursor:"nwse-resize"})}}));var Z=function(e){var t=e.controls,n=e.defaultValues,o=e.Child;return function(e){var c=e.onRemove,i=e.handle,l=e.grid,m=e.canvas,p=e.template,f=e.id,h=Object(W.a)(e,["onRemove","handle","grid","canvas","template","id"]),v=Object(a.useRef)((null===p||void 0===p?void 0:p.rotation)||0),E=Object(a.useRef)(),w=Object(a.useRef)(),x=Object(a.useRef)(!1),O=Object(a.useState)({x:(null===p||void 0===p?void 0:p.x)||0,y:(null===p||void 0===p?void 0:p.y)||0}),y=Object(u.a)(O,2),j=y[0],k=y[1],C=Object(a.useState)((null===p||void 0===p?void 0:p.rotation)||0),S=Object(u.a)(C,2),N=S[0],T=S[1],L=Object(a.useState)((null===p||void 0===p?void 0:p.height)&&p.height-12||n.height),R=Object(u.a)(L,2),z=R[0],I=R[1],B=Object(a.useState)((null===p||void 0===p?void 0:p.width)&&p.width-12||n.width),A=Object(u.a)(B,2),F=A[0],D=A[1],P=Object(a.useState)(!1),V=Object(u.a)(P,2),U=V[0],J=V[1],Y=Object(a.useState)(!1),K=Object(u.a)(Y,2),Z=K[0],ee=K[1],te=Object(a.useState)(!0),ne=Object(u.a)(te,2),ae=ne[0],re=ne[1],oe=Q({capture:U}),ce=Object(a.useMemo)((function(){if(l.enabled)return l.fixedSize?[l.spacing,l.spacing]:[m.clientWidth/l.columns,m.clientHeight/l.rows]}),[l,m.clientWidth,m.clientHeight]),ie=M({createSnapshot:function(){return{width:F,height:z,position:j,rotation:N}},applySnapshot:function(e){D(e.width),I(e.height),k(e.position),T(e.rotation)},onSnapshotsEmpty:function(){p||c(f)}}),le=function(e,t){var n=w.current.getBoundingClientRect(),a=n.x+n.width/2,r=n.y+n.height/2,o=Math.atan2(r-t.y,a-t.x)-v.current;return l.enabled&&(o-=o%(Math.PI/4)),o},se=function(e,t){v.current=le(0,t)},ue=function(){i.onResize&&i.onResize()},me=function(e){var t=-N,n=e.deltaX*Math.sin(t)+e.deltaY*Math.cos(t),a=z+n;if(I(a),i.aspectRatio){var r=a*(1/i.aspectRatio);D(r)}},pe=function(e){var t=-N,n=e.deltaX*Math.cos(t)-e.deltaY*Math.sin(t),a=F+n;if(D(F+n),i.aspectRatio){var r=a*i.aspectRatio;I(r)}};return i&&(i.beforeCapturing=function(){J(!0)},i.afterCapturing=function(){J(!1)}),Object(a.useEffect)((function(){if(l.enabled){k({x:j.x-j.x%ce[0],y:j.y-j.y%ce[1]});var e=F-(F+12)%ce[0];D(e);var t=z-(z+12)%ce[1];I(t)}}),[l]),Object(a.useEffect)((function(){var e=function(e){Z&&!E.current.contains(e.target)&&ee(!1)};return window.addEventListener("click",e),window.addEventListener("touchstart",e),function(){window.removeEventListener("click",e),window.removeEventListener("touchstart",e)}})),Object(a.useEffect)((function(){Object(g.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(requestAnimationFrame);case 2:i.aspectRatio&&(F?I(F*i.aspectRatio):z&&D(z*(1/i.aspectRatio)));case 3:case"end":return e.stop()}}),e)})))()}),[]),r.a.createElement(H.DraggableCore,{onDrag:function(e,t){Z&&(x.current||(ie(),x.current=!0),k({x:j.x+t.deltaX,y:j.y+t.deltaY}))},onStop:function(){x.current=!1},grid:ce,handle:"#element-".concat(f),disabled:!ae},r.a.createElement("div",{className:"".concat(oe.container," element"),style:{transform:"translate(".concat(j.x,"px, ").concat(j.y,"px) rotate(").concat(N,"rad)"),transformOrigin:"center center",zIndex:n.zIndex||0},ref:E,"data-id":f},r.a.createElement(o,Object.assign({id:f,handle:i,template:p,onFocus:function(){ee(!0)},isFocused:Z,toggleMovement:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];re(e)},dimensions:Object(s.a)(Object(s.a)({width:F,height:z},j),{},{rotation:N}),ref:w,capture:U},h)),Z&&r.a.createElement(r.a.Fragment,null,t.includes("resize")&&r.a.createElement("div",{className:oe.resizeHandles},r.a.createElement(H.DraggableCore,{onDrag:function(e,t){me(t),ue()},onStart:ie,grid:ce},r.a.createElement("div",{className:oe.vertical},r.a.createElement(X.a,null))),r.a.createElement(H.DraggableCore,{onDrag:function(e,t){pe(t),ue()},onStart:ie,grid:ce},r.a.createElement("div",{className:oe.horizontal},r.a.createElement(X.a,null))),r.a.createElement(H.DraggableCore,{onDrag:function(e,t){pe(t),me(t),ue()},onStart:ie,grid:ce},r.a.createElement("div",{className:oe.diagonal},r.a.createElement(X.a,null)))),r.a.createElement("div",{className:oe.action},t.includes("rotate")&&r.a.createElement(H.DraggableCore,{onStart:function(){se.apply(void 0,arguments),ie()},onStop:function(e,t){v.current=le(0,t)},onDrag:function(e,t){T(le(0,t))}},r.a.createElement(_.a,{className:oe.rotationHandle})),t.includes("edit")&&r.a.createElement(b.a,{className:oe.button,onClick:i.onEditClicked},r.a.createElement($.a,null)),t.includes("settings")&&r.a.createElement(b.a,{className:oe.button,onClick:i.onSettingsClicked},r.a.createElement(q.a,null)),t.includes("remove")&&r.a.createElement(b.a,{className:oe.button,onClick:function(){c(f)}},r.a.createElement(G.a,null))))))}},ee=n(101),te=n.n(ee);var ne=function(e){var t=e.width,n=e.height,a=e.text,r=e.styles;if(t=Math.floor(t),n=Math.floor(n),t<=0||n<=0)return 0;var o=document.createElement("div");o.style.position="absolute",o.style.width=t+"px",o.style.height=n+"px",o.style.whiteSpace="pre-wrap",o.style.fontWeight=r.bold?"bold":null,o.style.textTransform=r.caps?"uppercase":null,Object.assign(o.style,r),o.textContent=a,document.body.appendChild(o);var c=function(e){te()(e,{multiLine:!0,minFontSize:1,maxFontSize:window.innerHeight});var t=e.querySelector("span"),n=getComputedStyle(t).fontSize;return parseInt(n)}(o);return document.body.removeChild(o),c},ae={color:"white",textOutlineWidth:2,textOutlineColor:"black",textAlign:"center",fontFamily:"'Impact', fantasy",backgroundColor:"transparent",verticalTextAlign:"center",bold:!1,caps:!0},re=Object(h.a)((function(e){return{input:function(t){return F({theme:e,props:t})}}}));var oe=Z({controls:["resize","rotate","edit","settings","remove"],defaultValues:{width:160,height:24,zIndex:2},Child:r.a.forwardRef((function(e,t){var n=e.id,o=e.handle,c=e.template,i=e.onFocus,l=e.isFocused,m=e.toggleMovement,p=e.dimensions,f=Object(s.a)({},ae);if(null===c||void 0===c?void 0:c.settings)for(var b in f)c.settings[b]&&(f[b]=c.settings[b]);var h=Object(a.useRef)(),v=Object(a.useRef)(!1),E=Object(a.useState)("Enter Text..."),w=Object(u.a)(E,2),x=w[0],O=w[1],y=Object(a.useState)(!1),j=Object(u.a)(y,2),k=j[0],C=j[1],S=Object(a.useState)(f),N=Object(u.a)(S,2),T=N[0],L=N[1],R=Object(a.useState)(!1),z=Object(u.a)(R,2),W=z[0],I=z[1],B=re({settings:T,isFocused:l,isEditing:W}),A=M({createSnapshot:function(){return{value:x,settings:T}},applySnapshot:function(e){O(e.value),h.current.textContent=e.value,L(e.settings)},onSnapshotsEmpty:function(){O("Enter Text..."),L(f)}}),F=function(){var e=Object(g.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function e(){m(!0),I(!1),h.current.removeEventListener("focusout",e)},v.current=!0,m(!1),I(!0),h.current.addEventListener("focusout",t),e.next=7,new Promise(requestAnimationFrame);case 7:h.current.focus(),x.toLowerCase()==="Enter Text...".toLowerCase()&&(h.current.textContent="");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();o&&(o.toObject=function(e){var t=e.image,n=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e/(n?t.clientWidth:t.clientHeight)*100+"%"},a=(null===c||void 0===c?void 0:c.settings)||{};for(var r in T)T[r]!==f[r]&&(a[r]=T[r]);return{value:x,width:n(p.width+12,!0),height:n(p.height+12),x:n(p.x,!0),y:n(p.y),rotation:p.rotation,settings:a}},o.onEditClicked=F,o.onSettingsClicked=function(){C(!0)});var D=Object(a.useMemo)((function(){return{width:p.width+"px",height:p.height+"px",fontSize:ne(Object(s.a)({styles:T,text:x},p))}}),[x,T,p]);return Object(a.useEffect)((function(){h.current.textContent=x}),[]),Object(a.useEffect)((function(){W||x||(O("Enter Text..."),h.current.textContent="Enter Text...")}),[W]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{contentEditable:W,id:"element-".concat(n),className:"textbox ".concat(B.input),style:D,ref:function(e){h.current=e,t.current=e},onMouseDown:i,onTouchStart:i,onInput:function(e){v.current&&(v.current=!1,A());var t=e.target.textContent;O(t)}}),r.a.createElement(P,{open:k,onClose:function(e){e&&(A(),L(e)),C(!1)},values:T,text:x}))}))}),ce=Object(h.a)((function(e){return{form:{padding:e.spacing(2),paddingTop:0},applyButton:{marginTop:e.spacing(2)},input:{marginTop:e.spacing(1)},image:{width:100},imageWrapper:{width:"100%",textAlign:"center",padding:e.spacing(1),boxSizing:"border-box"}}}));var ie=B((function(e){var t=e.onClose,n=e.open,o=e.values,c=e.src,i=Object(k.c)(),l=i.getValues,s=i.handleSubmit,u=i.control,m=i.watch,p=i.reset,d=i.register,f=i.setValue,g=ce(),b=function(){t(l())};return Object(a.useEffect)((function(){p(o)}),[o,p]),r.a.createElement(O.a,{onClose:b,open:n},r.a.createElement("div",{className:g.imageWrapper},r.a.createElement("img",{src:c,alt:"",className:g.image,style:{transform:"scaleX(".concat(m("flip")?"-1":"1",")")}})),r.a.createElement(k.b,{control:u,watch:m,register:d,setValue:f},r.a.createElement("form",{onSubmit:s(b),className:g.form},r.a.createElement(R,{name:"keepAspectRatio",label:"Keep Aspect Ratio",className:g.input}),r.a.createElement(R,{name:"flip",label:"Flip",className:g.input}),r.a.createElement(j.a,{fullWidth:!0,className:g.applyButton,type:"submit"},"Apply"))))}),"settings"),le={keepAspectRatio:!0,flip:!1},se=Object(h.a)((function(e){return{image:{zIndex:1,cursor:"move"}}}));var ue=Z({controls:["resize","rotate","remove","settings"],defaultValues:{width:100,zIndex:1},Child:r.a.forwardRef((function(e,t){var n=e.src,o=e.id,c=e.onFocus,i=e.dimensions,l=e.handle,s=se(),m=Object(a.useRef)(),p=Object(a.useState)(le),d=Object(u.a)(p,2),f=d[0],g=d[1],b=Object(a.useState)(!1),h=Object(u.a)(b,2),v=h[0],E=h[1],w={width:i.width+"px",height:i.height+"px",transform:"scaleX(".concat(f.flip?"-1":"1",")")};return l&&(l.onSettingsClicked=function(){return E(!0)},f.keepAspectRatio?Object.defineProperty(l,"aspectRatio",{get:function(){var e,t;return(null===(e=m.current)||void 0===e?void 0:e.naturalHeight)/(null===(t=m.current)||void 0===t?void 0:t.naturalWidth)},configurable:!0}):delete l.aspectRatio),r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:n,alt:"",id:"element-".concat(o),ref:function(e){t.current=e,m.current=e},onMouseDown:c,onTouchStart:c,style:w,className:s.image,draggable:"false"}),r.a.createElement(ie,{open:v,onClose:function(e){e&&g(e),E(!1)},values:f,src:n}))}))});function me(e,t,n,a,r){e.beginPath(),e.moveTo(t,n),e.lineTo(a,r),e.stroke()}var pe=Object(h.a)((function(e){return{canvas:{position:"absolute",pointerEvents:"none",touchAction:"none"}}}));var de=function(e){var t,n=e.config,o=e.canvas,c=e.border,i=pe(),l=Object(a.useContext)(Jn),s=Object(a.useRef)(),u=function(){var e=Object(g.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(requestAnimationFrame);case 2:t=o.getBoundingClientRect(),s.current.width=t.width,s.current.height=t.height;case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(e,n){for(var a=0;a<s.current.width;a+=e)me(t,a,0,a,s.current.height);for(var r=0;r<s.current.height;r+=n)me(t,0,r,s.current.width,r)},p=function(){(t=s.current.getContext("2d")).strokeStyle=n.color,n.fixedSpacing?n.spacing&&m(n.spacing,n.spacing):function(){if(n.columns&&n.rows&&o){var e=o.clientWidth/n.columns,t=o.clientHeight/n.rows;m(e,t)}}()};return Object(a.useEffect)((function(){o&&u().then(p)}),[o,n,l.image,c]),r.a.createElement("canvas",{ref:s,style:{display:!n.enabled&&"none"},className:i.canvas})},fe=n(214),ge=n(215),be=Object(h.a)((function(e){return{form:{padding:e.spacing(2),paddingTop:0},applyButton:{marginTop:e.spacing(2)},input:{marginTop:e.spacing(1)}}}));var he=B((function(e){var t=e.onClose,n=e.open,o=e.values,c=Object(k.c)(),i=c.register,l=c.getValues,s=c.handleSubmit,u=c.control,m=c.watch,p=c.reset,d=c.setValue,f=be(),g=function(){var e=l();t(e)};return Object(a.useEffect)((function(){p(o)}),[o,p]),r.a.createElement(O.a,{onClose:g,open:n},r.a.createElement(fe.a,null,"Set Border"),r.a.createElement(k.b,{control:u,watch:m,register:i,setValue:d},r.a.createElement("form",{onSubmit:s(g),className:f.form},r.a.createElement(ge.a,null,r.a.createElement(y.a,{inputRef:i(),className:f.input,fullWidth:!0,type:"number",name:"size",label:"Size (px)"}),r.a.createElement(S,{name:"color",label:"Color",options:z.colors,className:f.input,child:function(e){var t=e.label,n=e.value;return r.a.createElement("span",{style:{color:n}},t)}}),r.a.createElement(R,{name:"top",label:"Top",className:f.input}),r.a.createElement(R,{name:"bottom",label:"Bottom",className:f.input}),r.a.createElement(R,{name:"left",label:"Left",className:f.input}),r.a.createElement(R,{name:"right",label:"Right",className:f.input}),r.a.createElement(j.a,{fullWidth:!0,className:f.applyButton,type:"submit"},"Apply")))))}),"border"),ve=n(220),Ee=n(132),we=n(46),xe=n(240),Oe=n(114),ye=n.n(Oe),je=n(113),ke=n.n(je),Ce=n(112),Se=n.n(Ce),Ne=n(115),Te=n.n(Ne),Le=n(235),Re=n(102),ze=n.n(Re),We=n(103),Ie=n.n(We),Be=n(104),Ae=n.n(Be),Fe=n(105),De=n.n(Fe),Pe=n(106),Me=n.n(Pe),He=n(107),Ve=n.n(He),_e=n(108),Ue=n.n(_e),qe=n(109),Je=n.n(qe),Ge=n(110),Ye=n.n(Ge),Xe=n(111),Ke=n.n(Xe),$e=Object(h.a)((function(e){return{innerDrawer:{borderRadius:"16px 16px 0 0"},title:{paddingBottom:e.spacing(1)},iconsContainer:{display:"flex",padding:"0 ".concat(e.spacing(1),"px ").concat(e.spacing(2),"px ").concat(e.spacing(1),"px"),overflowX:"scroll"},icon:{width:40}}}));var Qe=function(e){var t=e.open,n=e.link,o=e.onClose,c=e.onOpen;n=encodeURIComponent(n);var i=Object(a.useContext)(Jn),l=$e(),s=function(e,t){return function(){i.event.dispatchEvent(new CustomEvent("share",{detail:{label:t}})),window.open(e.replace(/{}/g,n))}};return r.a.createElement(Le.a,{disableDiscovery:!0,disableSwipeToOpen:!0,open:t,onClose:o,onOpen:c,anchor:"bottom",PaperProps:{className:l.innerDrawer}},r.a.createElement(fe.a,{className:l.title},"Share Link"),r.a.createElement("div",{className:l.iconsContainer},r.a.createElement(b.a,{onClick:s("whatsapp://send?text={}","WhatsApp")},r.a.createElement("img",{src:ze.a,alt:"WhatsApp",className:l.icon})),r.a.createElement(b.a,{onClick:s("https://www.facebook.com/sharer/sharer.php?u={}","Facebook")},r.a.createElement("img",{src:Ae.a,alt:"Facebook",className:l.icon})),r.a.createElement(b.a,{onClick:s("http://twitter.com/intent/tweet?text={}","Twitter")},r.a.createElement("img",{src:Ie.a,alt:"Twitter",className:l.icon})),r.a.createElement(b.a,{onClick:s("https://telegram.me/share?url={}","Telegram")},r.a.createElement("img",{src:Me.a,alt:"Telegram",className:l.icon})),r.a.createElement(b.a,{onClick:s("https://web.skype.com/share?url={}","Skype")},r.a.createElement("img",{src:Ye.a,alt:"Skype",className:l.icon})),r.a.createElement(b.a,{onClick:s("fb-messenger://share?link={}","FB-Messenger")},r.a.createElement("img",{src:Ke.a,alt:"Messenger",className:l.icon})),r.a.createElement(b.a,{onClick:s("https://www.pinterest.com/pin/create/button?url={}","Pinterest")},r.a.createElement("img",{src:Ve.a,alt:"Pinterest",className:l.icon})),r.a.createElement(b.a,{onClick:s("https://www.reddit.com/submit?url={}","Reddit")},r.a.createElement("img",{src:Ue.a,alt:"Reddit",className:l.icon})),r.a.createElement(b.a,{onClick:s("https://www.tumblr.com/widgets/share/tool?posttype=link&canonicalUrl={}","Tumblr")},r.a.createElement("img",{src:Je.a,alt:"Tumblr",className:l.icon})),r.a.createElement(b.a,{onClick:s("mailto:?body={}","Mail")},r.a.createElement("img",{src:De.a,alt:"Email",className:l.icon}))))},Ze=n(217),et=n(218),tt=n(219),nt=Object(h.a)((function(e){return{innerDialog:{"& p":{color:e.palette.text.primary}},link:{color:e.palette.text.secondary}}}));var at=function(e){var t=e.open,n=e.onAccept,o=e.onReject,c=Object(a.useRef)(),i=nt(),l=Object(a.useState)(!1),s=Object(u.a)(l,2),m=s[0],p=s[1];Object(a.useEffect)((function(){t&&Object(g.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(requestAnimationFrame);case 2:if(c.current){e.next=4;break}return e.abrupt("return");case 4:t=c.current.querySelector("."+i.innerDialog),n=function e(){t.getBoundingClientRect().height+t.scrollTop>=t.scrollHeight&&(p(!0),t.removeEventListener("scroll",e))},t.addEventListener("scroll",n),n();case 8:case"end":return e.stop()}}),e)})))()}),[t]);var f=function(){p(!1),o()};return r.a.createElement(O.a,{open:t,onClose:f,ref:function(e){return c.current=e}},r.a.createElement(fe.a,null,"Terms and conditions"),r.a.createElement(Ze.a,{className:i.innerDialog},r.a.createElement(et.a,null,"By creating a link for your image, it will be uploaded to our servers and therefor be listed in our ",r.a.createElement("a",{href:"/archive",target:"_blank",className:i.link},"archive"),". We will store your IP address and are allowed to hand it to third-parties if you violate against these terms and conditions."),r.a.createElement(et.a,null,"Your image must meet the following terms and conditions:"),r.a.createElement(et.a,null,"Only upload images that are relevant and appropriate to the product and that meet intellectual property, privacy, and other applicable laws."),r.a.createElement(et.a,null,"You must hold the copyright of the images that you are uploading. Images that are considered to infringe the copyright or trademarks of other individuals, organizations or companies will not be permitted and will be removed. You must acknowledge that you have sufficient written permission (if necessary) of any recognizable locations or people appearing in the image to be able to grant us permission to use it on our website. If you think that your copyright to an image on our website has been infringed, please contact us."),r.a.createElement(et.a,null,"You must not upload photographs that contain objectionable content, including but not limited to nudity, violence, and other offensive, illegal or inappropriate images. Also, images cannot contain advertisement or links."),r.a.createElement(et.a,null,"By uploading an image to easymeme69.com, you permit us, the unrestricted, perpetual, worldwide, non-transferable, royalty-free right and license to display, exhibit, transmit, reproduce, record, digitize, modify, alter, adapt, create derivative works, exploit and otherwise use and permit others to use in connection with the image uploaded, in all languages and all media, whether now known or hereinafter devised, including without limitation on the Internet, on mobile platforms and/or devices, in printed materials, and in the advertising, publicity and promotion thereof."),r.a.createElement(et.a,null,"You should bear in mind that by uploading an image to our website, you agree to indemnify us from any liability resulting from breaches of copyright of the image existing online on our website in digital form."),r.a.createElement(et.a,null,"You also understand and agree that nothing in this agreement obligates easymeme69.com to display your images. Images must be relevant and appropriate."),r.a.createElement(et.a,null,"easymeme69.com reserves the right in its sole and absolute discretion to alter these terms at any time for any reason without prior notice, or to terminate the image upload service for any reason at any time without prior notice."),r.a.createElement(et.a,null,"easymeme69.com also reserves the right to reject and remove any uploaded images from its servers, for any reason, at any time, without prior notice.")),r.a.createElement(tt.a,null,r.a.createElement(j.a,{color:"primary",onClick:f,disabled:!m},"decline"),r.a.createElement(j.a,{color:"primary",onClick:n,disabled:!m},"agree")))};var rt=function(e,t){for(var n=e.split(","),a=n[0].match(/:(.*?);/)[1],r=atob(n[1]),o=r.length,c=new Uint8Array(o);o--;)c[o]=r.charCodeAt(o);return new File([c],t,{type:a})},ot="caches"in window;function ct(e){return it.apply(this,arguments)}function it(){return(it=Object(g.a)(d.a.mark((function e(t){var n,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ot){e.next=4;break}return e.next=3,fetch(t);case 3:return e.abrupt("return",e.sent);case 4:return e.next=6,caches.open("v1");case 6:return n=e.sent,e.next=9,n.match(t);case 9:if(a=e.sent,navigator.onLine){e.next=12;break}return e.abrupt("return",a);case 12:return e.next=14,fetch(t);case 14:return r=e.sent,n.put(t,r.clone()),e.abrupt("return",r);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lt(e){return st.apply(this,arguments)}function st(){return(st=Object(g.a)(d.a.mark((function e(t){var n,a,r,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ot){e.next=2;break}return e.abrupt("return",t);case 2:return e.next=4,caches.open("v1");case 4:return n=e.sent,e.next=7,n.match(t);case 7:if(a=e.sent){e.next=10;break}return e.abrupt("return",t);case 10:return e.next=12,a.blob();case 12:return r=e.sent,o=URL.createObjectURL(r),e.abrupt("return",o);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ut(e){return mt.apply(this,arguments)}function mt(){return(mt=Object(g.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ot){e.next=2;break}return e.abrupt("return");case 2:if(0!==t.indexOf("blob")){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,caches.open("v1");case 6:return n=e.sent,e.next=9,n.match(t);case 9:if(e.sent){e.next=15;break}return e.next=13,fetch(t);case 13:a=e.sent,n.put(t,a);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pt(e){return"".concat(window.location.protocol,"//").concat(window.location.hostname).concat("","/api").concat(e)}var dt=function(e){return fetch(pt("/templates"),{method:"POST",body:e})},ft=function(e){return fetch(pt("/templates"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})},gt=function(e){return fetch(pt("/auth/authorize"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e})}).then((function(e){return e.json()}))},bt=function(e){return fetch(pt("/stickers"),{method:"POST",body:e})},ht=function(e){return fetch(pt("/stickers/register-use"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})})},vt=function(e){return fetch("/upload",{method:"POST",body:e})};function Et(){return(Et=Object(g.a)(d.a.mark((function e(t){var n,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("file",t),e.prev=2,e.next=5,vt(n);case 5:return a=e.sent,e.next=8,a.json();case 8:return r=e.sent,e.abrupt("return","https://"+window.location.host+r.path);case 12:return e.prev=12,e.t0=e.catch(2),console.error(e.t0),e.abrupt("return");case 16:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}var wt=function(e){return Et.apply(this,arguments)},xt=Object(h.a)((function(e){var t={margin:e.spacing(2),marginTop:0};return{spacing:t,title:{textAlign:"center"},innerDialog:{margin:e.spacing(1),width:function(e){return!e.imageData&&"100%"},height:function(e){return!e.imageData&&"50%"},display:function(e){return!e.imageData&&"flex"},justifyContent:function(e){return!e.imageData&&"center"},alignItems:function(e){return!e.imageData&&"center"}},image:{width:"90%",margin:"".concat(e.spacing(2),"px auto")},uploadButtonWrapper:Object(s.a)(Object(s.a)({},t),{},{position:"relative"}),buttonLoader:{position:"absolute",top:"50%",left:"50%",margin:"-12px 0 0 -12px"},linkWrapper:{margin:e.spacing(2),marginTop:0,padding:"0 ".concat(e.spacing(1),"px"),display:"flex",justifyContent:"space-between",alignItems:"center"},link:{overflowX:"overlay",padding:"".concat(e.spacing(1),"px 0")},shareButton:{padding:e.spacing(1)},snackbarClose:{color:e.palette.primary.variant}}}));var Ot=B((function(e){var t=e.open,n=e.onClose,o=e.imageData,c=e.elements,i=Object(a.useContext)(Jn),l=xt({imageData:o}),s=Object(k.c)(),m=s.register,p=s.getValues,h=Object(a.useRef)(!1),v=Object(a.useRef)(),E=Object(a.useRef)(),w=Object(a.useState)(),x=Object(u.a)(w,2),C=x[0],S=x[1],N=Object(a.useState)(!1),T=Object(u.a)(N,2),L=T[0],R=T[1],z=Object(a.useState)(!1),W=Object(u.a)(z,2),I=W[0],B=W[1],A=Object(a.useState)(!1),F=Object(u.a)(A,2),D=F[0],P=F[1],M=Object(a.useState)(!1),H=Object(u.a)(M,2),V=H[0],_=H[1],U=Object(a.useState)(!1),q=Object(u.a)(U,2),J=q[0],Y=q[1],X=Object(a.useState)(!1),K=Object(u.a)(X,2),$=K[0],Q=K[1],Z=!!i.currentTemplate,ee=function(e,t){return i.event.dispatchEvent(new CustomEvent(e,{detail:t}))},te=function(){var e=Object(g.a)(d.a.mark((function e(){var t,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.currentTemplate){e.next=4;break}if(h.current){e.next=4;break}return e.next=4,r=i.currentTemplate.id,fetch(pt("/templates/register-use"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r})});case 4:t=Object(f.a)(c),e.prev=5,t.s();case 7:if((n=t.n()).done){e.next=14;break}if("sticker"!==(a=n.value).type||void 0===a.data.id){e.next=12;break}return e.next=12,ht(a.data.id);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),t.e(e.t0);case 19:return e.prev=19,t.f(),e.finish(19);case 22:h.current=!0;case 23:case"end":return e.stop()}var r}),e,null,[[5,16,19,22]])})));return function(){return e.apply(this,arguments)}}(),ne=function(){P(!0),ee("openShareModal")},ae=function(){var e=Object(g.a)(d.a.mark((function e(){var t,n,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p("label")){e.next=2;break}return e.abrupt("return");case 2:B(!0),t=p("label"),n=rt(i.image,"image.png"),a={textboxes:window.getTextboxes(),border:window.getBorder()},(r=new FormData).append("password",i.password),r.append("image",n),r.append("label",t),r.append("meta_data",JSON.stringify(a)),dt(r).then((function(e){e.ok&&(Q(!0),Y(!0))})).finally((function(){B(!1)}));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(g.a)(d.a.mark((function e(){var t,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p("label")){e.next=2;break}return e.abrupt("return");case 2:B(!0),t=p("label"),n={textboxes:window.getTextboxes(),border:window.getBorder()},a={password:i.password,id:i.currentTemplate.id,label:t,meta_data:n},ft(a).then((function(e){e.ok&&(Q(!0),Y(!0))})).finally((function(){B(!1)}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){t||S(null)}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{open:t,onClose:function(){h.current=!1,Q(!1),n()},PaperProps:{className:l.innerDialog}},o?r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{alt:"",src:o,className:l.image}),r.a.createElement(Ee.a,{variant:"outlined",className:l.linkWrapper,style:{display:!C&&"none"}},r.a.createElement(we.a,{variant:"body1",className:l.link},C),r.a.createElement(b.a,{className:l.shareButton,onClick:ne},r.a.createElement(Se.a,null))),!C&&r.a.createElement("div",{className:l.uploadButtonWrapper},r.a.createElement(j.a,{startIcon:r.a.createElement(ke.a,null),color:"primary",variant:"outlined",onClick:function(){_(!0),new Promise((function(e,t){v.current=e,E.current=t})).then(Object(g.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!1),R(!0),t=rt(o,"image.png"),e.next=5,wt(t);case 5:n=e.sent,R(!1),S(n),te(),ee("uploadImage",{link:n});case 10:case"end":return e.stop()}}),e)})))).catch((function(){_(!1)}))},disabled:L,fullWidth:!0},"Create Link"),L&&r.a.createElement(ve.a,{size:24,className:l.buttonLoader})),r.a.createElement(j.a,{startIcon:r.a.createElement(ye.a,null),color:"primary",variant:"outlined",className:l.spacing,onClick:function(){!function(e){var t=document.createElement("a");t.href=e,t.download="download.png",document.body.appendChild(t),t.click(),document.body.removeChild(t)}(o),te(),ee("downloadImage")}},"Download"),i.password&&!$&&r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{inputRef:m(),name:"label",label:"Label",className:l.spacing,variant:"outlined",defaultValue:i.label}),r.a.createElement("div",{className:l.uploadButtonWrapper},r.a.createElement(j.a,{startIcon:r.a.createElement(Te.a,null),color:"primary",variant:"outlined",onClick:Z?re:ae,disabled:I,fullWidth:!0},Z?"Update":"Publish"," Template"),I&&r.a.createElement(ve.a,{size:24,className:l.buttonLoader}))),r.a.createElement(Qe,{open:D,link:C,onOpen:ne,onClose:function(){return P(!1)}})):r.a.createElement(ve.a,null)),r.a.createElement(at,{open:V,onAccept:v.current,onReject:E.current}),r.a.createElement(xe.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:J,autoHideDuration:3e3,onClose:function(){return Y(!1)},message:"Uploaded",action:r.a.createElement(b.a,{onClick:function(){return Y(!1)},className:l.snackbarClose},r.a.createElement(G.a,null))}))}),"image"),yt=Object(h.a)((function(e){return{form:{padding:e.spacing(2),paddingTop:0},applyButton:{marginTop:e.spacing(2)},input:{marginTop:e.spacing(1)}}}));var jt=B((function(e){var t=e.onClose,n=e.open,o=e.values,c=Object(k.c)(),i=c.register,l=c.getValues,s=c.handleSubmit,m=c.control,p=c.watch,d=c.reset,f=c.setValue,g=yt(),b=Object(a.useState)(!1),h=Object(u.a)(b,2),v=h[0],E=h[1],w=function(){var e=l();!e.fixedSpacing||e.spacing?(E(!1),e.spacing=parseInt(e.spacing),t(e)):E(!0)};return Object(a.useEffect)((function(){d(o)}),[o,d]),r.a.createElement(O.a,{onClose:w,open:n},r.a.createElement(fe.a,null,"Set Grid"),r.a.createElement(k.b,{control:m,watch:p,register:i,setValue:f},r.a.createElement("form",{onSubmit:s(w),className:g.form},r.a.createElement(ge.a,null,r.a.createElement(R,{name:"enabled",label:"Enabled",className:g.input}),r.a.createElement(R,{name:"fixedSpacing",label:"Fixed Spacing",className:g.input}),r.a.createElement(S,{name:"color",label:"Color",options:z.colors,className:g.input,child:function(e){var t=e.label,n=e.value;return r.a.createElement("span",{style:{color:n}},t)}}),r.a.createElement(y.a,{inputRef:i(),className:g.input,fullWidth:!0,type:"number",name:"columns",label:"Columns"}),r.a.createElement(y.a,{inputRef:i(),className:g.input,fullWidth:!0,type:"number",name:"rows",label:"Rows"}),r.a.createElement(y.a,{inputRef:i(),className:g.input,fullWidth:!0,type:"number",name:"spacing",label:"Spacing (px)",error:v}),r.a.createElement(j.a,{fullWidth:!0,className:g.applyButton,type:"submit"},"Apply")))))}),"grid"),kt=function(e){return new Promise((function(t){var n=new FileReader;n.onload=function(){return t(n.result)},n.readAsDataURL(e)}))},Ct=function(e){return new Promise((function(t){var n=document.createElement("input");n.type="file",n.accept=e,document.body.appendChild(n),n.onchange=function(e){var n=e.target.files[0];t(n)},n.click(),n.remove()}))},St=n(116),Nt=n.n(St);function Tt(e){var t=e.querySelectorAll(".textbox");t.forEach((function(e){var t=Math.min(e.offsetHeight/18,6);e.style.padding="".concat(6-t,"px ").concat(6,"px ").concat(6+t,"px")})),t.forEach((function(e){e.style.fontFeatureSettings='"liga" 0'}));var n=Array.from(e.querySelectorAll(".element"));if(n.length>0){var a=n[0].parentNode;n.map((function(e){return a.removeChild(e)})).reverse().map((function(e){return a.appendChild(e)}))}var r=e.querySelector(".meme-image");r.style.minWidth=r.clientWidth+1+"px",r.style.minHeight=r.clientHeight+1+"px"}function Lt(){return(Lt=Object(g.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nt()(t,{useCORS:!0,onclone:Tt});case 2:return n=e.sent,e.abrupt("return",n.toDataURL());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Rt=function(e){return Lt.apply(this,arguments)};function zt(e){var t=getComputedStyle(e);return{width:e.clientWidth-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight),height:e.clientHeight-parseFloat(t.paddingTop)-parseFloat(t.paddingBottom)}}function Wt(){return It.apply(this,arguments)}function It(){return(It=Object(g.a)(d.a.mark((function e(){var t,n,a=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.length>0&&void 0!==a[0]?a[0]:1,n=0;case 2:if(!(n<t)){e.next=8;break}return e.next=5,new Promise(requestAnimationFrame);case 5:n++,e.next=2;break;case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Bt={size:0,top:!0,bottom:!0,left:!1,right:!1,color:"white"},At={enabled:!1,fixedSpacing:!1,color:"black",spacing:void 0,columns:16,rows:16},Ft=Object(h.a)((function(e){return{canvasWrapper:{position:"absolute",top:0,bottom:0,left:0,right:0,backgroundColor:e.palette.background.default,padding:e.spacing(1),paddingBottom:e.mixins.toolbar.minHeight+e.spacing(1),display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden"},canvas:{position:"relative",display:"flex"}}}));var Dt=function(){var e=Object(a.useContext)(Jn),t=Ft(),n=Object(a.useRef)(0),o=Object(a.useRef)(),c=Object(a.useRef)(),i=Object(a.useRef)(),l=Object(a.useRef)({}),s=Object(a.useState)([]),p=Object(u.a)(s,2),h=p[0],v=p[1],w=Object(a.useState)(Bt),O=Object(u.a)(w,2),y=O[0],j=O[1],k=Object(a.useState)(At),C=Object(u.a)(k,2),S=C[0],N=C[1],T=Object(a.useState)(!1),L=Object(u.a)(T,2),R=L[0],z=L[1],W=Object(a.useState)(!1),I=Object(u.a)(W,2),B=I[0],A=I[1],F=Object(a.useState)(!1),D=Object(u.a)(F,2),P=D[0],M=D[1],H=Object(a.useState)(null),V=Object(u.a)(H,2),_=V[0],U=V[1];l.current={};var q,J=Object(f.a)(h);try{for(J.s();!(q=J.n()).done;){var G=q.value;l.current[G.key]={}}}catch(pe){J.e(pe)}finally{J.f()}var Y=function(){var e=Object(g.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(!1),e.next=3,Wt(3);case 3:U(null);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(e){var t=h.filter((function(t){return t.key!==e}));v(t),delete l.current[e]},K=function(){v([]),l.current={}},$=function(e,t){return{type:e,data:t,key:n.current++}},Q=function(e){var t=e.template,n=$("textbox",{template:t});return v([].concat(Object(m.a)(h),[n])),n},Z=function(e,t){var n=$("sticker",{src:e,id:t});v([].concat(Object(m.a)(h),[n]))},ee=function(){var e=Object(g.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ct("image/*");case 2:return t=e.sent,e.next=5,kt(t);case 5:n=e.sent,Z(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=Object(g.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object.values(l.current).forEach((function(e){return e.beforeCapturing()})),e.next=3,Wt(3);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var t=Object(g.a)(d.a.mark((function t(){var n,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ct("image/*");case 2:return n=t.sent,t.next=5,kt(n);case 5:a=t.sent,K(),e.set({currentTemplate:null,image:a});case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ae=function(){var e=Object(g.a)(d.a.mark((function e(){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(!0),e.next=3,Wt(1);case 3:return n=document.querySelector(".".concat(t.canvas)),e.next=6,te(n);case 6:return e.next=8,Rt(n);case 8:a=e.sent,U(a),Object.values(l.current).forEach((function(e){return e.afterCapturing()}));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){z(!0)},ce=function(){M(!0)},ie=function(){var t=Object(g.a)(d.a.mark((function t(n){var a,r,c,i,l,s,u,m;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.detail.template,e.set({currentTemplate:a,image:a.image_url,label:a.label}),t.next=4,Wt(2);case 4:if(r=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(/\d+%/.test(e[t])){var a=parseFloat(e[t]);e[t]=(n?o.current.clientWidth:o.current.clientHeight)*(a/100)}},K(),h=[],a.meta_data){t.next=9;break}return t.abrupt("return");case 9:if(c=a.meta_data.border,i=a.meta_data.textboxes,"string"===typeof(null===c||void 0===c?void 0:c.size)&&r(c,"size"),j(c||Bt),i){l=Object(f.a)(i);try{for(l.s();!(s=l.n()).done;)u=s.value,r(u,"width",!0),r(u,"height"),r(u,"x",!0),r(u,"y"),m=Q({template:u}),h.push(m)}catch(pe){l.e(pe)}finally{l.f()}}v(h);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),le=function(e){var t=e.detail.sticker;Z(t.image_url,t.id)},se=function(){return h.filter((function(e){return"textbox"===e.type})).map((function(e){return e.key})).map((function(e){return l.current[e].toObject({image:o.current})}))},me=function(){return y};return Object(a.useEffect)((function(){return e.event.addEventListener("importImage",ne),e.event.addEventListener("addTextbox",Q),e.event.addEventListener("importSticker",ee),e.event.addEventListener("generateImage",ae),e.event.addEventListener("setBorder",re),e.event.addEventListener("setGrid",ce),e.event.addEventListener("loadTemplate",ie),e.event.addEventListener("loadSticker",le),window.getTextboxes=se,window.getBorder=me,function(){e.event.removeEventListener("importImage",ne),e.event.removeEventListener("addTextbox",Q),e.event.removeEventListener("importSticker",ee),e.event.removeEventListener("generateImage",ae),e.event.removeEventListener("setBorder",re),e.event.removeEventListener("setGrid",ce),e.event.removeEventListener("loadTemplate",ie),e.event.removeEventListener("loadSticker",le)}})),Object(a.useEffect)((function(){Object(g.a)(d.a.mark((function e(){var t,n,a,r,l,s,u,m,p,f;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wt(1);case 2:if(o.current&&i.current&&c.current){e.next=4;break}return e.abrupt("return");case 4:t=o.current.naturalWidth,n=o.current.naturalHeight,a=n/t,r=zt(i.current),l=r.width,s=r.height,l*a>s?(32,p=(y.top||0+y.bottom||0)*y.size,u=(m=s-32-p)*(1/a)):(f=(y.left||0+y.right||0)*y.size,m=(u=l-f)*a),u=Math.floor(u),m=Math.floor(m),o.current.style.width=u+"px",o.current.style.height=m+"px",c.current.style.width=u+"px",c.current.style.height=m+"px";case 15:case"end":return e.stop()}}),e)})))()}),[e.image,o,i,c,y]),r.a.createElement("div",{className:t.canvasWrapper,ref:i},r.a.createElement("div",{className:t.canvas,style:{paddingTop:y.top&&y.size+"px",paddingBottom:y.bottom&&y.size+"px",paddingLeft:y.left&&y.size+"px",paddingRight:y.right&&y.size+"px",backgroundColor:e.image&&y.color,width:!e.image&&"unset"},ref:c},e.image?r.a.createElement("img",{alt:"",src:e.image,className:"meme-image",ref:o,draggable:"false"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{onClick:function(){return e.event.dispatchEvent(new CustomEvent("openTemplatesDialog"))}},r.a.createElement(x.a,{fontSize:"large"})),r.a.createElement(b.a,{onClick:ne},r.a.createElement(E.a,{fontSize:"large"}))),h.map((function(e){var t=e.type,n=e.key,a=e.data;if("textbox"===t)return r.a.createElement(oe,{key:n,id:n,onRemove:X,handle:l.current[n],grid:S,template:a.template,canvas:c.current});if("sticker"===t)return r.a.createElement(ue,{key:n,id:n,onRemove:X,handle:l.current[n],grid:S,canvas:c.current,src:a.src});throw new Error("Type "+t+" is not defined")}))),r.a.createElement(de,{config:S,canvas:c.current,border:y}),r.a.createElement(he,{open:R,onClose:function(e){e&&j(e),z(!1)},values:y}),r.a.createElement(jt,{open:P,onClose:function(e){e&&N(e),M(!1)},values:S}),r.a.createElement(Ot,{open:B,onClose:Y,imageData:_,elements:h}))},Pt=n(229),Mt=n(230),Ht=n(228),Vt=n(125),_t=n.n(Vt),Ut=n(126),qt=n.n(Ut),Jt=n(128),Gt=n.n(Jt),Yt=n(124),Xt=n.n(Yt),Kt=n(127),$t=n.n(Kt),Qt=n(130),Zt=n(222),en=n(223),tn=n(117),nn=n.n(tn),an=n(118),rn=n.n(an),on=n(119),cn=n.n(on),ln=Object(h.a)((function(e){return{icon:{minWidth:e.spacing(4)}}}));var sn=function(e){var t=e.open,n=e.anchorEl,o=e.onClose,c=Object(a.useContext)(Jn),i=ln(),l=function(e){return function(){c.event.dispatchEvent(new CustomEvent(e)),o()}};return r.a.createElement(Qt.a,{open:t,anchorEl:n,onClose:o,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}},r.a.createElement(C.a,{onClick:l("setBorder")},r.a.createElement(Zt.a,{className:i.icon},r.a.createElement(nn.a,{fontSize:"small"})),r.a.createElement(en.a,{primary:"Border"})),r.a.createElement(C.a,{onClick:l("setGrid")},r.a.createElement(Zt.a,{className:i.icon},r.a.createElement(rn.a,{fontSize:"small"})),r.a.createElement(en.a,{primary:"Grid"})),r.a.createElement(C.a,{onClick:l("importSticker")},r.a.createElement(Zt.a,{className:i.icon},r.a.createElement(cn.a,{fontSize:"small"})),r.a.createElement(en.a,{primary:"Import Sticker"})),r.a.createElement(C.a,{onClick:l("importImage")},r.a.createElement(Zt.a,{className:i.icon},r.a.createElement(E.a,{fontSize:"small"})),r.a.createElement(en.a,{primary:c.image?"Replace Meme":"Import Meme"})))},un=n(216),mn=n(234),pn=n(231),dn=n(120),fn=n.n(dn),gn=n(237),bn=n(224),hn=n(225),vn=n(226),En=n(74),wn=n.n(En);var xn=function(e){var t=e.onClose,n=e.open,a=e.content;return r.a.createElement(O.a,{disableBackdropClick:!0,disableEscapeKeyDown:!0,open:n},r.a.createElement(fe.a,null,"Confirm"),r.a.createElement(Ze.a,{dividers:!0},r.a.createElement(we.a,null,a)),r.a.createElement(tt.a,null,r.a.createElement(j.a,{onClick:function(){return t(!1)}},"Cancel"),r.a.createElement(j.a,{onClick:function(){return t(!0)}},"Ok")))},On=Object(h.a)((function(e){return{spacer:{height:e.spacing(2)},searchWrapper:{margin:"".concat(e.spacing(2),"px ").concat(e.spacing(1),"px"),marginTop:0,padding:"2px 4px",display:"flex"},search:{marginLeft:e.spacing(1),flex:1},searchClear:{padding:e.spacing(1)},listWrapper:{display:"flex",justifyContent:"center",overflow:"hidden"},list:{maxWidth:400,width:"100%"},tile:{cursor:"pointer"},tilebar:{height:56},deleteButton:{zIndex:10,position:"absolute",top:0,left:0}}}));var yn=function(e){var t=e.onLoad,n=Object(a.useContext)(Jn),o=On(),c=Object(a.useRef)({}),i=Object(a.useState)(),l=Object(u.a)(i,2),s=l[0],m=l[1],p=Object(a.useState)(!1),h=Object(u.a)(p,2),v=h[0],E=h[1],w=Object(a.useState)(""),x=Object(u.a)(w,2),O=x[0],y=x[1],j=function(){ct(pt("/templates")).then((function(e){return e.json()})).then(function(){var e=Object(g.a)(d.a.mark((function e(t){var n,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(f.a)(t),e.prev=1,n.s();case 3:if((a=n.n()).done){e.next=11;break}return r=a.value,e.next=7,lt(r.image_url);case 7:r.image_url=e.sent,r.meta_data&&(r.meta_data=JSON.parse(r.meta_data));case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:return e.abrupt("return",t);case 20:case"end":return e.stop()}}),e,null,[[1,13,16,19]])})));return function(t){return e.apply(this,arguments)}}()).then((function(e){return m(e)}))};if(Object(a.useEffect)((function(){j()}),[]),!s)return r.a.createElement(ve.a,null);var k=s.filter((function(e){return e.label.toLowerCase().includes(O.toLowerCase())}));return k.sort((function(e,t){return t.amount_uses-e.amount_uses})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:o.spacer}),r.a.createElement(Ee.a,{variant:"outlined",className:o.searchWrapper},r.a.createElement(gn.a,{value:O,onChange:function(e){y(e.target.value)},placeholder:"Search",className:o.search}),r.a.createElement(b.a,{onClick:function(){return y("")},className:o.searchClear},r.a.createElement(G.a,null))),r.a.createElement("div",{className:o.listWrapper},r.a.createElement(bn.a,{cellHeight:150,className:o.list},k.map((function(e,a){return r.a.createElement(hn.a,{key:a,className:o.tile,onClick:function(n){return function(e,n){"DIV"!==e.target.tagName&&"IMG"!==e.target.tagName||t(n)}(n,e)}},r.a.createElement("img",{src:e.image_url,alt:e.label,loading:"lazy",onLoad:function(){return function(e){ut(e.image_url)}(e)}}),r.a.createElement(vn.a,{title:e.label,subtitle:(i=e.amount_uses,1===i?"1 Meme Created":i+" Memes Created"),className:o.tilebar}),n.password&&r.a.createElement(b.a,{onClick:function(){return function(e){c.current=e,E(!0)}(e)},className:o.deleteButton},r.a.createElement(wn.a,{fontSize:"small"})));var i}))),r.a.createElement(xn,{open:v,onClose:function(e){var t,a;E(!1),e&&(t=n.password,a=c.current.id,fetch(pt("/templates/delete/"+a),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:t})})).then(j)},content:'The template "'.concat(c.current.label,'" will be deleted')})))},jn=n(227),kn=n(121),Cn=n.n(kn),Sn=Object(h.a)((function(e){return{listWrapper:{display:"flex",justifyContent:"center",overflow:"hidden"},list:{maxWidth:400,paddingTop:e.spacing(1),width:"100%"},tile:{cursor:"pointer","& div":{display:"flex",justifyContent:"center",alignItems:"center"}},deleteButton:{zIndex:10,position:"absolute",top:0,left:0},addButton:{position:"fixed",right:e.spacing(2),bottom:e.spacing(2)}}}));function Nn(e){var t=e.sticker,n=e.onDelete,o=Object(a.useContext)(Jn),c=Sn(),i=Object(a.useRef)();return Object(a.useEffect)((function(){i.current&&(i.current.onload=function(){i.current&&(i.current.naturalWidth>=i.current.naturalHeight?i.current.style.width="100%":i.current.naturalHeight>i.current.naturalWidth&&(i.current.style.height="100%"))})}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:t.image_url,alt:"Sticker",loading:"lazy",ref:i,onLoad:function(){ut(t.image_url)}}),o.password&&r.a.createElement(b.a,{onClick:function(){return n(t)},className:c.deleteButton},r.a.createElement(wn.a,{fontSize:"small"})))}var Tn=function(e){var t=e.onLoad,n=e.active,o=Object(a.useContext)(Jn),i=Sn(),l=Object(a.useRef)({}),s=Object(a.useState)(),m=Object(u.a)(s,2),p=m[0],b=m[1],h=Object(a.useState)(!1),v=Object(u.a)(h,2),E=v[0],w=v[1],x=function(){ct(pt("/stickers")).then((function(e){return e.json()})).then(function(){var e=Object(g.a)(d.a.mark((function e(t){var n,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(f.a)(t),e.prev=1,n.s();case 3:if((a=n.n()).done){e.next=10;break}return r=a.value,e.next=7,lt(r.image_url);case 7:r.image_url=e.sent;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:return e.abrupt("return",t);case 19:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()).then((function(e){return b(e)}))},O=function(e){l.current=e,w(!0)},y=function(){var e=Object(g.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ct("image/*");case 2:return t=e.sent,(n=new FormData).append("image",t),n.append("password",o.password),e.next=8,bt(n);case 8:x();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){x()}),[]),p?(p.sort((function(e,t){return t.amount_uses-e.amount_uses})),r.a.createElement("div",{className:i.listWrapper},r.a.createElement(bn.a,{className:i.list,cols:3},p.map((function(e,n){return r.a.createElement(hn.a,{className:i.tile,onClick:function(n){return function(e,n){"DIV"!==e.target.tagName&&"IMG"!==e.target.tagName||t(n)}(n,e)},key:n},r.a.createElement(Nn,{sticker:e,onDelete:O}))}))),r.a.createElement(xn,{open:E,onClose:function(e){var t,n;w(!1),e&&(t=o.password,n=l.current.id,fetch(pt("/stickers/delete/"+n),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:t})})).then(x)},content:"Sticker ".concat(l.current.id," will be deleted")}),o.password&&c.a.createPortal(r.a.createElement(jn.a,{in:n,unmountOnExit:!0},r.a.createElement(Ht.a,{color:"secondary",className:i.addButton,onClick:y},r.a.createElement(Cn.a,null))),document.getElementById("templates-dialog-inner-container")))):r.a.createElement(ve.a,null)},Ln=Object(h.a)((function(e){return{toolbar:{minHeight:46},body:{marginTop:46}}})),Rn=r.a.forwardRef((function(e,t){return r.a.createElement(un.a,Object.assign({direction:"up",ref:t},e))}));var zn=B((function(e){var t=e.onClose,n=e.open,o=Object(a.useContext)(Jn),c=Ln({width:o.width}),i=Object(a.useState)(0),l=Object(u.a)(i,2),s=l[0],m=l[1],p=function(){t()},d=function(){document.getElementById("templates-dialog-inner-container").scrollTo(0,0)};return r.a.createElement(O.a,{fullScreen:!0,onClose:p,open:n,TransitionComponent:Rn},r.a.createElement(Pt.a,null,r.a.createElement(Mt.a,{className:c.toolbar},r.a.createElement(b.a,{edge:"start",color:"inherit",onClick:p},r.a.createElement(G.a,{fontSize:"small"})),r.a.createElement(mn.a,{value:s,onChange:function(e,t){m(t),d()}},r.a.createElement(pn.a,{label:"Templates"}),r.a.createElement(pn.a,{label:"Stickers"})))),r.a.createElement(fn.a,{index:s,onChangeIndex:function(e){m(e),d()},axis:"x",id:"templates-dialog-inner-container",disableLazyLoading:!0},r.a.createElement("div",{className:c.body},r.a.createElement(yn,{onLoad:function(e){o.event.dispatchEvent(new CustomEvent("loadTemplate",{detail:{template:e}})),p()},active:0===s})),r.a.createElement("div",{className:c.body},r.a.createElement(Tn,{onLoad:function(e){o.event.dispatchEvent(new CustomEvent("loadSticker",{detail:{sticker:e}})),p()},active:1===s}))))}),"templates"),Wn=n(236),In=n(221),Bn=n(122),An=Object(h.a)((function(e){return{innerDialog:{background:"none",overflow:"hidden"}}}));function Fn(e){var t=e.data,n=t.selector,a=t.content,o=e.open,c=document.querySelector(n).getBoundingClientRect();return r.a.createElement(Wn.a,{open:o,placement:"top",arrow:!0,title:a},r.a.createElement("div",{style:{position:"absolute",top:c.top+20,left:c.left,width:c.width+"px",height:c.height+"px"}}))}var Dn=B((function(e){var t=e.open,n=e.onClose,a=An();return r.a.createElement(O.a,{open:t,onClose:n,fullScreen:!0,PaperProps:{className:a.innerDialog}},r.a.createElement(In.a,{onClickAway:n},r.a.createElement("div",null,Bn.map((function(e,n){return r.a.createElement(Fn,{data:e,key:n,open:t})})))))}),"help"),Pn=Object(h.a)((function(e){return{form:{padding:e.spacing(2),paddingTop:0},applyButton:{marginTop:e.spacing(2)},input:{marginTop:e.spacing(1)},snackbarClose:{color:e.palette.primary.variant}}}));var Mn=B((function(e){var t=e.onClose,n=e.open,o=Object(a.useContext)(Jn),c=Object(k.c)(),i=c.register,l=c.getValues,s=c.handleSubmit,m=c.control,p=c.watch,f=c.setValue,h=Pn(),v=Object(a.useState)(!1),E=Object(u.a)(v,2),w=E[0],x=E[1],C=Object(a.useState)(!1),S=Object(u.a)(C,2),N=S[0],T=S[1],L=function(){var e=Object(g.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l("password"),e.next=3,gt(n);case 3:e.sent?(T(!1),x(!0),o.setPassword(n),t()):T(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{onClose:t,open:n},r.a.createElement(fe.a,null,"Login"),r.a.createElement(k.b,{control:m,watch:p,register:i,setValue:f},r.a.createElement("form",{onSubmit:s(L),className:h.form},r.a.createElement(ge.a,null,r.a.createElement(y.a,{error:N,inputRef:i(),className:h.input,fullWidth:!0,type:"password",name:"password",label:"Password",helperText:N&&"Wrong Password"}),r.a.createElement(j.a,{fullWidth:!0,className:h.applyButton,type:"submit"},"Login"))))),r.a.createElement(xe.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:w,autoHideDuration:3e3,onClose:function(){return x(!1)},message:"Logged In",action:r.a.createElement(b.a,{onClick:function(){return x(!1)},className:h.snackbarClose},r.a.createElement(G.a,null))}))}),"auth"),Hn=Object(h.a)((function(e){return{appBar:{position:"absolute",top:"unset",bottom:0,left:0,right:"unset",backgroundColor:e.palette.background.paper},fabButton:{position:"absolute",top:-30,left:0,right:0,margin:"0 auto"},spacer:{flexGrow:1}}}));var Vn=function(){var e=Object(a.useContext)(Jn),t=Hn(),n=Object(a.useRef)(),o=Object(a.useRef)(),c=Object(a.useState)(!1),i=Object(u.a)(c,2),l=i[0],s=i[1],m=Object(a.useState)(!1),p=Object(u.a)(m,2),d=p[0],f=p[1],g=Object(a.useState)(!1),h=Object(u.a)(g,2),v=h[0],E=h[1],w=Object(a.useState)(!1),O=Object(u.a)(w,2),y=O[0],j=O[1],k=function(){f(!0)},C=function(){e.password||(o.current=setTimeout((function(){j(!0)}),1e3))},S=function(){clearTimeout(o.current)},N=function(t){return function(){e.event.dispatchEvent(new CustomEvent(t))}};return Object(a.useEffect)((function(){return e.event.addEventListener("openTemplatesDialog",k),function(){e.event.removeEventListener("openTemplatesDialog",k)}})),r.a.createElement(Pt.a,{position:"fixed",className:t.appBar},r.a.createElement(Mt.a,null,r.a.createElement(b.a,{onClick:function(){E(!0)},onTouchStart:C,onTouchEnd:S,onMouseDown:C,onMouseUp:S},r.a.createElement(Xt.a,null)),r.a.createElement(b.a,{onClick:k,id:"templates-button"},r.a.createElement(x.a,null)),r.a.createElement("div",{className:t.spacer}),r.a.createElement(Ht.a,{color:"primary",className:t.fabButton,onClick:N("generateImage"),disabled:!e.image},r.a.createElement(_t.a,null)),r.a.createElement(b.a,{onClick:N("addTextbox"),id:"textbox-button"},r.a.createElement(qt.a,null)),r.a.createElement(b.a,{onClick:N("undo"),id:"undo-button"},r.a.createElement($t.a,null)),r.a.createElement(b.a,{onClick:function(){s(!l)},ref:n},r.a.createElement(Gt.a,null)),r.a.createElement(sn,{open:l,anchorEl:n.current,onClose:function(){s(!1)}}),r.a.createElement(zn,{open:d,onClose:function(){return f(!1)}}),r.a.createElement(Dn,{open:v,onClose:function(){return E(!1)}}),r.a.createElement(Mn,{open:y,onClose:function(){return j(!1)}})))};var _n=function(){var e=Object(a.useContext)(Jn),t=Object(a.useState)(!1),n=Object(u.a)(t,2),r=n[0],o=n[1];return Object(a.useEffect)((function(){e.password||(I.a.initialize("UA-162994094-2"),I.a.pageview(window.location.pathname),o(!0))}),[]),Object(a.useEffect)((function(){if(r){var t=I.a.event.bind(null,Object(s.a)({category:"Editor",action:"Generate Image"},e.currentTemplate?{label:e.currentTemplate.label,value:e.currentTemplate.id}:{})),n=function(e){var t=e.detail.template;return I.a.event({category:"Editor",action:"Load Template",label:t.label,value:t.id})},a=function(){return I.a.modalview("share")},o=function(e){var t=e.detail.link;return I.a.event({category:"Editor",action:"Upload Image",label:t})},c=function(){return I.a.event({category:"Editor",action:"Download Image"})},i=function(e){var t=e.detail.label;return I.a.event({category:"Editor",action:"Share",label:t})};return e.event.addEventListener("generateImage",t),e.event.addEventListener("loadTemplate",n),e.event.addEventListener("openShareModal",a),e.event.addEventListener("uploadImage",o),e.event.addEventListener("downloadImage",c),e.event.addEventListener("share",i),function(){e.event.removeEventListener("generateImage",t),e.event.removeEventListener("loadTemplate",n),e.event.removeEventListener("openShareModal",a),e.event.removeEventListener("uploadImage",o),e.event.removeEventListener("downloadImage",c),e.event.removeEventListener("share",i)}}}),[e,r]),null},Un=Object(h.a)((function(e){return{snackbarClose:{color:e.palette.primary.variant}}}));var qn=function(){var e=Un(),t=Object(a.useState)(!1),n=Object(u.a)(t,2),o=n[0],c=n[1],i=Object(a.useState)(""),l=Object(u.a)(i,2),s=l[0],m=l[1];return Object(a.useEffect)((function(){var e=new BroadcastChannel("sw-0");return e.addEventListener("message",(function(e){var t=e.data;"content-cached"===t?(c(!0),m("The app is cached for offline use")):"content-available"===t&&(c(!0),m("A new version is available. Restart the app to see it"))})),function(){return e.close()}}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(xe.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:o,autoHideDuration:6e3,message:s,onClose:function(){return c(!1)},action:r.a.createElement(b.a,{onClick:function(){return c(!1)},className:e.snackbarClose},r.a.createElement(G.a,null))}))},Jn=r.a.createContext();var Gn=function(){var e=Object(a.useState)({event:new EventTarget,image:null,label:null,currentTemplate:null,password:localStorage.getItem("password")}),t=Object(u.a)(e,2),n=t[0],o=t[1],c={set:function(e){return o(Object(s.a)(Object(s.a)({},n),e))},setPassword:function(e){localStorage.setItem("password",e),o(Object(s.a)(Object(s.a)({},n),{},{password:e}))}};return Object(a.useEffect)((function(){var e=function(e){e.data.image&&o(Object(s.a)(Object(s.a)({},n),{},{image:e.data.image,label:e.data.label}))},t=function(e){e.ctrlKey&&90===e.keyCode&&n.event.dispatchEvent(new CustomEvent("undo"))};return window.addEventListener("message",e),window.addEventListener("keydown",t),function(){window.removeEventListener("message",e),window.removeEventListener("keydown",t)}})),window.context=n,r.a.createElement(Jn.Provider,{value:Object(s.a)(Object(s.a)({},n),c)},r.a.createElement(_n,null),r.a.createElement(qn,null),r.a.createElement(Dt,null),r.a.createElement(Vn,null))},Yn=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)),Xn=new BroadcastChannel("sw-0");function Kn(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(Xn.postMessage("content-available"),console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(Xn.postMessage("content-cached"),console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}n(171);var $n=Object(i.a)({palette:{type:"dark",primary:{main:"#BB86FC",variant:"#3700B3"}}});c.a.render(r.a.createElement(l.a,{theme:$n},r.a.createElement(Gn,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/editor",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/editor","/service-worker.js");Yn?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Kn(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Kn(t,e)}))}}()},37:function(e){e.exports=JSON.parse('{"colors":{"White":"white","Black":"black","Green":"#2ecc71","Red":"#e74c3c","Blue":"#3498db","Yellow":"#f1c40f","Purple":"#9b59b6"},"textAlign":{"Left":"left","Right":"right","Center":"center"},"verticalTextAlign":{"Top":"top","Bottom":"bottom","Center":"center"},"fontFamilies":{"Impact":"\'Impact\', fantasy","Arial":"Arial","Comic Sans":"\'Comic Sans\', cursive","Courier":"\'Courier\', monospace","Times New Roman":"\'Times New Roman\', \'Times\', serif"}}')}},[[140,1,2]]]);
//# sourceMappingURL=main.c2c4a4b4.chunk.js.map